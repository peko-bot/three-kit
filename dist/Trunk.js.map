{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external \"three\"","webpack:///./src/util/DeepClone.js","webpack:///./node_modules/_tween@0.9.0@tween/tween.js","webpack:///./node_modules/_three-orbitcontrols@2.1.2@three-orbitcontrols/OrbitControls.js","webpack:///./src/loader/OBJLoader.js","webpack:///./src/loader/MTLLoader.js","webpack:///./src/core/index.js","webpack:///./src/index.js"],"names":["root","factory","exports","module","require","define","amd","a","i","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","undefined","__WEBPACK_AMD_DEFINE_RESULT__","copyIsArray","toString","hasOwn","class2type","[object Boolean]","[object Number]","[object String]","[object Function]","[object Array]","[object Date]","[object RegExp]","[object Object]","type","obj","String","isArray","Array","isPlainObject","nodeType","_typeof","isWindow","constructor","extend","target","options","clone","src","copy","apply","Date","now","valueOf","TWEEN","_tweens","REVISION","getAll","removeAll","add","tween","push","remove","indexOf","splice","update","time","length","numTweens","Tween","_object","_valuesStart","_valuesEnd","_duration","_delayTime","_startTime","_easingFunction","Easing","Linear","None","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onCompleteCallback","this","to","properties","duration","start","concat","stop","delay","amount","easing","interpolation","chain","arguments","onStart","callback","onUpdate","onComplete","elapsed","end","numChainedTweens","k","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Math","cos","PI","sin","Exponential","pow","Circular","sqrt","Elastic","asin","Back","Bounce","v","f","floor","fn","Utils","Bezier","b","pw","bn","Bernstein","CatmullRom","p0","p1","fc","Factorial","p2","p3","v0","v1","t2","THREE","OrbitControls","domElement","document","enabled","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","MOUSE","ZOOM","MIDDLE","PAN","target0","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","reset","updateProjectionMatrix","dispatchEvent","changeEvent","state","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","max","min","makeSafe","radius","scale","panOffset","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY_PAN","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","angle","rotateUp","panLeft","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","body","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","console","warn","dollyIn","dollyScale","dollyOut","event","preventDefault","button","clientX","clientY","handleMouseDownRotate","handleMouseDownDolly","handleMouseDownPan","addEventListener","subVectors","x","y","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","stopPropagation","handleMouseWheel","keyCode","handleKeyDown","touches","pageX","pageY","handleTouchStartRotate","dx","dy","handleTouchStartDollyPan","handleTouchMoveRotate","handleTouchMoveDollyPan","EventDispatcher","defineProperties","center","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","default","OBJLoader","manager","_classCallCheck","DefaultLoadingManager","materials","regexp","vertexPattern","normalPattern","uvPattern","faceVertex","faceVertexUv","faceVertexUvNormal","faceVertexNormal","objectPattern","smoothingPattern","materialLibraryPattern","materialUsePattern","url","onLoad","onProgress","onError","loader","FileLoader","setPath","path","load","text","parse","objects","vertices","normals","uvs","materialLibraries","startObject","fromDeclaration","previousMaterial","currentMaterial","finalize","geometry","smooth","startMaterial","libraries","previous","inherited","groupCount","index","material","mtllib","groupStart","groupEnd","cloned","lastMultiMaterial","mi","declared","parseVertexIndex","len","parseInt","parseNormalIndex","parseUVIndex","addVertex","dst","addVertexLine","addNormal","addUV","addUVLine","addFace","ua","ub","uc","ud","na","nb","nc","nd","id","vLen","ia","ib","ic","uvLen","nLen","addLineGeometry","vi","uvi","createParserState","replace","lines","split","line","lineFirstChar","lineSecondChar","result","trimLeft","trim","charAt","exec","parseFloat","Error","lineParts","substring","lineVertices","lineUVs","li","llen","parts","substr","test","toLowerCase","container","Group","isLine","buffergeometry","BufferGeometry","addAttribute","BufferAttribute","Float32Array","computeVertexNormals","mesh","createdMaterials","miLen","sourceMaterial","LineBasicMaterial","materialLine","MeshPhongMaterial","flatShading","SmoothShading","FlatShading","addGroup","LineSegments","Mesh","timeEnd","MTLLoader","texturePath","setTexturePath","crossOrigin","materialOptions","info","delimiterPattern","materialsInfo","pos","ss","materialCreator","MaterialCreator","setCrossOrigin","setManager","setMaterials","baseUrl","materialsArray","nameLookup","side","FrontSide","wrap","RepeatWrapping","convert","converted","mn","mat","covmat","prop","save","lprop","normalizeRGB","ignoreZeroRGBs","materialName","createMaterial","params","setMapForType","mapType","texParams","getTextureParams","map","loadTexture","resolveURL","repeat","wrapS","wrapT","color","Color","fromArray","specular","shininess","opacity","transparent","matParams","items","bumpScale","join","mapping","texture","Loader","Handlers","TextureLoader","config","clearOpacity","meshShiftTime","random","beforeInit","borderVisible","divisor","cameraPosition","z","afterRotation","rotationSpeed","pillar","border","select","light","lights","HemisphereLight","controls","documentElement","_startPositions","_startTweenCount","intervals","old","current","withdrawPosition","dataObject","modelTexture","camera","renderer","scene","initAreaPosition","area","child","_this","before_animate","dealObjectInLoadCirculStart","visible","changeModel4DataRefresh","dmName","data","userData","val","height","setHeightSlow","setHeight","sh","setInterval","h","clearInterval","isNaN","verticesNeedUpdate","minz","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","next","done","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","vertice","initListener","e","setMeshHighLightStatus","showDetail","objectFromMouse","uuid","includes","show_detail","flag","meshMove","pagex","pagey","_renderer$domElement","offsetLeft","elty","offsetTop","vpx","offsetWidth","vpy","offsetHeight","vector","raycaster","Raycaster","setFromCamera","intersects","intersectObjects","children","intersect","point","face","getOffset","node","parentNode","withdraw","getMeshWidth","_getCoordinate2InScene","gap","tweenInOut","boxHelper","BoxHelper","box","Box3","setFromObject","width","handleModelShift","childMapping","updateMatrixWorld","getVector2InScene","j","unproject","normalize","ray","origin","g","direction","setX","setY","loadMaterials","paths","_toConsumableArray","shift","loadObjects","_DeepClone2","initParams","cameraAspect","PerspectiveCamera","WebGLRenderer","alpha","antialias","resize","shadowMap","PCFSoftShadowMap","appendChild","Scene","assign","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","clear_color","setClearColor","afterMovementMesh","rotateAnimate","requestAnimationFrame","rotation","render","handleMesh","traverse","Geometry","fromBufferGeometry","Line","log","renderPillar","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","showTexture","getObject","refreshPillar","flush","setSize","init","_config","mtlLoader","set_material","objLoader","newObject","Object3D","Trunk"],"mappings":"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","file":"Trunk.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"three\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"three\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"three\")) : factory(root[\"three\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","define([], () => {\r\n\tvar copyIsArray,\r\n\t\ttoString = Object.prototype.toString,\r\n\t\thasOwn = Object.prototype.hasOwnProperty;\r\n\r\n\tvar class2type = {\r\n\t\t\t'[object Boolean]': 'boolean',\r\n\t\t\t'[object Number]': 'number',\r\n\t\t\t'[object String]': 'string',\r\n\t\t\t'[object Function]': 'function',\r\n\t\t\t'[object Array]': 'array',\r\n\t\t\t'[object Date]': 'date',\r\n\t\t\t'[object RegExp]': 'regExp',\r\n\t\t\t'[object Object]': 'object'\r\n\t\t},\r\n\r\n\t\ttype = function (obj) {\r\n\t\t\treturn obj == null\r\n\t\t\t\t? String(obj)\r\n\t\t\t\t: class2type[toString.call(obj)] || 'object';\r\n\t\t},\r\n\r\n\t\tisWindow = function (obj) {\r\n\t\t\treturn obj && typeof obj === 'object' && 'setInterval' in obj;\r\n\t\t},\r\n\r\n\t\tisArray = Array.isArray || function (obj) {\r\n\t\t\treturn type(obj) === 'array';\r\n\t\t},\r\n\r\n\t\tisPlainObject = function (obj) {\r\n\t\t\tif (!obj || type(obj) !== 'object' || obj.nodeType || isWindow(obj)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (obj.constructor && !hasOwn.call(obj, 'constructor') && !hasOwn.call(obj.constructor.prototype, 'isPrototypeOf')) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar key;\r\n\r\n\t\t\tfor (key in obj) {}\r\n\r\n\t\t\treturn key === undefined || hasOwn.call(obj, key);\r\n\t\t},\r\n\r\n\t\textend = function (target, options) {\r\n\t\t\tfor (var name in options) {\r\n\t\t\t\tvar src = target[name];\r\n\t\t\t\tvar copy = options[name];\r\n\r\n\t\t\t\tif (target === copy) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\r\n\t\t\t\t\tvar clone;\r\n\r\n\t\t\t\t\tif (copyIsArray) {\r\n\t\t\t\t\t\tcopyIsArray = false;\r\n\t\t\t\t\t\tclone = src && isArray(src)\r\n\t\t\t\t\t\t\t? src\r\n\t\t\t\t\t\t\t: [];\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tclone = src && isPlainObject(src)\r\n\t\t\t\t\t\t\t? src\r\n\t\t\t\t\t\t\t: {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ttarget[name] = extend(clone, copy);\r\n\t\t\t\t} else if (copy !== undefined) {\r\n\t\t\t\t\ttarget[name] = copy;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn target;\r\n\t\t};\r\n\r\n\treturn extend;\r\n});","/**\n * @author sole / http://soledadpenades.com\n * @author mrdoob / http://mrdoob.com\n * @author Robert Eisele / http://www.xarg.org\n * @author Philippe / http://philippe.elsass.me\n * @author Robert Penner / http://www.robertpenner.com/easing_terms_of_use.html\n * @author Paul Lewis / http://www.aerotwist.com/\n * @author lechecacharro\n * @author Josh Faul / http://jocafa.com/\n * @author egraether / http://egraether.com/\n */\n\nif ( Date.now === undefined ) {\n\n  Date.now = function () {\n\n    return new Date().valueOf();\n\n  }\n\n}\n\nvar TWEEN = TWEEN || ( function () {\n\n  var _tweens = [];\n\n  return {\n\n    REVISION: '8',\n\n    getAll: function () {\n\n      return _tweens;\n\n    },\n\n    removeAll: function () {\n\n      _tweens = [];\n\n    },\n\n    add: function ( tween ) {\n\n      _tweens.push( tween );\n\n    },\n\n    remove: function ( tween ) {\n\n      var i = _tweens.indexOf( tween );\n\n      if ( i !== -1 ) {\n\n        _tweens.splice( i, 1 );\n\n      }\n\n    },\n\n    update: function ( time ) {\n\n      if ( _tweens.length === 0 ) return false;\n\n      var i = 0, numTweens = _tweens.length;\n\n      time = time !== undefined ? time : Date.now();\n\n      while ( i < numTweens ) {\n\n        if ( _tweens[ i ].update( time ) ) {\n\n          i ++;\n\n        } else {\n\n          _tweens.splice( i, 1 );\n\n          numTweens --;\n\n        }\n\n      }\n\n      return true;\n\n    }\n\n  };\n\n} )();\n\nTWEEN.Tween = function ( object ) {\n\n  var _object = object;\n  var _valuesStart = {};\n  var _valuesEnd = {};\n  var _duration = 1000;\n  var _delayTime = 0;\n  var _startTime = null;\n  var _easingFunction = TWEEN.Easing.Linear.None;\n  var _interpolationFunction = TWEEN.Interpolation.Linear;\n  var _chainedTweens = [];\n  var _onStartCallback = null;\n  var _onStartCallbackFired = false;\n  var _onUpdateCallback = null;\n  var _onCompleteCallback = null;\n\n  this.to = function ( properties, duration ) {\n\n    if ( duration !== undefined ) {\n\n      _duration = duration;\n\n    }\n\n    _valuesEnd = properties;\n\n    return this;\n\n  };\n\n  this.start = function ( time ) {\n\n    TWEEN.add( this );\n\n    _onStartCallbackFired = false;\n\n    _startTime = time !== undefined ? time : Date.now();\n    _startTime += _delayTime;\n\n    for ( var property in _valuesEnd ) {\n\n      // This prevents the interpolation of null values or of non-existing properties\n      if( _object[ property ] === null || !(property in _object) ) {\n\n        continue;\n\n      }\n\n      // check if an Array was provided as property value\n      if ( _valuesEnd[ property ] instanceof Array ) {\n\n        if ( _valuesEnd[ property ].length === 0 ) {\n\n          continue;\n\n        }\n\n        // create a local copy of the Array with the start value at the front\n        _valuesEnd[ property ] = [ _object[ property ] ].concat( _valuesEnd[ property ] );\n\n      }\n\n      _valuesStart[ property ] = _object[ property ];\n\n    }\n\n    return this;\n\n  };\n\n  this.stop = function () {\n\n    TWEEN.remove( this );\n    return this;\n\n  };\n\n  this.delay = function ( amount ) {\n\n    _delayTime = amount;\n    return this;\n\n  };\n\n  this.easing = function ( easing ) {\n\n    _easingFunction = easing;\n    return this;\n\n  };\n\n  this.interpolation = function ( interpolation ) {\n\n    _interpolationFunction = interpolation;\n    return this;\n\n  };\n\n  this.chain = function () {\n\n    _chainedTweens = arguments;\n    return this;\n\n  };\n\n  this.onStart = function ( callback ) {\n\n    _onStartCallback = callback;\n    return this;\n\n  };\n\n  this.onUpdate = function ( callback ) {\n\n    _onUpdateCallback = callback;\n    return this;\n\n  };\n\n  this.onComplete = function ( callback ) {\n\n    _onCompleteCallback = callback;\n    return this;\n\n  };\n\n  this.update = function ( time ) {\n\n    if ( time < _startTime ) {\n\n      return true;\n\n    }\n\n    if ( _onStartCallbackFired === false ) {\n\n      if ( _onStartCallback !== null ) {\n\n        _onStartCallback.call( _object );\n\n      }\n\n      _onStartCallbackFired = true;\n\n    }\n\n    var elapsed = ( time - _startTime ) / _duration;\n    elapsed = elapsed > 1 ? 1 : elapsed;\n\n    var value = _easingFunction( elapsed );\n\n    for ( var property in _valuesStart ) {\n\n      var start = _valuesStart[ property ];\n      var end = _valuesEnd[ property ];\n\n      if ( end instanceof Array ) {\n\n        _object[ property ] = _interpolationFunction( end, value );\n\n      } else {\n\n        _object[ property ] = start + ( end - start ) * value;\n\n      }\n\n    }\n\n    if ( _onUpdateCallback !== null ) {\n\n      _onUpdateCallback.call( _object, value );\n\n    }\n\n    if ( elapsed == 1 ) {\n\n      if ( _onCompleteCallback !== null ) {\n\n        _onCompleteCallback.call( _object );\n\n      }\n\n      for ( var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i ++ ) {\n\n        _chainedTweens[ i ].start( time );\n\n      }\n\n      return false;\n\n    }\n\n    return true;\n\n  };\n\n};\n\nTWEEN.Easing = {\n\n  Linear: {\n\n    None: function ( k ) {\n\n      return k;\n\n    }\n\n  },\n\n  Quadratic: {\n\n    In: function ( k ) {\n\n      return k * k;\n\n    },\n\n    Out: function ( k ) {\n\n      return k * ( 2 - k );\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( ( k *= 2 ) < 1 ) return 0.5 * k * k;\n      return - 0.5 * ( --k * ( k - 2 ) - 1 );\n\n    }\n\n  },\n\n  Cubic: {\n\n    In: function ( k ) {\n\n      return k * k * k;\n\n    },\n\n    Out: function ( k ) {\n\n      return --k * k * k + 1;\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( ( k *= 2 ) < 1 ) return 0.5 * k * k * k;\n      return 0.5 * ( ( k -= 2 ) * k * k + 2 );\n\n    }\n\n  },\n\n  Quartic: {\n\n    In: function ( k ) {\n\n      return k * k * k * k;\n\n    },\n\n    Out: function ( k ) {\n\n      return 1 - ( --k * k * k * k );\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( ( k *= 2 ) < 1) return 0.5 * k * k * k * k;\n      return - 0.5 * ( ( k -= 2 ) * k * k * k - 2 );\n\n    }\n\n  },\n\n  Quintic: {\n\n    In: function ( k ) {\n\n      return k * k * k * k * k;\n\n    },\n\n    Out: function ( k ) {\n\n      return --k * k * k * k * k + 1;\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( ( k *= 2 ) < 1 ) return 0.5 * k * k * k * k * k;\n      return 0.5 * ( ( k -= 2 ) * k * k * k * k + 2 );\n\n    }\n\n  },\n\n  Sinusoidal: {\n\n    In: function ( k ) {\n\n      return 1 - Math.cos( k * Math.PI / 2 );\n\n    },\n\n    Out: function ( k ) {\n\n      return Math.sin( k * Math.PI / 2 );\n\n    },\n\n    InOut: function ( k ) {\n\n      return 0.5 * ( 1 - Math.cos( Math.PI * k ) );\n\n    }\n\n  },\n\n  Exponential: {\n\n    In: function ( k ) {\n\n      return k === 0 ? 0 : Math.pow( 1024, k - 1 );\n\n    },\n\n    Out: function ( k ) {\n\n      return k === 1 ? 1 : 1 - Math.pow( 2, - 10 * k );\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( k === 0 ) return 0;\n      if ( k === 1 ) return 1;\n      if ( ( k *= 2 ) < 1 ) return 0.5 * Math.pow( 1024, k - 1 );\n      return 0.5 * ( - Math.pow( 2, - 10 * ( k - 1 ) ) + 2 );\n\n    }\n\n  },\n\n  Circular: {\n\n    In: function ( k ) {\n\n      return 1 - Math.sqrt( 1 - k * k );\n\n    },\n\n    Out: function ( k ) {\n\n      return Math.sqrt( 1 - ( --k * k ) );\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( ( k *= 2 ) < 1) return - 0.5 * ( Math.sqrt( 1 - k * k) - 1);\n      return 0.5 * ( Math.sqrt( 1 - ( k -= 2) * k) + 1);\n\n    }\n\n  },\n\n  Elastic: {\n\n    In: function ( k ) {\n\n      var s, a = 0.1, p = 0.4;\n      if ( k === 0 ) return 0;\n      if ( k === 1 ) return 1;\n      if ( !a || a < 1 ) { a = 1; s = p / 4; }\n      else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n      return - ( a * Math.pow( 2, 10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) );\n\n    },\n\n    Out: function ( k ) {\n\n      var s, a = 0.1, p = 0.4;\n      if ( k === 0 ) return 0;\n      if ( k === 1 ) return 1;\n      if ( !a || a < 1 ) { a = 1; s = p / 4; }\n      else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n      return ( a * Math.pow( 2, - 10 * k) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) + 1 );\n\n    },\n\n    InOut: function ( k ) {\n\n      var s, a = 0.1, p = 0.4;\n      if ( k === 0 ) return 0;\n      if ( k === 1 ) return 1;\n      if ( !a || a < 1 ) { a = 1; s = p / 4; }\n      else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n      if ( ( k *= 2 ) < 1 ) return - 0.5 * ( a * Math.pow( 2, 10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) );\n      return a * Math.pow( 2, -10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) * 0.5 + 1;\n\n    }\n\n  },\n\n  Back: {\n\n    In: function ( k ) {\n\n      var s = 1.70158;\n      return k * k * ( ( s + 1 ) * k - s );\n\n    },\n\n    Out: function ( k ) {\n\n      var s = 1.70158;\n      return --k * k * ( ( s + 1 ) * k + s ) + 1;\n\n    },\n\n    InOut: function ( k ) {\n\n      var s = 1.70158 * 1.525;\n      if ( ( k *= 2 ) < 1 ) return 0.5 * ( k * k * ( ( s + 1 ) * k - s ) );\n      return 0.5 * ( ( k -= 2 ) * k * ( ( s + 1 ) * k + s ) + 2 );\n\n    }\n\n  },\n\n  Bounce: {\n\n    In: function ( k ) {\n\n      return 1 - TWEEN.Easing.Bounce.Out( 1 - k );\n\n    },\n\n    Out: function ( k ) {\n\n      if ( k < ( 1 / 2.75 ) ) {\n\n        return 7.5625 * k * k;\n\n      } else if ( k < ( 2 / 2.75 ) ) {\n\n        return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;\n\n      } else if ( k < ( 2.5 / 2.75 ) ) {\n\n        return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;\n\n      } else {\n\n        return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;\n\n      }\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( k < 0.5 ) return TWEEN.Easing.Bounce.In( k * 2 ) * 0.5;\n      return TWEEN.Easing.Bounce.Out( k * 2 - 1 ) * 0.5 + 0.5;\n\n    }\n\n  }\n\n};\n\nTWEEN.Interpolation = {\n\n  Linear: function ( v, k ) {\n\n    var m = v.length - 1, f = m * k, i = Math.floor( f ), fn = TWEEN.Interpolation.Utils.Linear;\n\n    if ( k < 0 ) return fn( v[ 0 ], v[ 1 ], f );\n    if ( k > 1 ) return fn( v[ m ], v[ m - 1 ], m - f );\n\n    return fn( v[ i ], v[ i + 1 > m ? m : i + 1 ], f - i );\n\n  },\n\n  Bezier: function ( v, k ) {\n\n    var b = 0, n = v.length - 1, pw = Math.pow, bn = TWEEN.Interpolation.Utils.Bernstein, i;\n\n    for ( i = 0; i <= n; i++ ) {\n      b += pw( 1 - k, n - i ) * pw( k, i ) * v[ i ] * bn( n, i );\n    }\n\n    return b;\n\n  },\n\n  CatmullRom: function ( v, k ) {\n\n    var m = v.length - 1, f = m * k, i = Math.floor( f ), fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n    if ( v[ 0 ] === v[ m ] ) {\n\n      if ( k < 0 ) i = Math.floor( f = m * ( 1 + k ) );\n\n      return fn( v[ ( i - 1 + m ) % m ], v[ i ], v[ ( i + 1 ) % m ], v[ ( i + 2 ) % m ], f - i );\n\n    } else {\n\n      if ( k < 0 ) return v[ 0 ] - ( fn( v[ 0 ], v[ 0 ], v[ 1 ], v[ 1 ], -f ) - v[ 0 ] );\n      if ( k > 1 ) return v[ m ] - ( fn( v[ m ], v[ m ], v[ m - 1 ], v[ m - 1 ], f - m ) - v[ m ] );\n\n      return fn( v[ i ? i - 1 : 0 ], v[ i ], v[ m < i + 1 ? m : i + 1 ], v[ m < i + 2 ? m : i + 2 ], f - i );\n\n    }\n\n  },\n\n  Utils: {\n\n    Linear: function ( p0, p1, t ) {\n\n      return ( p1 - p0 ) * t + p0;\n\n    },\n\n    Bernstein: function ( n , i ) {\n\n      var fc = TWEEN.Interpolation.Utils.Factorial;\n      return fc( n ) / fc( i ) / fc( n - i );\n\n    },\n\n    Factorial: ( function () {\n\n      var a = [ 1 ];\n\n      return function ( n ) {\n\n        var s = 1, i;\n        if ( a[ n ] ) return a[ n ];\n        for ( i = n; i > 1; i-- ) s *= i;\n        return a[ n ] = s;\n\n      };\n\n    } )(),\n\n    CatmullRom: function ( p0, p1, p2, p3, t ) {\n\n      var v0 = ( p2 - p0 ) * 0.5, v1 = ( p3 - p1 ) * 0.5, t2 = t * t, t3 = t * t2;\n      return ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n    }\n\n  }\n\n};\n\nmodule.exports = TWEEN;","var THREE = require('three')\n\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: two-finger move\n\nTHREE.OrbitControls = function ( object, domElement ) {\n\n\tthis.object = object;\n\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new THREE.Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.25;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = false; // if true, pan in screen-space\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new THREE.Vector3();\n\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t// restrict theta to be between desired limits\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\t\t\tscope.target.add( panOffset );\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY_PAN: 4 };\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new THREE.Spherical();\n\tvar sphericalDelta = new THREE.Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new THREE.Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new THREE.Vector2();\n\tvar rotateEnd = new THREE.Vector2();\n\tvar rotateDelta = new THREE.Vector2();\n\n\tvar panStart = new THREE.Vector2();\n\tvar panEnd = new THREE.Vector2();\n\tvar panDelta = new THREE.Vector2();\n\n\tvar dollyStart = new THREE.Vector2();\n\tvar dollyEnd = new THREE.Vector2();\n\tvar dollyDelta = new THREE.Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\t//console.log( 'handleMouseDownRotate' );\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\t//console.log( 'handleMouseDownDolly' );\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\t//console.log( 'handleMouseDownPan' );\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\t//console.log( 'handleMouseMoveRotate' );\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t// rotating across whole screen goes 360 degrees around\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth );\n\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\t//console.log( 'handleMouseMoveDolly' );\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\t//console.log( 'handleMouseMovePan' );\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( event ) {\n\n\t\t// console.log( 'handleMouseUp' );\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\t// console.log( 'handleMouseWheel' );\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\t//console.log( 'handleKeyDown' );\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\t//console.log( 'handleTouchStartRotate' );\n\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\t//console.log( 'handleTouchStartDollyPan' );\n\n\t\tif ( scope.enableZoom ) {\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tif ( scope.enablePan ) {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\t//console.log( 'handleTouchMoveRotate' );\n\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t// rotating across whole screen goes 360 degrees around\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth );\n\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t//console.log( 'handleTouchMoveDollyPan' );\n\n\t\tif ( scope.enableZoom ) {\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyIn( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t}\n\n\t\tif ( scope.enablePan ) {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchEnd( event ) {\n\n\t\t//console.log( 'handleTouchEnd' );\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase scope.mouseButtons.ORBIT:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.ZOOM:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\t// two-fingered touch: dolly-pan\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // two-fingered touch: dolly-pan\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY_PAN ) return; // is this needed?\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nTHREE.OrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;\n\nObject.defineProperties( THREE.OrbitControls.prototype, {\n\n\tcenter: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .center has been renamed to .target' );\n\t\t\treturn this.target;\n\n\t\t}\n\n\t},\n\n\t// backward compatibility\n\n\tnoZoom: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\treturn ! this.enableZoom;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\tthis.enableZoom = ! value;\n\n\t\t}\n\n\t},\n\n\tnoRotate: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\treturn ! this.enableRotate;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\tthis.enableRotate = ! value;\n\n\t\t}\n\n\t},\n\n\tnoPan: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\treturn ! this.enablePan;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\tthis.enablePan = ! value;\n\n\t\t}\n\n\t},\n\n\tnoKeys: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\treturn ! this.enableKeys;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\tthis.enableKeys = ! value;\n\n\t\t}\n\n\t},\n\n\tstaticMoving: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\treturn ! this.enableDamping;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\tthis.enableDamping = ! value;\n\n\t\t}\n\n\t},\n\n\tdynamicDampingFactor: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\treturn this.dampingFactor;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\tthis.dampingFactor = value;\n\n\t\t}\n\n\t}\n\n} );\n\nmodule.exports = exports.default = THREE.OrbitControls\n","/**\r\n * @author lucascassiano / http://lucascassiano.github.io\r\n * @edited as an ES6 module based on script from mrdoob / http://mrdoob.com/\r\n */\r\n\r\nimport * as THREE from 'three';\r\n\r\nclass OBJLoader {\r\n\tconstructor (manager) {\r\n\t\tthis.manager = (manager !== undefined) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\t\tthis.materials = null;\r\n\r\n\t\tthis.regexp = {\r\n\t\t\t// v float float float\r\n\t\t\tvertexPattern: /^v\\s+([\\d|.|+|\\-|e|E]+)\\s+([\\d|.|+|\\-|e|E]+)\\s+([\\d|.|+|\\-|e|E]+)/,\r\n\t\t\t// vn float float float\r\n\t\t\tnormalPattern: /^vn\\s+([\\d|.|+|\\-|e|E]+)\\s+([\\d|.|+|\\-|e|E]+)\\s+([\\d|.|+|\\-|e|E]+)/,\r\n\t\t\t// vt float float\r\n\t\t\tuvPattern: /^vt\\s+([\\d|.|+|\\-|e|E]+)\\s+([\\d|.|+|\\-|e|E]+)/,\r\n\t\t\t// f vertex vertex vertex\r\n\t\t\tfaceVertex: /^f\\s+(-?\\d+)\\s+(-?\\d+)\\s+(-?\\d+)(?:\\s+(-?\\d+))?/,\r\n\t\t\t// f vertex/uv vertex/uv vertex/uv\r\n\t\t\tfaceVertexUv: /^f\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+))?/,\r\n\t\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal\r\n\t\t\tfaceVertexUvNormal: /^f\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+))?/,\r\n\t\t\t// f vertex//normal vertex//normal vertex//normal\r\n\t\t\tfaceVertexNormal: /^f\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)(?:\\s+(-?\\d+)\\/\\/(-?\\d+))?/,\r\n\t\t\t// o object_name | g group_name\r\n\t\t\tobjectPattern: /^[og]\\s*(.+)?/,\r\n\t\t\t// s boolean\r\n\t\t\tsmoothingPattern: /^s\\s+(\\d+|on|off)/,\r\n\t\t\t// mtllib file_reference\r\n\t\t\tmaterialLibraryPattern: /^mtllib /,\r\n\t\t\t// usemtl material_name\r\n\t\t\tmaterialUsePattern: /^usemtl /\r\n\t\t};\r\n\t}\r\n\r\n\tload (url, onLoad, onProgress, onError) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.FileLoader(scope.manager);\r\n\r\n\t\tloader.setPath(this.path);\r\n\t\tloader.load(url, (text) => {\r\n\r\n\t\t\tonLoad(scope.parse(text));\r\n\r\n\t\t}, onProgress, onError);\r\n\r\n\t}\r\n\r\n\tsetPath (value) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n\tsetMaterials (materials) {\r\n\r\n\t\tthis.materials = materials;\r\n\r\n\t}\r\n\r\n\tcreateParserState () {\r\n\r\n\t\tvar state = {\r\n\t\t\tobjects: [],\r\n\t\t\tobject: {},\r\n\r\n\t\t\tvertices: [],\r\n\t\t\tnormals: [],\r\n\t\t\tuvs: [],\r\n\r\n\t\t\tmaterialLibraries: [],\r\n\r\n\t\t\tstartObject: function (name, fromDeclaration) {\r\n\r\n\t\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\r\n\t\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\r\n\t\t\t\tif (this.object && this.object.fromDeclaration === false) {\r\n\r\n\t\t\t\t\tthis.object.name = name;\r\n\t\t\t\t\tthis.object.fromDeclaration = (fromDeclaration !== false);\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar previousMaterial = (this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined);\r\n\r\n\t\t\t\tif (this.object && typeof this.object.finalize === 'function') {\r\n\r\n\t\t\t\t\tthis.object.finalize(true);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.object = {\r\n\t\t\t\t\tname: name || '',\r\n\t\t\t\t\tfromDeclaration: (fromDeclaration !== false),\r\n\r\n\t\t\t\t\tgeometry: {\r\n\t\t\t\t\t\tvertices: [],\r\n\t\t\t\t\t\tnormals: [],\r\n\t\t\t\t\t\tuvs: []\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmaterials: [],\r\n\t\t\t\t\tsmooth: true,\r\n\r\n\t\t\t\t\tstartMaterial: function (name, libraries) {\r\n\r\n\t\t\t\t\t\tvar previous = this.finalize(false);\r\n\r\n\t\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\r\n\t\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\r\n\t\t\t\t\t\tif (previous && (previous.inherited || previous.groupCount <= 0)) {\r\n\r\n\t\t\t\t\t\t\tthis.materials.splice(previous.index, 1);\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar material = {\r\n\t\t\t\t\t\t\tindex: this.materials.length,\r\n\t\t\t\t\t\t\tname: name || '',\r\n\t\t\t\t\t\t\tmtllib: (Array.isArray(libraries) && libraries.length > 0 ? libraries[libraries.length - 1] : ''),\r\n\t\t\t\t\t\t\tsmooth: (previous !== undefined ? previous.smooth : this.smooth),\r\n\t\t\t\t\t\t\tgroupStart: (previous !== undefined ? previous.groupEnd : 0),\r\n\t\t\t\t\t\t\tgroupEnd: -1,\r\n\t\t\t\t\t\t\tgroupCount: -1,\r\n\t\t\t\t\t\t\tinherited: false,\r\n\r\n\t\t\t\t\t\t\tclone: function (index) {\r\n\t\t\t\t\t\t\t\tvar cloned = {\r\n\t\t\t\t\t\t\t\t\tindex: (typeof index === 'number' ? index : this.index),\r\n\t\t\t\t\t\t\t\t\tname: this.name,\r\n\t\t\t\t\t\t\t\t\tmtllib: this.mtllib,\r\n\t\t\t\t\t\t\t\t\tsmooth: this.smooth,\r\n\t\t\t\t\t\t\t\t\tgroupStart: 0,\r\n\t\t\t\t\t\t\t\t\tgroupEnd: -1,\r\n\t\t\t\t\t\t\t\t\tgroupCount: -1,\r\n\t\t\t\t\t\t\t\t\tinherited: false\r\n\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\tcloned.clone = this.clone.bind(cloned);\r\n\t\t\t\t\t\t\t\treturn cloned;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tthis.materials.push(material);\r\n\r\n\t\t\t\t\t\treturn material;\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tcurrentMaterial: function () {\r\n\r\n\t\t\t\t\t\tif (this.materials.length > 0) {\r\n\t\t\t\t\t\t\treturn this.materials[this.materials.length - 1];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn undefined;\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tfinalize: function (end) {\r\n\r\n\t\t\t\t\t\tvar lastMultiMaterial = this.currentMaterial();\r\n\r\n\t\t\t\t\t\tif (lastMultiMaterial && lastMultiMaterial.groupEnd === -1) {\r\n\r\n\t\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\r\n\t\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\r\n\t\t\t\t\t\t\tlastMultiMaterial.inherited = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Ignore objects tail materials if no face declarations followed them before a new o/g started.\r\n\t\t\t\t\t\tif (end && this.materials.length > 1) {\r\n\r\n\t\t\t\t\t\t\tfor (var mi = this.materials.length - 1; mi >= 0; mi--) {\r\n\t\t\t\t\t\t\t\tif (this.materials[mi].groupCount <= 0) {\r\n\t\t\t\t\t\t\t\t\tthis.materials.splice(mi, 1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\r\n\t\t\t\t\t\tif (end && this.materials.length === 0) {\r\n\r\n\t\t\t\t\t\t\tthis.materials.push({\r\n\t\t\t\t\t\t\t\tname: '',\r\n\t\t\t\t\t\t\t\tsmooth: this.smooth\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn lastMultiMaterial;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// Inherit previous objects material.\r\n\t\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\r\n\t\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\r\n\t\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\r\n\t\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\r\n\r\n\t\t\t\tif (previousMaterial && previousMaterial.name && typeof previousMaterial.clone === 'function') {\r\n\r\n\t\t\t\t\tvar declared = previousMaterial.clone(0);\r\n\r\n\t\t\t\t\tdeclared.inherited = true;\r\n\t\t\t\t\tthis.object.materials.push(declared);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.objects.push(this.object);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfinalize: function () {\r\n\r\n\t\t\t\tif (this.object && typeof this.object.finalize === 'function') {\r\n\r\n\t\t\t\t\tthis.object.finalize(true);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tparseVertexIndex: function (value, len) {\r\n\r\n\t\t\t\tvar index = parseInt(value, 10);\r\n\r\n\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 3) * 3;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tparseNormalIndex: function (value, len) {\r\n\r\n\t\t\t\tvar index = parseInt(value, 10);\r\n\r\n\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 3) * 3;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tparseUVIndex: function (value, len) {\r\n\r\n\t\t\t\tvar index = parseInt(value, 10);\r\n\r\n\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 2) * 2;\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddVertex: function (a, b, c) {\r\n\r\n\t\t\t\tvar src = this.vertices;\r\n\t\t\t\tvar dst = this.object.geometry.vertices;\r\n\r\n\t\t\t\tdst.push(src[a + 0]);\r\n\t\t\t\tdst.push(src[a + 1]);\r\n\t\t\t\tdst.push(src[a + 2]);\r\n\t\t\t\tdst.push(src[b + 0]);\r\n\t\t\t\tdst.push(src[b + 1]);\r\n\t\t\t\tdst.push(src[b + 2]);\r\n\t\t\t\tdst.push(src[c + 0]);\r\n\t\t\t\tdst.push(src[c + 1]);\r\n\t\t\t\tdst.push(src[c + 2]);\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddVertexLine: function (a) {\r\n\r\n\t\t\t\tvar src = this.vertices;\r\n\t\t\t\tvar dst = this.object.geometry.vertices;\r\n\r\n\t\t\t\tdst.push(src[a + 0]);\r\n\t\t\t\tdst.push(src[a + 1]);\r\n\t\t\t\tdst.push(src[a + 2]);\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddNormal: function (a, b, c) {\r\n\r\n\t\t\t\tvar src = this.normals;\r\n\t\t\t\tvar dst = this.object.geometry.normals;\r\n\r\n\t\t\t\tdst.push(src[a + 0]);\r\n\t\t\t\tdst.push(src[a + 1]);\r\n\t\t\t\tdst.push(src[a + 2]);\r\n\t\t\t\tdst.push(src[b + 0]);\r\n\t\t\t\tdst.push(src[b + 1]);\r\n\t\t\t\tdst.push(src[b + 2]);\r\n\t\t\t\tdst.push(src[c + 0]);\r\n\t\t\t\tdst.push(src[c + 1]);\r\n\t\t\t\tdst.push(src[c + 2]);\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddUV: function (a, b, c) {\r\n\r\n\t\t\t\tvar src = this.uvs;\r\n\t\t\t\tvar dst = this.object.geometry.uvs;\r\n\r\n\t\t\t\tdst.push(src[a + 0]);\r\n\t\t\t\tdst.push(src[a + 1]);\r\n\t\t\t\tdst.push(src[b + 0]);\r\n\t\t\t\tdst.push(src[b + 1]);\r\n\t\t\t\tdst.push(src[c + 0]);\r\n\t\t\t\tdst.push(src[c + 1]);\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddUVLine: function (a) {\r\n\r\n\t\t\t\tvar src = this.uvs;\r\n\t\t\t\tvar dst = this.object.geometry.uvs;\r\n\r\n\t\t\t\tdst.push(src[a + 0]);\r\n\t\t\t\tdst.push(src[a + 1]);\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddFace: function (a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd) {\r\n\r\n\t\t\t\tvar vLen = this.vertices.length;\r\n\r\n\t\t\t\tvar ia = this.parseVertexIndex(a, vLen);\r\n\t\t\t\tvar ib = this.parseVertexIndex(b, vLen);\r\n\t\t\t\tvar ic = this.parseVertexIndex(c, vLen);\r\n\t\t\t\tvar id;\r\n\r\n\t\t\t\tif (d === undefined) {\r\n\r\n\t\t\t\t\tthis.addVertex(ia, ib, ic);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tid = this.parseVertexIndex(d, vLen);\r\n\r\n\t\t\t\t\tthis.addVertex(ia, ib, id);\r\n\t\t\t\t\tthis.addVertex(ib, ic, id);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (ua !== undefined) {\r\n\r\n\t\t\t\t\tvar uvLen = this.uvs.length;\r\n\r\n\t\t\t\t\tia = this.parseUVIndex(ua, uvLen);\r\n\t\t\t\t\tib = this.parseUVIndex(ub, uvLen);\r\n\t\t\t\t\tic = this.parseUVIndex(uc, uvLen);\r\n\r\n\t\t\t\t\tif (d === undefined) {\r\n\r\n\t\t\t\t\t\tthis.addUV(ia, ib, ic);\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tid = this.parseUVIndex(ud, uvLen);\r\n\r\n\t\t\t\t\t\tthis.addUV(ia, ib, id);\r\n\t\t\t\t\t\tthis.addUV(ib, ic, id);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (na !== undefined) {\r\n\r\n\t\t\t\t\t// Normals are many times the same. If so, skip function call and parseInt.\r\n\t\t\t\t\tvar nLen = this.normals.length;\r\n\r\n\t\t\t\t\tia = this.parseNormalIndex(na, nLen);\r\n\r\n\t\t\t\t\tib = na === nb ? ia : this.parseNormalIndex(nb, nLen);\r\n\t\t\t\t\tic = na === nc ? ia : this.parseNormalIndex(nc, nLen);\r\n\r\n\t\t\t\t\tif (d === undefined) {\r\n\r\n\t\t\t\t\t\tthis.addNormal(ia, ib, ic);\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tid = this.parseNormalIndex(nd, nLen);\r\n\r\n\t\t\t\t\t\tthis.addNormal(ia, ib, id);\r\n\t\t\t\t\t\tthis.addNormal(ib, ic, id);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddLineGeometry: function (vertices, uvs) {\r\n\r\n\t\t\t\tthis.object.geometry.type = 'Line';\r\n\r\n\t\t\t\tvar vLen = this.vertices.length;\r\n\t\t\t\tvar uvLen = this.uvs.length;\r\n\r\n\t\t\t\tfor (var vi = 0, l = vertices.length; vi < l; vi++) {\r\n\r\n\t\t\t\t\tthis.addVertexLine(this.parseVertexIndex(vertices[vi], vLen));\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tl = uvs.length;\r\n\r\n\t\t\t\tfor (var uvi = 0; uvi < l; uvi++) {\r\n\r\n\t\t\t\t\tthis.addUVLine(this.parseUVIndex(uvs[uvi], uvLen));\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tstate.startObject('', false);\r\n\r\n\t\treturn state;\r\n\r\n\t}\r\n\r\n\tparse (text) {\r\n\r\n\t\tconsole.time('OBJLoader');\r\n\r\n\t\tvar state = this.createParserState();\r\n\r\n\t\tif (text.indexOf('\\r\\n') !== - 1) {\r\n\r\n\t\t\t// This is faster than String.split with regex that splits on both\r\n\t\t\ttext = text.replace(/\\r\\n/g, '\\n');\r\n\r\n\t\t}\r\n\r\n\t\tif (text.indexOf('\\\\\\n') !== - 1) {\r\n\r\n\t\t\t// join lines separated by a line continuation character (\\)\r\n\t\t\ttext = text.replace(/\\\\\\n/g, '');\r\n\r\n\t\t}\r\n\r\n\t\tvar lines = text.split('\\n');\r\n\t\tvar line = '', lineFirstChar = '', lineSecondChar = '';\r\n\t\tvar lineLength = 0;\r\n\t\tvar result = [];\r\n\r\n\t\t// Faster to just trim left side of the line. Use if available.\r\n\t\tvar trimLeft = (typeof ''.trimLeft === 'function');\r\n\r\n\t\tfor (var i = 0, l = lines.length; i < l; i++) {\r\n\r\n\t\t\tline = lines[i];\r\n\r\n\t\t\tline = trimLeft ? line.trimLeft() : line.trim();\r\n\r\n\t\t\tlineLength = line.length;\r\n\r\n\t\t\tif (lineLength === 0) continue;\r\n\r\n\t\t\tlineFirstChar = line.charAt(0);\r\n\r\n\t\t\t// @todo invoke passed in handler if any\r\n\t\t\tif (lineFirstChar === '#') continue;\r\n\r\n\t\t\tif (lineFirstChar === 'v') {\r\n\r\n\t\t\t\tlineSecondChar = line.charAt(1);\r\n\r\n\t\t\t\tif (lineSecondChar === ' ' && (result = this.regexp.vertexPattern.exec(line)) !== null) {\r\n\r\n\t\t\t\t\t// 0                  1      2      3\r\n\t\t\t\t\t// [\"v 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\r\n\r\n\t\t\t\t\tstate.vertices.push(\r\n\t\t\t\t\t\tparseFloat(result[1]),\r\n\t\t\t\t\t\tparseFloat(result[2]),\r\n\t\t\t\t\t\tparseFloat(result[3])\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if (lineSecondChar === 'n' && (result = this.regexp.normalPattern.exec(line)) !== null) {\r\n\r\n\t\t\t\t\t// 0                   1      2      3\r\n\t\t\t\t\t// [\"vn 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\r\n\r\n\t\t\t\t\tstate.normals.push(\r\n\t\t\t\t\t\tparseFloat(result[1]),\r\n\t\t\t\t\t\tparseFloat(result[2]),\r\n\t\t\t\t\t\tparseFloat(result[3])\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if (lineSecondChar === 't' && (result = this.regexp.uvPattern.exec(line)) !== null) {\r\n\r\n\t\t\t\t\t// 0               1      2\r\n\t\t\t\t\t// [\"vt 0.1 0.2\", \"0.1\", \"0.2\"]\r\n\r\n\t\t\t\t\tstate.uvs.push(\r\n\t\t\t\t\t\tparseFloat(result[1]),\r\n\t\t\t\t\t\tparseFloat(result[2])\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error('Unexpected vertex/normal/uv line: \\'' + line + '\\'');\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if (lineFirstChar === 'f') {\r\n\r\n\t\t\t\tif ((result = this.regexp.faceVertexUvNormal.exec(line)) !== null) {\r\n\r\n\t\t\t\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal\r\n\t\t\t\t\t// 0                        1    2    3    4    5    6    7    8    9   10         11         12\r\n\t\t\t\t\t// [\"f 1/1/1 2/2/2 3/3/3\", \"1\", \"1\", \"1\", \"2\", \"2\", \"2\", \"3\", \"3\", \"3\", undefined, undefined, undefined]\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tresult[1], result[4], result[7], result[10],\r\n\t\t\t\t\t\tresult[2], result[5], result[8], result[11],\r\n\t\t\t\t\t\tresult[3], result[6], result[9], result[12]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if ((result = this.regexp.faceVertexUv.exec(line)) !== null) {\r\n\r\n\t\t\t\t\t// f vertex/uv vertex/uv vertex/uv\r\n\t\t\t\t\t// 0                  1    2    3    4    5    6   7          8\r\n\t\t\t\t\t// [\"f 1/1 2/2 3/3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tresult[1], result[3], result[5], result[7],\r\n\t\t\t\t\t\tresult[2], result[4], result[6], result[8]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if ((result = this.regexp.faceVertexNormal.exec(line)) !== null) {\r\n\r\n\t\t\t\t\t// f vertex//normal vertex//normal vertex//normal\r\n\t\t\t\t\t// 0                     1    2    3    4    5    6   7          8\r\n\t\t\t\t\t// [\"f 1//1 2//2 3//3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tresult[1], result[3], result[5], result[7],\r\n\t\t\t\t\t\tundefined, undefined, undefined, undefined,\r\n\t\t\t\t\t\tresult[2], result[4], result[6], result[8]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if ((result = this.regexp.faceVertex.exec(line)) !== null) {\r\n\r\n\t\t\t\t\t// f vertex vertex vertex\r\n\t\t\t\t\t// 0            1    2    3   4\r\n\t\t\t\t\t// [\"f 1 2 3\", \"1\", \"2\", \"3\", undefined]\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tresult[1], result[2], result[3], result[4]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error('Unexpected face line: \\'' + line + '\\'');\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if (lineFirstChar === 'l') {\r\n\r\n\t\t\t\tvar lineParts = line.substring(1).trim().split(' ');\r\n\t\t\t\tvar lineVertices = [], lineUVs = [];\r\n\r\n\t\t\t\tif (line.indexOf('/') === - 1) {\r\n\r\n\t\t\t\t\tlineVertices = lineParts;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor (var li = 0, llen = lineParts.length; li < llen; li++) {\r\n\r\n\t\t\t\t\t\tvar parts = lineParts[li].split('/');\r\n\r\n\t\t\t\t\t\tif (parts[0] !== '') lineVertices.push(parts[0]);\r\n\t\t\t\t\t\tif (parts[1] !== '') lineUVs.push(parts[1]);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tstate.addLineGeometry(lineVertices, lineUVs);\r\n\r\n\t\t\t} else if ((result = this.regexp.objectPattern.exec(line)) !== null) {\r\n\r\n\t\t\t\t// o object_name\r\n\t\t\t\t// or\r\n\t\t\t\t// g group_name\r\n\r\n\t\t\t\t// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\r\n\t\t\t\t// var name = result[ 0 ].substr( 1 ).trim();\r\n\t\t\t\tvar name = (' ' + result[0].substr(1).trim()).substr(1);\r\n\r\n\t\t\t\tstate.startObject(name);\r\n\r\n\t\t\t} else if (this.regexp.materialUsePattern.test(line)) {\r\n\r\n\t\t\t\t// material\r\n\r\n\t\t\t\tstate.object.startMaterial(line.substring(7).trim(), state.materialLibraries);\r\n\r\n\t\t\t} else if (this.regexp.materialLibraryPattern.test(line)) {\r\n\r\n\t\t\t\t// mtl file\r\n\r\n\t\t\t\tstate.materialLibraries.push(line.substring(7).trim());\r\n\r\n\t\t\t} else if ((result = this.regexp.smoothingPattern.exec(line)) !== null) {\r\n\r\n\t\t\t\t// smooth shading\r\n\r\n\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\r\n\t\t\t\t// but does not define a usemtl for each face set.\r\n\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\r\n\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\r\n\t\t\t\t// where explicit usemtl defines geometry groups.\r\n\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\r\n\r\n\t\t\t\tvar value = result[1].trim().toLowerCase();\r\n\r\n\t\t\t\tstate.object.smooth = (value === '1' || value === 'on');\r\n\r\n\t\t\t\tvar material = state.object.currentMaterial();\r\n\r\n\t\t\t\tif (material) {\r\n\r\n\t\t\t\t\tmaterial.smooth = state.object.smooth;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Handle null terminated files without exception\r\n\t\t\t\tif (line === '\\0') continue;\r\n\r\n\t\t\t\tthrow new Error('Unexpected line: \\'' + line + '\\'');\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.finalize();\r\n\r\n\t\tvar container = new THREE.Group();\r\n\r\n\t\tcontainer.materialLibraries = [].concat(state.materialLibraries);\r\n\r\n\t\tfor (i = 0, l = state.objects.length; i < l; i++) {\r\n\r\n\t\t\tvar object = state.objects[i];\r\n\t\t\tvar geometry = object.geometry;\r\n\t\t\tvar materials = object.materials;\r\n\t\t\tvar isLine = (geometry.type === 'Line');\r\n\r\n\t\t\t// Skip o/g line declarations that did not follow with any faces\r\n\t\t\tif (geometry.vertices.length === 0) continue;\r\n\r\n\t\t\tvar buffergeometry = new THREE.BufferGeometry();\r\n\r\n\t\t\tbuffergeometry.addAttribute('position', new THREE.BufferAttribute(new Float32Array(geometry.vertices), 3));\r\n\r\n\t\t\tif (geometry.normals.length > 0) {\r\n\r\n\t\t\t\tbuffergeometry.addAttribute('normal', new THREE.BufferAttribute(new Float32Array(geometry.normals), 3));\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbuffergeometry.computeVertexNormals();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (geometry.uvs.length > 0) {\r\n\r\n\t\t\t\tbuffergeometry.addAttribute('uv', new THREE.BufferAttribute(new Float32Array(geometry.uvs), 2));\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Create materials\r\n\r\n\t\t\tvar createdMaterials = [];\r\n\r\n\t\t\tfor (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\r\n\r\n\t\t\t\tvar sourceMaterial = materials[mi];\r\n\r\n\t\t\t\tmaterial = undefined;\r\n\r\n\t\t\t\tif (this.materials !== null) {\r\n\r\n\t\t\t\t\tmaterial = this.materials.create(sourceMaterial.name);\r\n\r\n\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\r\n\t\t\t\t\tif (isLine && material && !(material instanceof THREE.LineBasicMaterial)) {\r\n\r\n\t\t\t\t\t\tvar materialLine = new THREE.LineBasicMaterial();\r\n\r\n\t\t\t\t\t\tmaterialLine.copy(material);\r\n\t\t\t\t\t\tmaterial = materialLine;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!material) {\r\n\r\n\t\t\t\t\tmaterial = (!isLine ? new THREE.MeshPhongMaterial() : new THREE.LineBasicMaterial());\r\n\t\t\t\t\tmaterial.name = sourceMaterial.name;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmaterial.flatShading = sourceMaterial.smooth ? THREE.SmoothShading : THREE.FlatShading;\r\n\r\n\t\t\t\tcreatedMaterials.push(material);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Create mesh\r\n\r\n\t\t\tvar mesh;\r\n\r\n\t\t\tif (createdMaterials.length > 1) {\r\n\r\n\t\t\t\tfor (mi = 0, miLen = materials.length; mi < miLen; mi++) {\r\n\r\n\t\t\t\t\tsourceMaterial = materials[mi];\r\n\r\n\t\t\t\t\tbuffergeometry.addGroup(sourceMaterial.groupStart, sourceMaterial.groupCount, mi);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmesh = (!isLine ? new THREE.Mesh(buffergeometry, createdMaterials) : new THREE.LineSegments(buffergeometry, createdMaterials));\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmesh = (!isLine ? new THREE.Mesh(buffergeometry, createdMaterials[0]) : new THREE.LineSegments(buffergeometry, createdMaterials[0]));\r\n\t\t\t}\r\n\r\n\t\t\tmesh.name = object.name;\r\n\r\n\t\t\tcontainer.add(mesh);\r\n\r\n\t\t}\r\n\r\n\t\tconsole.timeEnd('OBJLoader');\r\n\r\n\t\treturn container;\r\n\r\n\t}\r\n\r\n}\r\nexport default OBJLoader;","/**\r\n * Loads a Wavefront .mtl file specifying materials\r\n *\r\n * @author angelxuanchang\r\n * edited by lucascassiano as an ES6 module - http://lucascassiano.github.io\r\n */\r\nimport * as THREE from 'three';\r\n\r\nclass MTLLoader {\r\n\r\n\tconstructor (manager) {\r\n\t\tthis.manager = (manager !== undefined) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Loads and parses a MTL asset from a URL.\r\n\t *\r\n\t * @param {String} url - URL to the MTL file.\r\n\t * @param {Function} [onLoad] - Callback invoked with the loaded object.\r\n\t * @param {Function} [onProgress] - Callback for download progress.\r\n\t * @param {Function} [onError] - Callback for download errors.\r\n\t *\r\n\t * @see setPath setTexturePath\r\n\t *\r\n\t * @note In order for relative texture references to resolve correctly\r\n\t * you must call setPath and/or setTexturePath explicitly prior to load.\r\n\t */\r\n\tload (url, onLoad, onProgress, onError) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.FileLoader(this.manager);\r\n\r\n\t\tloader.setPath(this.path);\r\n\t\tloader.load(url, (text) => {\r\n\r\n\t\t\tonLoad(scope.parse(text));\r\n\r\n\t\t}, onProgress, onError);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Set base path for resolving references.\r\n\t * If set this path will be prepended to each loaded and found reference.\r\n\t *\r\n\t * @see setTexturePath\r\n\t * @param {String} path\r\n\t *\r\n\t * @example\r\n\t *     mtlLoader.setPath( 'assets/obj/' );\r\n\t *     mtlLoader.load( 'my.mtl', ... );\r\n\t */\r\n\tsetPath (path) {\r\n\t\tthis.path = path;\r\n\t}\r\n\r\n\t/**\r\n\t * Set base path for resolving texture references.\r\n\t * If set this path will be prepended found texture reference.\r\n\t * If not set and setPath is, it will be used as texture base path.\r\n\t *\r\n\t * @see setPath\r\n\t * @param {String} path\r\n\t *\r\n\t * @example\r\n\t *     mtlLoader.setPath( 'assets/obj/' );\r\n\t *     mtlLoader.setTexturePath( 'assets/textures/' );\r\n\t *     mtlLoader.load( 'my.mtl', ... );\r\n\t */\r\n\tsetTexturePath (path) {\r\n\r\n\t\tthis.texturePath = path;\r\n\r\n\t}\r\n\r\n\tsetBaseUrl (path) {\r\n\r\n\t\tconsole.warn('THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead.');\r\n\r\n\t\tthis.setTexturePath(path);\r\n\r\n\t}\r\n\r\n\tsetCrossOrigin (value) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n\tsetMaterialOptions (value) {\r\n\r\n\t\tthis.materialOptions = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Parses a MTL file.\r\n\t *\r\n\t * @param {String} text - Content of MTL file\r\n\t * @return {THREE.MTLLoader.MaterialCreator}\r\n\t *\r\n\t * @see setPath setTexturePath\r\n\t *\r\n\t * @note In order for relative texture references to resolve correctly\r\n\t * you must call setPath and/or setTexturePath explicitly prior to parse.\r\n\t */\r\n\tparse (text) {\r\n\r\n\t\tvar lines = text.split('\\n');\r\n\t\tvar info = {};\r\n\t\tvar delimiterPattern = /\\s+/;\r\n\t\tvar materialsInfo = {};\r\n\r\n\t\tfor (var i = 0; i < lines.length; i++) {\r\n\r\n\t\t\tvar line = lines[i];\r\n\r\n\t\t\tline = line.trim();\r\n\r\n\t\t\tif (line.length === 0 || line.charAt(0) === '#') {\r\n\r\n\t\t\t\t// Blank line or comment ignore\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar pos = line.indexOf(' ');\r\n\r\n\t\t\tvar key = (pos >= 0) ? line.substring(0, pos) : line;\r\n\r\n\t\t\tkey = key.toLowerCase();\r\n\r\n\t\t\tvar value = (pos >= 0) ? line.substring(pos + 1) : '';\r\n\r\n\t\t\tvalue = value.trim();\r\n\r\n\t\t\tif (key === 'newmtl') {\r\n\r\n\t\t\t\t// New material\r\n\r\n\t\t\t\tinfo = { name: value };\r\n\t\t\t\tmaterialsInfo[value] = info;\r\n\r\n\t\t\t} else if (info) {\r\n\r\n\t\t\t\tif (key === 'ka' || key === 'kd' || key === 'ks') {\r\n\r\n\t\t\t\t\tvar ss = value.split(delimiterPattern, 3);\r\n\r\n\t\t\t\t\tinfo[key] = [parseFloat(ss[0]), parseFloat(ss[1]), parseFloat(ss[2])];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tinfo[key] = value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar materialCreator = new MaterialCreator(this.texturePath || this.path, this.materialOptions);\r\n\r\n\t\tmaterialCreator.setCrossOrigin(this.crossOrigin);\r\n\t\tmaterialCreator.setManager(this.manager);\r\n\t\tmaterialCreator.setMaterials(materialsInfo);\r\n\t\treturn materialCreator;\r\n\r\n\t}\r\n}\r\n\r\nclass MaterialCreator {\r\n\tconstructor (baseUrl, options) {\r\n\r\n\t\tthis.baseUrl = baseUrl || '';\r\n\t\tthis.options = options;\r\n\t\tthis.materialsInfo = {};\r\n\t\tthis.materials = {};\r\n\t\tthis.materialsArray = [];\r\n\t\tthis.nameLookup = {};\r\n\r\n\t\tthis.side = (this.options && this.options.side) ? this.options.side : THREE.FrontSide;\r\n\t\tthis.wrap = (this.options && this.options.wrap) ? this.options.wrap : THREE.RepeatWrapping;\r\n\r\n\t}\r\n\r\n\tcrossOrigin = 'Anonymous';\r\n\r\n\tsetCrossOrigin (value) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n\tsetManager (value) {\r\n\r\n\t\tthis.manager = value;\r\n\r\n\t}\r\n\r\n\tsetMaterials (materialsInfo) {\r\n\r\n\t\tthis.materialsInfo = this.convert(materialsInfo);\r\n\t\tthis.materials = {};\r\n\t\tthis.materialsArray = [];\r\n\t\tthis.nameLookup = {};\r\n\r\n\t}\r\n\r\n\tconvert (materialsInfo) {\r\n\r\n\t\tif (!this.options) return materialsInfo;\r\n\r\n\t\tvar converted = {};\r\n\r\n\t\tfor (var mn in materialsInfo) {\r\n\r\n\t\t\t// Convert materials info into normalized form based on options\r\n\r\n\t\t\tvar mat = materialsInfo[mn];\r\n\r\n\t\t\tvar covmat = {};\r\n\r\n\t\t\tconverted[mn] = covmat;\r\n\r\n\t\t\tfor (var prop in mat) {\r\n\r\n\t\t\t\tvar save = true;\r\n\t\t\t\tvar value = mat[prop];\r\n\t\t\t\tvar lprop = prop.toLowerCase();\r\n\r\n\t\t\t\tswitch (lprop) {\r\n\r\n\t\t\t\t\tcase 'kd':\r\n\t\t\t\t\tcase 'ka':\r\n\t\t\t\t\tcase 'ks':\r\n\r\n\t\t\t\t\t\t// Diffuse color (color under white light) using RGB values\r\n\r\n\t\t\t\t\t\tif (this.options && this.options.normalizeRGB) {\r\n\r\n\t\t\t\t\t\t\tvalue = [value[0] / 255, value[1] / 255, value[2] / 255];\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (this.options && this.options.ignoreZeroRGBs) {\r\n\r\n\t\t\t\t\t\t\tif (value[0] === 0 && value[1] === 0 && value[2] === 0) {\r\n\r\n\t\t\t\t\t\t\t\t// ignore\r\n\r\n\t\t\t\t\t\t\t\tsave = false;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (save) {\r\n\r\n\t\t\t\t\tcovmat[lprop] = value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn converted;\r\n\r\n\t}\r\n\r\n\tpreload () {\r\n\r\n\t\tfor (var mn in this.materialsInfo) {\r\n\r\n\t\t\tthis.create(mn);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgetIndex (materialName) {\r\n\r\n\t\treturn this.nameLookup[materialName];\r\n\r\n\t}\r\n\r\n\tgetAsArray () {\r\n\r\n\t\tvar index = 0;\r\n\r\n\t\tfor (var mn in this.materialsInfo) {\r\n\r\n\t\t\tthis.materialsArray[index] = this.create(mn);\r\n\t\t\tthis.nameLookup[mn] = index;\r\n\t\t\tindex++;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.materialsArray;\r\n\r\n\t}\r\n\r\n\tcreate (materialName) {\r\n\r\n\t\tif (this.materials[materialName] === undefined) {\r\n\r\n\t\t\tthis.createMaterial(materialName);\r\n\r\n\t\t}\r\n\r\n\t\treturn this.materials[materialName];\r\n\r\n\t}\r\n\r\n\tcreateMaterial (materialName) {\r\n\r\n\t\t// Create material\r\n\r\n\t\tvar scope = this;\r\n\t\tvar mat = this.materialsInfo[materialName];\r\n\t\tvar params = {\r\n\r\n\t\t\tname: materialName,\r\n\t\t\tside: this.side\r\n\r\n\t\t};\r\n\r\n\t\tfunction resolveURL (baseUrl, url) {\r\n\r\n\t\t\tif (typeof url !== 'string' || url === '')\r\n\t\t\t\treturn '';\r\n\r\n\t\t\t// Absolute URL\r\n\t\t\tif (/^https?:\\/\\//i.test(url)) return url;\r\n\r\n\t\t\treturn baseUrl + url;\r\n\r\n\t\t}\r\n\r\n\t\tfunction setMapForType (mapType, value) {\r\n\r\n\t\t\tif (params[mapType]) return; // Keep the first encountered texture\r\n\r\n\t\t\tvar texParams = scope.getTextureParams(value, params);\r\n\t\t\tvar map = scope.loadTexture(resolveURL(scope.baseUrl, texParams.url));\r\n\r\n\t\t\tmap.repeat.copy(texParams.scale);\r\n\t\t\tmap.offset.copy(texParams.offset);\r\n\r\n\t\t\tmap.wrapS = scope.wrap;\r\n\t\t\tmap.wrapT = scope.wrap;\r\n\r\n\t\t\tparams[mapType] = map;\r\n\r\n\t\t}\r\n\r\n\t\tfor (var prop in mat) {\r\n\r\n\t\t\tvar value = mat[prop];\r\n\t\t\tvar n;\r\n\r\n\t\t\tif (value === '') continue;\r\n\r\n\t\t\tswitch (prop.toLowerCase()) {\r\n\r\n\t\t\t\t// Ns is material specular exponent\r\n\r\n\t\t\t\tcase 'kd':\r\n\r\n\t\t\t\t\t// Diffuse color (color under white light) using RGB values\r\n\r\n\t\t\t\t\tparams.color = new THREE.Color().fromArray(value);\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ks':\r\n\r\n\t\t\t\t\t// Specular color (color when light is reflected from shiny surface) using RGB values\r\n\t\t\t\t\tparams.specular = new THREE.Color().fromArray(value);\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'map_kd':\r\n\r\n\t\t\t\t\t// Diffuse texture map\r\n\r\n\t\t\t\t\tsetMapForType('map', value);\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'map_ks':\r\n\r\n\t\t\t\t\t// Specular map\r\n\r\n\t\t\t\t\tsetMapForType('specularMap', value);\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'norm':\r\n\r\n\t\t\t\t\tsetMapForType('normalMap', value);\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'map_bump':\r\n\t\t\t\tcase 'bump':\r\n\r\n\t\t\t\t\t// Bump texture map\r\n\r\n\t\t\t\t\tsetMapForType('bumpMap', value);\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ns':\r\n\r\n\t\t\t\t\t// The specular exponent (defines the focus of the specular highlight)\r\n\t\t\t\t\t// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.\r\n\r\n\t\t\t\t\tparams.shininess = parseFloat(value);\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'd':\r\n\t\t\t\t\tn = parseFloat(value);\r\n\r\n\t\t\t\t\tif (n < 1) {\r\n\r\n\t\t\t\t\t\tparams.opacity = n;\r\n\t\t\t\t\t\tparams.transparent = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'tr':\r\n\t\t\t\t\tn = parseFloat(value);\r\n\r\n\t\t\t\t\tif (n > 0) {\r\n\r\n\t\t\t\t\t\tparams.opacity = 1 - n;\r\n\t\t\t\t\t\tparams.transparent = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.materials[materialName] = new THREE.MeshPhongMaterial(params);\r\n\t\treturn this.materials[materialName];\r\n\r\n\t}\r\n\r\n\tgetTextureParams (value, matParams) {\r\n\r\n\t\tvar texParams = {\r\n\r\n\t\t\tscale: new THREE.Vector2(1, 1),\r\n\t\t\toffset: new THREE.Vector2(0, 0)\r\n\r\n\t\t};\r\n\r\n\t\tvar items = value.split(/\\s+/);\r\n\t\tvar pos;\r\n\r\n\t\tpos = items.indexOf('-bm');\r\n\r\n\t\tif (pos >= 0) {\r\n\r\n\t\t\tmatParams.bumpScale = parseFloat(items[pos + 1]);\r\n\t\t\titems.splice(pos, 2);\r\n\r\n\t\t}\r\n\r\n\t\tpos = items.indexOf('-s');\r\n\r\n\t\tif (pos >= 0) {\r\n\r\n\t\t\ttexParams.scale.set(parseFloat(items[pos + 1]), parseFloat(items[pos + 2]));\r\n\t\t\titems.splice(pos, 4); // we expect 3 parameters here!\r\n\r\n\t\t}\r\n\r\n\t\tpos = items.indexOf('-o');\r\n\r\n\t\tif (pos >= 0) {\r\n\r\n\t\t\ttexParams.offset.set(parseFloat(items[pos + 1]), parseFloat(items[pos + 2]));\r\n\t\t\titems.splice(pos, 4); // we expect 3 parameters here!\r\n\r\n\t\t}\r\n\r\n\t\ttexParams.url = items.join(' ').trim();\r\n\t\treturn texParams;\r\n\r\n\t}\r\n\r\n\tloadTexture (url, mapping, onLoad, onProgress, onError) {\r\n\r\n\t\tvar texture;\r\n\t\tvar loader = THREE.Loader.Handlers.get(url);\r\n\t\tvar manager = (this.manager !== undefined) ? this.manager : THREE.DefaultLoadingManager;\r\n\r\n\t\tif (loader === null) {\r\n\r\n\t\t\tloader = new THREE.TextureLoader(manager);\r\n\r\n\t\t}\r\n\r\n\t\tif (loader.setCrossOrigin) loader.setCrossOrigin(this.crossOrigin);\r\n\t\ttexture = loader.load(url, onLoad, onProgress, onError);\r\n\r\n\t\tif (mapping !== undefined) texture.mapping = mapping;\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport default MTLLoader;","/*\r\n * @Author: zy9@github.com/zy410419243\r\n * @Date: 2018-04-24 15:33:50\r\n * @Last Modified by: zy9\r\n * @Last Modified time: 2018-07-22 21:34:09\r\n */\r\nimport * as THREE from 'three';\r\nimport MTLLoader from '../loader/MTLLoader';\r\nimport OBJLoader from '../loader/OBJLoader';\r\nimport OrbitControls from 'three-orbitcontrols';\r\nimport TWEEN from 'tween';\r\nimport extend from '../util/DeepClone';\r\n\r\nexport default class Trunk {\r\n    // 默认配置\r\n    config = {\r\n    \t// clear_color: 0x4584b4, // 画布颜色\r\n    \tclearOpacity: 0.2, // 画布透明度\r\n    \tmeshShiftTime: () => Math.random() * 1000 * 5 + 1000, // 板块移动时间\r\n    \tbeforeInit: null, // 初始化前的钩子\r\n    \tborderVisible: true, // 边界是否显示\r\n    \tdivisor: 100, // 控制柱子高度，该数越大，柱子越矮\r\n    \tcameraPosition: { x: 0, y: 0, z: 65 }, // 相机position中的z\r\n    \tafterRotation: -Math.PI / 4, // 开场动画后视角旋转角度\r\n    \trotationSpeed: 0.02, // 开场动画后视角旋转速度\r\n    \ttexture: {\r\n    \t\tline: '#055290', // 内部乡镇边界贴图\r\n    \t\tpillar: '#2377e8', // 柱子贴图\r\n    \t\ttop: '#07205b', // 上表面贴图\r\n    \t\tbottom: '#000', // 底部贴图\r\n    \t\tborder: '#2a8fdf', // 边缘边界贴图\r\n    \t\tselect: '#071C5B', // 鼠标移入时贴图\r\n    \t},\r\n    \tlight: () => { // x轴正方向是屏幕右边，y轴正方向是屏幕里边，z轴正方向是屏幕上边\r\n    \t\tlet lights = [];\r\n\r\n    \t\tlights.push(new HemisphereLight(16777215, 16777215, 0.3));\r\n\r\n    \t\treturn lights;\r\n    \t},\r\n    \tcontrols: {\r\n    \t\tmaxPolarAngle: Math.PI * 0.75,\r\n    \t\tminPolarAngle: Math.PI * 0.25,\r\n    \t},\r\n    \tclientWidth: document.documentElement.clientWidth || document.body.clientWidth,\r\n    \tclientHeight: document.documentElement.clientHeight || document.body.clientHeight\r\n    };\r\n\r\n    _startPositions = {};\r\n    _startTweenCount = 0;\r\n\r\n    // 柱子高度变化的定时器\r\n    intervals = {};\r\n\r\n    // 鼠标移入板块高亮\r\n    old = {};\r\n    current = {};\r\n\r\n    /*\r\n        渲染模型容器,相当于对div进行appendChild\r\n        这里具体干的是往scene里加Object3D，然后所有模型都放在Object3D对象里\r\n        原因是scene上不能直接渲染Mesh啊Group之类的对象，需要这么个载体\r\n    */\r\n    root = {};\r\n\r\n    // 标识模型是否移动过\r\n    withdrawPosition = false;\r\n\r\n    // 模型数据\r\n    dataObject = {};\r\n\r\n    // 多次用到容器节点，存到全局变量里方便调用\r\n    container = {};\r\n\r\n    // 整个模块的贴图，用作等值面\r\n    modelTexture = {};\r\n\r\n    // 初始化three渲染三要素\r\n    camera = null;\r\n    renderer = null;\r\n    scene = null;\r\n\r\n    // 轨道控制\r\n    controls = null;\r\n\r\n    // 初始化开场动画前板块位置\r\n    initAreaPosition = (area, child) => {\r\n    \tlet { _startPositions } = this;\r\n\r\n    \tlet p = _startPositions[area];\r\n\r\n    \tthis.config.before_animate && this.config.before_animate(child);\r\n\r\n    \tif(!p) {\r\n    \t\tp = {\r\n    \t\t\tx: Math.random() * 1000 - 500,\r\n    \t\t\ty: Math.random() * 1000 - 500,\r\n    \t\t\tz: Math.random() > 0.5 ? (Math.random() * 200 + 300) : (-Math.random() * 500 - 1000)\r\n    \t\t};\r\n    \t\t_startPositions[area] = p;\r\n    \t}\r\n    \tchild.position.set(p.x, p.y, p.z);\r\n    }\r\n\r\n    // 处理开场动画参数\r\n    dealObjectInLoadCirculStart = (child, visible) => {\r\n    \tif(!child.name) {\r\n    \t\treturn;\r\n    \t}\r\n    \t// 设置上下边界是否显示\r\n    \tif(/border$/.test(child.name)) {\r\n    \t\tchild.visible = visible;\r\n    \t}\r\n\r\n    \tif(child instanceof THREE.Mesh) {\r\n    \t\tlet area = child.name.split('_')[0];\r\n\r\n    \t\tthis.initAreaPosition(area, child);\r\n    \t}\r\n    }\r\n\r\n    /**\r\n     * 处理柱子渲染\r\n     * @param child 当前遍历模型对象\r\n     * @param divisor 计算柱子高度，柱子高度 = 当前模型中数据 / divisor * 15，也就是说divisor越小，柱子越高\r\n    */\r\n    changeModel4DataRefresh = (child, divisor) => {\r\n    \tlet name = child.name;\r\n\r\n    \tif(/pillar$/.test(name)) {\r\n    \t\tlet dmName = name.split('_')[0];\r\n    \t\tlet data = child.userData.val;\r\n\r\n    \t\tif(dmName) {\r\n    \t\t\tlet height = 0;\r\n    \t\t\tlet proportion = 0;\r\n\r\n    \t\t\tif(divisor && divisor !== 0) {\r\n    \t\t\t\tproportion = data / divisor;\r\n    \t\t\t\theight = proportion * 15;\r\n    \t\t\t}\r\n\r\n    \t\t\t// 不支持负数，但万一传了负数，暂按0处理\r\n    \t\t\tif(height <= 0) {\r\n    \t\t\t\tchild.visible = false;\r\n    \t\t\t} else {\r\n    \t\t\t\tthis.setHeightSlow(child, height);\r\n    \t\t\t\tchild.visible = true;\r\n    \t\t\t}\r\n    \t\t} else {\r\n    \t\t\tdmName = name ? name.split('_')[0] : '';\r\n    \t\t\t// TODO 与上面height <= 0重复，代码需精简\r\n    \t\t\tchild.visible = false;\r\n    \t\t}\r\n    \t}\r\n    };\r\n\r\n    /**\r\n     * 设置柱子高度（缓慢变高，高度从1开始变到指定高度）\r\n     * 这个方法不要加太多逻辑，这里我试着在循环里console.log，渣电脑甚至能掉帧\r\n     * @param child\r\n     * @param height\r\n     * @private\r\n     */\r\n    setHeightSlow = (child, height) => {\r\n    \tthis.setHeight(child, 1);\r\n    \tlet i = 1;\r\n    \tlet sh;\r\n    \t// 柱子高度上升速度\r\n    \tlet times = 300;\r\n\r\n    \tconst show = () => {\r\n    \t\tif(i < times) {\r\n    \t\t\tlet h = Math.floor(height * i / times);\r\n\r\n    \t\t\tthis.setHeight(child, h);\r\n    \t\t\ti++;\r\n    \t\t} else if(i === times) {\r\n    \t\t\ti++;\r\n    \t\t\tthis.setHeight(child, height);\r\n    \t\t} else {\r\n    \t\t\tclearInterval(sh);\r\n    \t\t\tdelete this.intervals[sh];\r\n    \t\t}\r\n    \t};\r\n\r\n    \tsh = setInterval(show, () => {});\r\n    \tthis.intervals[sh] = sh;\r\n    };\r\n\r\n    /**\r\n     * 设置柱子高度\r\n     * 这个方法不要加太多逻辑，这里我试着在循环里console.log，渣电脑甚至能掉帧\r\n     * @param child\r\n     * @param height\r\n     * @private\r\n     */\r\n    setHeight = (child, height) => {\r\n    \tif(height === 0 || isNaN(height)) {\r\n    \t\t// 不能高度设置为0，否则下一次设置的时候会出问题，\r\n    \t\theight = 1;\r\n    \t}\r\n    \tlet geometry = child.geometry;\r\n\r\n    \tgeometry.verticesNeedUpdate = true;\r\n\r\n    \tlet vertices = geometry.vertices;\r\n\r\n    \t/*\r\n            此处应该当有掌声，当然可能是写的人的特有感慨\r\n            这里区分了顶面和底面的点，前提是给的模型数据里的柱子高度不能为0\r\n\r\n            下面这段代码看上去简单，但领悟到顶面和底面不能在同一个面上,否则就区分不出的痛整整花了一天时间\r\n\r\n            这里先区分z，不是特别花俏的柱子一般只有六个面八个点两种z\r\n            然后底面的z不变，顶面的z加高度\r\n        */\r\n    \tlet minz = vertices[0].z;\r\n\r\n    \tfor (let vertice of vertices) {\r\n    \t\tlet z = vertice.z;\r\n\r\n    \t\tif(minz != z) {\r\n    \t\t\tminz = Math.min(z, minz);\r\n    \t\t\tbreak;\r\n    \t\t}\r\n    \t}\r\n    \tfor (let vertice of vertices) {\r\n    \t\tif(vertice.z !== minz) {\r\n    \t\t\tvertice.z = minz + height;\r\n    \t\t}\r\n    \t}\r\n    };\r\n\r\n    /**\r\n     * 事件绑定\r\n     * @private\r\n     * @param config 模型配置文件\r\n     * @param object .obj文件，所有模型数据。这里得注意跟child的区别，变量名写惯了都是object..\r\n     */\r\n    initListener = object => {\r\n    \tthis.container.addEventListener('mousemove', e => this.setMeshHighLightStatus(e), false);\r\n\r\n    \tthis.container.addEventListener('click', e => this.showDetail(e, object), false);\r\n    };\r\n\r\n    /*\r\n        改变板块的高亮状态\r\n\r\n        鼠标移上去，如果是板块，那改变该板块材质中的颜色\r\n        移开后恢复原来的材质\r\n        得注意边界线也是种模型，需要额外判断\r\n    */\r\n    setMeshHighLightStatus = event => {\r\n    \tconst { config } = this;\r\n    \tlet intersected = this.objectFromMouse(event.pageX, event.pageY);\r\n    \tlet child = intersected.object;\r\n\r\n    \tlet texture = config.texture;\r\n\r\n    \t// 设置/移除高亮\r\n    \tif(child) {\r\n    \t\tlet uuid = this.current && this.current.uuid;\r\n\r\n    \t\tif(uuid === child.uuid) {\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\tif(!child.name.includes('border') && !child.name.includes('line') && !child.name.includes('pillar') && !child.name.includes('texture') && !child.name.includes('river')) {\r\n    \t\t\tif(!uuid) { // 第一次\r\n    \t\t\t\tthis.current = child;\r\n\r\n    \t\t\t\t// 鼠标移入设置移入的颜色\r\n    \t\t\t\tchild.material.color.set(texture.select);\r\n    \t\t\t} else {\r\n    \t\t\t\t// 鼠标移开设置原先表面的颜色\r\n    \t\t\t\tthis.current.material.color.set(texture.top);\r\n\r\n    \t\t\t\tthis.old = this.current;\r\n    \t\t\t\tthis.current = child;\r\n\r\n    \t\t\t\t// 鼠标移入设置移入的颜色\r\n    \t\t\t\tchild.material.color.set(texture.select);\r\n    \t\t\t}\r\n    \t\t}\r\n\r\n    \t}\r\n    }\r\n\r\n    // 点击板块，板块左移，右边空出来的地方显示表格\r\n    showDetail = (event, object) => {\r\n    \tconst { config } = this;\r\n\r\n    \tevent.preventDefault();\r\n\r\n    \tlet intersected = this.objectFromMouse(event.pageX, event.pageY);\r\n    \tlet child = intersected.object;\r\n\r\n    \tif(child) {\r\n    \t\t// 右侧表格数据的显示\r\n    \t\tif(config.show_detail) {\r\n    \t\t\tlet flag = config.show_detail(child);\r\n\r\n    \t\t\tthis.meshMove(!!flag, object);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n    // 获得鼠标位置的板块模型对象\r\n    objectFromMouse = (pagex, pagey) => {\r\n    \tlet { container } = this;\r\n    \tconst { offsetLeft, offsetTop } = this.renderer.domElement;\r\n\r\n    \tlet eltx = pagex - offsetLeft;\r\n    \tlet elty = pagey - offsetTop;\r\n\r\n    \tlet vpx = (eltx / container.offsetWidth) * 2 - 1;\r\n    \tlet vpy = -(elty / container.offsetHeight) * 2 + 1;\r\n    \tlet vector = new THREE.Vector2(vpx, vpy);\r\n    \tlet raycaster = new THREE.Raycaster();\r\n\r\n    \traycaster.setFromCamera(vector, this.camera);\r\n\r\n    \tlet intersects = raycaster.intersectObjects(this.root.children, true);\r\n\r\n    \tif(intersects.length > 0) {\r\n    \t\tlet intersect = intersects[0];\r\n\r\n    \t\tif(intersect) {\r\n    \t\t\treturn intersect;\r\n    \t\t}\r\n    \t}\r\n\r\n    \treturn { object: null, point: null, face: null };\r\n    }\r\n\r\n    // 获得元素相对整个页面的偏移量\r\n    getOffset = (node, offset) => {\r\n    \tif(!offset) {\r\n    \t\toffset = {};\r\n    \t\toffset.top = 0;\r\n    \t\toffset.left = 0;\r\n    \t}\r\n\r\n    \tif(node == document.body) { // 当该节点为body节点时，结束递归\r\n    \t\treturn offset;\r\n    \t}\r\n\r\n    \toffset.top += node.offsetTop;\r\n    \toffset.left += node.offsetLeft;\r\n\r\n    \treturn this.getOffset(node.parentNode, offset); // 向上累加offset里的值\r\n    }\r\n\r\n    /**\r\n     * 整个模型漂移\r\n     * 如果withdraw为true，表示需要把模型移开，即从中心点向左移\r\n     *\r\n     * 如果withdraw为false，表示需要还原至中心\r\n     * @param withdraw 是否移开\r\n     * @private\r\n     */\r\n    meshMove = (withdraw, object) => {\r\n    \tlet { camera, renderer, container, getMeshWidth, _getCoordinate2InScene, config } = this;\r\n    \tlet point = { x: 0, y: 0, z: 0 };\r\n    \tlet rotation = { x: -Math.PI / 4, y: 0, z: 0 };\r\n\r\n    \tif(withdraw) {\r\n    \t\trotation = { x: -Math.PI / 4, y: Math.PI / 180 * 10, z: 0 };\r\n\r\n    \t\t// 默认配比是500 * 300的设置\r\n    \t\tlet gap = container.clientWidth / 550;\r\n    \t\t// 算移开的位置，移开的位置是固定的，只算一遍\r\n\r\n    \t\tif(!this.withdrawPosition) {\r\n    \t\t\tthis.withdrawPosition = _getCoordinate2InScene({\r\n    \t\t\t\tx: 30 * gap,\r\n    \t\t\t\ty: renderer.domElement.offsetHeight / 2\r\n    \t\t\t}, camera, renderer.domElement);\r\n\r\n    \t\t\t// 避免飞出画布\r\n    \t\t\tthis.withdrawPosition.x += getMeshWidth(object).length / 4;\r\n\r\n    \t\t\tthis.tweenInOut(camera.position, { z: 80 }, 1000);\r\n    \t\t}\r\n    \t\tpoint = this.withdrawPosition;\r\n\r\n    \t\tthis.tweenInOut(object.position, point, 1000);\r\n    \t} else {\r\n    \t\t/* 在开场动画结束后，模型需要填满整个页面，但点击板块显示详情时会出现空间不够的情况\r\n            于是这里除了改变模型水平位置，还需要改变相机位置给详情腾地方\r\n\r\n            至于为什么不改变模型的z...因为还有个轨道控制。如果改变了y，但模型仍旧是照着x轴旋转的，\r\n            这就会造成模型转出屏幕的问题*/\r\n    \t\tthis.tweenInOut(camera.position, config.cameraPosition, 1000);\r\n    \t\tthis.tweenInOut(object.position, point, 1000);\r\n\r\n    \t\tthis.withdrawPosition = null;\r\n    \t}\r\n    }\r\n\r\n    // 获得模型宽度\r\n    getMeshWidth = object => {\r\n    \tlet c = 16711680, length = 0, width = 0, height = 0;\r\n    \tlet boxHelper = new THREE.BoxHelper(object, c);\r\n    \tlet box = new THREE.Box3().setFromObject(object);\r\n\r\n    \tboxHelper.update();\r\n\r\n    \tlength = box.max.x - box.min.x;\r\n    \twidth = box.max.y - box.min.y;\r\n    \theight = box.max.z - box.min.z;\r\n\r\n    \treturn { length, width, height };\r\n    }\r\n\r\n    // 定义各板块移动速度\r\n    handleModelShift = child => {\r\n    \tlet { _startPositions, config } = this;\r\n\r\n    \tlet name = child.name.split('_');\r\n    \tlet area = name[0];\r\n\r\n    \tif(!_startPositions[area]) {\r\n    \t\treturn;\r\n    \t}\r\n\r\n    \treturn config.meshShiftTime && config.meshShiftTime();\r\n    }\r\n\r\n    /**\r\n     * 遍历所有模型对象时的回调\r\n     * @param {*} child 当前遍历模型\r\n     */\r\n    childMapping = child => {\r\n    \tlet { config } = this;\r\n\r\n    \tconfig.childMapping && config.childMapping(child);\r\n    }\r\n\r\n    // 计算模型移动距离\r\n    _getCoordinate2InScene = (i, d, c) => {\r\n    \td.updateMatrixWorld(true);\r\n\r\n    \tlet b = this.getVector2InScene(i, c);\r\n    \tlet j = new THREE.Vector3(b.x, b.y, 0);\r\n\r\n    \tj.unproject(d);\r\n    \tj.sub(d.position);\r\n    \tj.normalize();\r\n\r\n    \tlet f = new THREE.Raycaster(d.position, j);\r\n    \tlet h = f.ray.origin;\r\n    \tlet g = f.ray.direction;\r\n    \tlet e = 0;\r\n    \tlet a = new THREE.Vector3();\r\n\r\n    \ta.setX(h.x - ((h.z - e) * g.x / g.z));\r\n    \ta.setY(h.y - ((h.z - e) * g.y / g.z));\r\n\r\n    \treturn a;\r\n    }\r\n\r\n    getVector2InScene = (a, c) => {\r\n    \tlet b = new THREE.Vector2();\r\n\r\n    \tb.x = (a.x / c.offsetWidth) * 2 - 1;\r\n    \tb.y = -(a.y / c.offsetHeight) * 2 + 1;\r\n\r\n    \treturn b;\r\n    };\r\n\r\n    /**\r\n     * TWEEN动画，封装一下调用的时候写简单点\r\n     * @param a 起点\r\n     * @param b 终点\r\n     * @param t 过渡时间\r\n     * @param c 动画加载完成回调\r\n     * @param s 动画开始回调\r\n     */\r\n    tweenInOut = (a, b, t, c, s) => {\r\n    \tlet tween = new TWEEN.Tween(a)\r\n    \t\t.to(b, t)\r\n    \t\t.easing(TWEEN.Easing.Exponential.InOut);\r\n\r\n    \tc && tween.onComplete(c);\r\n    \ts && tween.onStart(s);\r\n\r\n    \treturn tween.start();\r\n    };\r\n\r\n    /**\r\n     * 递归加载、合并多个材质文件\r\n     * TODO 弃用深拷贝，略浪费性能\r\n     * @param {*} paths config.data.materials，数组\r\n     * @param {*} loader 文件加载器\r\n     * @param {*} material 加载完成后的材质对象，调用时传null就行了\r\n     * @param {*} callback 加载完成后的回调，相当于ajax里的success，传回材质对象\r\n     */\r\n    loadMaterials = (paths, loader, material, callback) => {\r\n    \tloader.load(paths[0], materials => {\r\n    \t\tmaterial ? material.materialsInfo = [...material.materialsInfo, ...materials.materialsInfo] : material = materials;\r\n\r\n    \t\tpaths.shift();\r\n\r\n    \t\tpaths.length != 0 ? loadMaterials(paths, loader, material, callback) : callback(material);\r\n    \t});\r\n    }\r\n\r\n    /**\r\n     * 递归加载、合并多个模型文件\r\n     * TODO 弃用深拷贝，略浪费性能\r\n     * @param {*} paths config.data.objects，数组\r\n     * @param {*} loader 文件加载器\r\n     * @param {*} object 加载完成后的模型对象，调用时传null就行了\r\n     * @param {*} callback 加载完成后的回调，相当于ajax里的success，传回模型对象\r\n     */\r\n    loadObjects = (paths, loader, object, callback) => {\r\n    \tloader.load(paths[0], objects => {\r\n    \t\tobject ? object.children = objects.children.concat(object.children) : object = extend({}, objects);\r\n\r\n    \t\tpaths.shift();\r\n\r\n    \t\tpaths.length != 0 ? loadObjects(paths, loader, object, callback) : callback(object);\r\n    \t});\r\n    }\r\n\r\n    /**\r\n     * 初始化参数\r\n    */\r\n    initParams = () => {\r\n    \tconst { config } = this;\r\n    \tconst { cameraPosition, clientWidth, clientHeight } = config;\r\n    \tconst { x, y, z } = cameraPosition;\r\n\r\n    \t// 挂载画布的dom\r\n    \tthis.container = config.container;\r\n\r\n    \t// 相机视锥体的长宽比\r\n    \tconst cameraAspect = clientWidth / clientHeight;\r\n\r\n    \tthis.camera = new THREE.PerspectiveCamera(45, cameraAspect, 1, 10000);\r\n    \tthis.camera.position.set(x, y, z);\r\n\r\n    \t// 设置画布透明\r\n    \tthis.renderer = new THREE.WebGLRenderer({\r\n    \t\talpha: true,\r\n    \t\tantialias: true\r\n    \t});\r\n    \t// this.renderer.setSize(clientWidth, clientHeight - 4);\r\n    \tthis.resize(clientWidth, clientHeight - 4);\r\n    \tthis.renderer.shadowMap.enabled = true; // 启用阴影选项\r\n    \tthis.renderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n\r\n    \tthis.container.appendChild(this.renderer.domElement);\r\n\r\n    \tthis.scene = new THREE.Scene();\r\n    \tthis.scene.add(this.camera);\r\n\r\n    \t// 初始化轨道控制\r\n    \tlet controls = new OrbitControls(this.camera, this.renderer.domElement);\r\n\r\n    \tObject.assign(controls, config.controls);\r\n    \tthis.controls = controls;\r\n\r\n    \t// 初始化光线\r\n    \tif(config.light) {\r\n    \t\tlet lights = config.light();\r\n\r\n    \t\tfor(let light of lights) {\r\n    \t\t\tthis.scene.add(light);\r\n    \t\t}\r\n    \t}\r\n\r\n    \t// 设置背景颜色\r\n    \tconfig.clear_color && this.renderer.setClearColor(config.clear_color, config.clearOpacity);\r\n    }\r\n\r\n    /**\r\n     * 完成开场动画后，相机视角变动\r\n     * 一种是旋转mesh，一种是改变相机位置\r\n     * 这是旋转mesh\r\n     */\r\n    afterMovementMesh = () => {\r\n    \tconst { afterRotation } = this.config;\r\n\r\n    \tconst rotateAnimate = () => {\r\n    \t\trequestAnimationFrame(rotateAnimate);\r\n\r\n    \t\t// 沿x轴旋转\r\n    \t\tthis.root.rotation.x >= afterRotation ? this.root.rotation.x -= this.config.rotationSpeed : null;\r\n\r\n    \t\tthis.renderer.render(this.scene, this.camera);\r\n    \t};\r\n\r\n    \trotateAnimate();\r\n    }\r\n\r\n    /**\r\n     * 预处理模型数据\r\n     * @param object 模型数据\r\n    */\r\n    handleMesh = object => {\r\n    \tlet { config, _startTweenCount } = this;\r\n\r\n    \tobject.traverse(child => {\r\n    \t\tif(child instanceof THREE.Group) {\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\tif(child instanceof THREE.Mesh) {\r\n    \t\t\tchild.geometry = new THREE.Geometry().fromBufferGeometry(child.geometry);\r\n    \t\t} else if(child instanceof THREE.Line) {\r\n    \t\t\tconsole.log(child.name);\r\n    \t\t}\r\n\r\n    \t\tchild.name == 'texture' && (this.modelTexture = child);\r\n\r\n    \t\tthis.dealObjectInLoadCirculStart(child, config.borderVisible);\r\n\r\n    \t\tthis.childMapping(child, config);\r\n\r\n    \t\tlet time = this.handleModelShift(child, config);\r\n\r\n    \t\t// 开始动画\r\n    \t\tthis.tweenInOut(child.position, { x: 0, y: 0, z: 0 }, time, () => {\r\n    \t\t\t_startTweenCount--;\r\n\r\n    \t\t\tif(_startTweenCount === 0) {\r\n    \t\t\t\tthis.renderPillar(object);\r\n    \t\t\t\tthis.afterMovementMesh();\r\n\r\n    \t\t\t\t// TODO 这里不该循环，应急\r\n    \t\t\t\tfor(let child of object.children) {\r\n    \t\t\t\t\tthis.config.before_animate && this.config.before_animate(child, true);\r\n    \t\t\t\t}\r\n\r\n    \t\t\t\t// 绑定事件，比如鼠标移到板块上高亮\r\n    \t\t\t\tthis.initListener(object);\r\n    \t\t\t}\r\n    \t\t});\r\n    \t\t_startTweenCount++;\r\n    \t});\r\n    }\r\n\r\n    /**\r\n     * 显示贴图\r\n     * @param material 传入的材质，最后和原材质中的属性合并\r\n     * @param url 等值面图片地址\r\n    */\r\n    showTexture = (material, url) => {\r\n    \tif(url) {\r\n    \t\tnew THREE.TextureLoader().load(url, map => {\r\n    \t\t\tthis.modelTexture.material.map = map;\r\n    \t\t});\r\n    \t}\r\n\r\n    \tthis.modelTexture.material = Object.assign(this.modelTexture.material, material);\r\n    \tthis.modelTexture.visible = !this.modelTexture.visible;\r\n    }\r\n\r\n    getObject = () => this.dataObject;\r\n\r\n    /**\r\n     * 更新数据并刷新柱子高度，也就是动画重播一遍\r\n     * TODO 根据传入对象判断哪些对象需要更新\r\n     * @param {*} object 新的模型对象\r\n     */\r\n    refreshPillar = object => {\r\n    \tlet { dataObject } = this;\r\n\r\n    \tdataObject = object;\r\n    \tthis.renderPillar(dataObject);\r\n    }\r\n\r\n    flush = () => {\r\n    \t// 实时渲染\r\n    \tconst render = () => {\r\n    \t\trequestAnimationFrame(render);\r\n\r\n    \t\tTWEEN.update();\r\n    \t\tthis.controls.update();\r\n\r\n    \t\tthis.renderer.render(this.scene, this.camera);\r\n    \t};\r\n\r\n    \trender();\r\n    }\r\n\r\n    // 渲染柱子\r\n    renderPillar = object => {\r\n    \tconst { config } = this;\r\n\r\n    \tobject.traverse(child => {\r\n    \t\tthis.changeModel4DataRefresh(child, config.divisor);\r\n    \t});\r\n    }\r\n\r\n    resize = (width = document.documentElement.clientWidth, height = document.documentElement.clientHeight - 4) => {\r\n    \tthis.renderer.setSize(width, height);\r\n    }\r\n\r\n    init = _config => {\r\n    \tlet { config } = this;\r\n    \t// TODO 去掉加载材质和模型方法的副作用\r\n\r\n    \tconfig = extend(this.config, _config);\r\n\r\n    \tthis.initParams(_config);\r\n\r\n    \t// 初始化前的钩子\r\n    \tconfig.beforeInit && config.beforeInit(config);\r\n\r\n    \t// 加载模型数据\r\n    \tlet mtlLoader = new MTLLoader();\r\n\r\n    \tthis.loadMaterials(config.data.materials, mtlLoader, null, materials => {\r\n    \t\tconfig.set_material && (materials = config.set_material(materials));\r\n\r\n    \t\tlet objLoader = new OBJLoader();\r\n\r\n    \t\tobjLoader.setMaterials(materials);\r\n\r\n    \t\tthis.loadObjects(config.data.objects, objLoader, null, object => {\r\n    \t\t\t// 请求业务数据\r\n    \t\t\tconfig.data.load(object, newObject => {\r\n    \t\t\t\tthis.dataObject = newObject;\r\n\r\n    \t\t\t\tthis.handleMesh(newObject);\r\n\r\n    \t\t\t\tthis.root = new THREE.Object3D().add(newObject);\r\n    \t\t\t\tthis.scene.add(this.root);\r\n\r\n    \t\t\t\tthis.flush();\r\n    \t\t\t});\r\n    \t\t});\r\n    \t});\r\n    };\r\n}","/*\r\n * @Author: zy9@github.com/zy410419243\r\n * @Date: 2018-04-24 15:34:46\r\n * @Last Modified by: zy9\r\n * @Last Modified time: 2018-07-13 08:55:29\r\n */\r\nimport Trunk from './core';\r\n\r\nexport default Trunk;"],"sourceRoot":""}