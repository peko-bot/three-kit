{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///external \"three\"","webpack:///./src/util/DeepClone.js","webpack:///./node_modules/_tween@0.9.0@tween/tween.js","webpack:///./node_modules/_three-orbitcontrols@2.1.2@three-orbitcontrols/OrbitControls.js","webpack:///./src/loader/OBJLoader.js","webpack:///./src/loader/MTLLoader.js","webpack:///./src/core/index.js","webpack:///./src/index.js"],"names":["root","factory","exports","module","require","define","amd","a","i","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","undefined","__WEBPACK_AMD_DEFINE_RESULT__","copyIsArray","toString","hasOwn","class2type","[object Boolean]","[object Number]","[object String]","[object Function]","[object Array]","[object Date]","[object RegExp]","[object Object]","type","obj","String","isArray","Array","isPlainObject","nodeType","_typeof","isWindow","constructor","extend","target","options","src","copy","clone","apply","Date","now","valueOf","TWEEN","_tweens","REVISION","getAll","removeAll","add","tween","push","remove","indexOf","splice","update","time","length","numTweens","Tween","_object","_valuesStart","_valuesEnd","_duration","_delayTime","_startTime","_easingFunction","Easing","Linear","None","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onCompleteCallback","this","to","properties","duration","start","concat","stop","delay","amount","easing","interpolation","chain","arguments","onStart","callback","onUpdate","onComplete","elapsed","end","numChainedTweens","k","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Math","cos","PI","sin","Exponential","pow","Circular","sqrt","Elastic","asin","Back","Bounce","v","f","floor","fn","Utils","Bezier","b","pw","bn","Bernstein","CatmullRom","p0","p1","fc","Factorial","p2","p3","v0","v1","t2","THREE","OrbitControls","domElement","document","enabled","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","MOUSE","ZOOM","MIDDLE","PAN","target0","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","reset","updateProjectionMatrix","dispatchEvent","changeEvent","state","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","max","min","makeSafe","radius","scale","panOffset","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY_PAN","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","angle","rotateUp","panLeft","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","body","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","console","warn","dollyIn","dollyScale","dollyOut","event","preventDefault","button","clientX","clientY","handleMouseDownRotate","handleMouseDownDolly","handleMouseDownPan","addEventListener","subVectors","x","y","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","stopPropagation","handleMouseWheel","keyCode","handleKeyDown","touches","pageX","pageY","handleTouchStartRotate","dx","dy","handleTouchStartDollyPan","handleTouchMoveRotate","handleTouchMoveDollyPan","EventDispatcher","defineProperties","center","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","default","OBJLoader","manager","_classCallCheck","DefaultLoadingManager","materials","regexp","vertex_pattern","normal_pattern","uv_pattern","face_vertex","face_vertex_uv","face_vertex_uv_normal","face_vertex_normal","object_pattern","smoothing_pattern","material_library_pattern","material_use_pattern","url","onLoad","onProgress","onError","loader","FileLoader","setPath","path","load","text","parse","objects","vertices","normals","uvs","materialLibraries","startObject","fromDeclaration","previousMaterial","currentMaterial","_finalize","geometry","smooth","startMaterial","libraries","previous","inherited","groupCount","index","material","mtllib","groupStart","groupEnd","cloned","lastMultiMaterial","mi","declared","finalize","parseVertexIndex","len","parseInt","parseNormalIndex","parseUVIndex","addVertex","dst","addVertexLine","addNormal","addUV","addUVLine","addFace","ua","ub","uc","ud","na","nb","nc","nd","id","vLen","ia","ib","ic","uvLen","nLen","addLineGeometry","vi","uvi","_createParserState","replace","lines","split","line","lineFirstChar","lineSecondChar","result","trimLeft","trim","charAt","exec","parseFloat","Error","lineParts","substring","lineVertices","lineUVs","li","llen","parts","substr","test","toLowerCase","container","Group","isLine","buffergeometry","BufferGeometry","addAttribute","BufferAttribute","Float32Array","computeVertexNormals","mesh","createdMaterials","miLen","sourceMaterial","LineBasicMaterial","materialLine","MeshPhongMaterial","flatShading","SmoothShading","FlatShading","addGroup","LineSegments","Mesh","timeEnd","MTLLoader","texturePath","setTexturePath","crossOrigin","materialOptions","info","delimiter_pattern","materialsInfo","pos","ss","materialCreator","MaterialCreator","setCrossOrigin","setManager","setMaterials","baseUrl","materialsArray","nameLookup","side","FrontSide","wrap","RepeatWrapping","convert","converted","mn","mat","covmat","prop","save","lprop","normalizeRGB","ignoreZeroRGBs","materialName","createMaterial_","params","setMapForType","mapType","texParams","getTextureParams","map","loadTexture","resolveURL","repeat","wrapS","wrapT","color","Color","fromArray","specular","shininess","opacity","transparent","matParams","items","bumpScale","join","mapping","texture","Loader","Handlers","TextureLoader","config","clear_opacity","mesh_shift_time","random","before_init","border_visible","divisor","camera_position","z","after_rotation","rotation_speed","pillar","border","select","light","lights","HemisphereLight","controls","documentElement","_startPositions","_startTweenCount","_intervals","_old","_current","_withdrawPosition","dataObject","model_texture","camera","renderer","scene","_initAreaPosition","area","child","_this","before_animate","_dealObjectInLoadCirculStart","visible","_changeModel4DataRefresh","dmName","data","userData","val","height","_setHeightSlow","_setHeight","sh","setInterval","h","clearInterval","isNaN","verticesNeedUpdate","minz","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","next","done","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","vertice","_initListener","e","_setMeshHighLightStatus","_showDetail","_objectFromMouse","uuid","includes","show_detail","flag","_meshMove","pagex","pagey","_renderer$domElement","offsetLeft","elty","offsetTop","vpx","offsetWidth","vpy","offsetHeight","vector","raycaster","Raycaster","setFromCamera","intersects","intersectObjects","children","intersect","point","face","_getOffset","node","parentNode","withdraw","getMeshWidth","_getCoordinate2InScene","gap","_tweenInOut","boxHelper","BoxHelper","box","Box3","setFromObject","width","_handle_model_shift","child_mapping","updateMatrixWorld","getVector2InScene","j","unproject","normalize","ray","origin","g","direction","setX","setY","_load_materials","paths","_toConsumableArray","shift","_load_objects","_DeepClone2","_init_params","_camera_aspect","PerspectiveCamera","WebGLRenderer","alpha","antialias","resize","shadowMap","PCFSoftShadowMap","appendChild","Scene","assign","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","clear_color","setClearColor","_afterMovementMesh","rotateAnimate","requestAnimationFrame","rotation","render","_handle_mesh","traverse","Geometry","fromBufferGeometry","Line","log","render_pillar","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","show_texture","get_object","refresh_pillar","_flush","setSize","init","_config","mtlLoader","set_material","objLoader","new_object","Object3D","Trunk"],"mappings":"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","file":"Trunk.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"three\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"three\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"three\")) : factory(root[\"three\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","define([], function () {\r\n    var copyIsArray,\r\n        toString = Object.prototype.toString,\r\n        hasOwn = Object.prototype.hasOwnProperty;\r\n\r\n    var class2type = {\r\n            '[object Boolean]': 'boolean',\r\n            '[object Number]': 'number',\r\n            '[object String]': 'string',\r\n            '[object Function]': 'function',\r\n            '[object Array]': 'array',\r\n            '[object Date]': 'date',\r\n            '[object RegExp]': 'regExp',\r\n            '[object Object]': 'object'\r\n        },\r\n\r\n        type = function (obj) {\r\n            return obj == null\r\n                ? String(obj)\r\n                : class2type[toString.call(obj)] || \"object\";\r\n        },\r\n\r\n        isWindow = function (obj) {\r\n            return obj && typeof obj === \"object\" && \"setInterval\" in obj;\r\n        },\r\n\r\n        isArray = Array.isArray || function (obj) {\r\n            return type(obj) === \"array\";\r\n        },\r\n\r\n        isPlainObject = function (obj) {\r\n            if (!obj || type(obj) !== \"object\" || obj.nodeType || isWindow(obj)) {\r\n                return false;\r\n            }\r\n\r\n            if (obj.constructor && !hasOwn.call(obj, \"constructor\") && !hasOwn.call(obj.constructor.prototype, \"isPrototypeOf\")) {\r\n                return false;\r\n            }\r\n\r\n            var key;\r\n            for (key in obj) {}\r\n\r\n            return key === undefined || hasOwn.call(obj, key);\r\n        },\r\n\r\n        extend = function (target, options) {\r\n            for (var name in options) {\r\n                var src = target[name];\r\n                var copy = options[name];\r\n\r\n                if (target === copy) {\r\n                    continue;\r\n                }\r\n\r\n                if (copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\r\n                    if (copyIsArray) {\r\n                        copyIsArray = false;\r\n                        var clone = src && isArray(src)\r\n                            ? src\r\n                            : [];\r\n\r\n                    } else {\r\n                        var clone = src && isPlainObject(src)\r\n                            ? src\r\n                            : {};\r\n                    }\r\n\r\n                    target[name] = extend(clone, copy);\r\n                } else if (copy !== undefined) {\r\n                    target[name] = copy;\r\n                }\r\n            }\r\n\r\n            return target;\r\n        };\r\n\r\n    return extend;\r\n});","/**\n * @author sole / http://soledadpenades.com\n * @author mrdoob / http://mrdoob.com\n * @author Robert Eisele / http://www.xarg.org\n * @author Philippe / http://philippe.elsass.me\n * @author Robert Penner / http://www.robertpenner.com/easing_terms_of_use.html\n * @author Paul Lewis / http://www.aerotwist.com/\n * @author lechecacharro\n * @author Josh Faul / http://jocafa.com/\n * @author egraether / http://egraether.com/\n */\n\nif ( Date.now === undefined ) {\n\n  Date.now = function () {\n\n    return new Date().valueOf();\n\n  }\n\n}\n\nvar TWEEN = TWEEN || ( function () {\n\n  var _tweens = [];\n\n  return {\n\n    REVISION: '8',\n\n    getAll: function () {\n\n      return _tweens;\n\n    },\n\n    removeAll: function () {\n\n      _tweens = [];\n\n    },\n\n    add: function ( tween ) {\n\n      _tweens.push( tween );\n\n    },\n\n    remove: function ( tween ) {\n\n      var i = _tweens.indexOf( tween );\n\n      if ( i !== -1 ) {\n\n        _tweens.splice( i, 1 );\n\n      }\n\n    },\n\n    update: function ( time ) {\n\n      if ( _tweens.length === 0 ) return false;\n\n      var i = 0, numTweens = _tweens.length;\n\n      time = time !== undefined ? time : Date.now();\n\n      while ( i < numTweens ) {\n\n        if ( _tweens[ i ].update( time ) ) {\n\n          i ++;\n\n        } else {\n\n          _tweens.splice( i, 1 );\n\n          numTweens --;\n\n        }\n\n      }\n\n      return true;\n\n    }\n\n  };\n\n} )();\n\nTWEEN.Tween = function ( object ) {\n\n  var _object = object;\n  var _valuesStart = {};\n  var _valuesEnd = {};\n  var _duration = 1000;\n  var _delayTime = 0;\n  var _startTime = null;\n  var _easingFunction = TWEEN.Easing.Linear.None;\n  var _interpolationFunction = TWEEN.Interpolation.Linear;\n  var _chainedTweens = [];\n  var _onStartCallback = null;\n  var _onStartCallbackFired = false;\n  var _onUpdateCallback = null;\n  var _onCompleteCallback = null;\n\n  this.to = function ( properties, duration ) {\n\n    if ( duration !== undefined ) {\n\n      _duration = duration;\n\n    }\n\n    _valuesEnd = properties;\n\n    return this;\n\n  };\n\n  this.start = function ( time ) {\n\n    TWEEN.add( this );\n\n    _onStartCallbackFired = false;\n\n    _startTime = time !== undefined ? time : Date.now();\n    _startTime += _delayTime;\n\n    for ( var property in _valuesEnd ) {\n\n      // This prevents the interpolation of null values or of non-existing properties\n      if( _object[ property ] === null || !(property in _object) ) {\n\n        continue;\n\n      }\n\n      // check if an Array was provided as property value\n      if ( _valuesEnd[ property ] instanceof Array ) {\n\n        if ( _valuesEnd[ property ].length === 0 ) {\n\n          continue;\n\n        }\n\n        // create a local copy of the Array with the start value at the front\n        _valuesEnd[ property ] = [ _object[ property ] ].concat( _valuesEnd[ property ] );\n\n      }\n\n      _valuesStart[ property ] = _object[ property ];\n\n    }\n\n    return this;\n\n  };\n\n  this.stop = function () {\n\n    TWEEN.remove( this );\n    return this;\n\n  };\n\n  this.delay = function ( amount ) {\n\n    _delayTime = amount;\n    return this;\n\n  };\n\n  this.easing = function ( easing ) {\n\n    _easingFunction = easing;\n    return this;\n\n  };\n\n  this.interpolation = function ( interpolation ) {\n\n    _interpolationFunction = interpolation;\n    return this;\n\n  };\n\n  this.chain = function () {\n\n    _chainedTweens = arguments;\n    return this;\n\n  };\n\n  this.onStart = function ( callback ) {\n\n    _onStartCallback = callback;\n    return this;\n\n  };\n\n  this.onUpdate = function ( callback ) {\n\n    _onUpdateCallback = callback;\n    return this;\n\n  };\n\n  this.onComplete = function ( callback ) {\n\n    _onCompleteCallback = callback;\n    return this;\n\n  };\n\n  this.update = function ( time ) {\n\n    if ( time < _startTime ) {\n\n      return true;\n\n    }\n\n    if ( _onStartCallbackFired === false ) {\n\n      if ( _onStartCallback !== null ) {\n\n        _onStartCallback.call( _object );\n\n      }\n\n      _onStartCallbackFired = true;\n\n    }\n\n    var elapsed = ( time - _startTime ) / _duration;\n    elapsed = elapsed > 1 ? 1 : elapsed;\n\n    var value = _easingFunction( elapsed );\n\n    for ( var property in _valuesStart ) {\n\n      var start = _valuesStart[ property ];\n      var end = _valuesEnd[ property ];\n\n      if ( end instanceof Array ) {\n\n        _object[ property ] = _interpolationFunction( end, value );\n\n      } else {\n\n        _object[ property ] = start + ( end - start ) * value;\n\n      }\n\n    }\n\n    if ( _onUpdateCallback !== null ) {\n\n      _onUpdateCallback.call( _object, value );\n\n    }\n\n    if ( elapsed == 1 ) {\n\n      if ( _onCompleteCallback !== null ) {\n\n        _onCompleteCallback.call( _object );\n\n      }\n\n      for ( var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i ++ ) {\n\n        _chainedTweens[ i ].start( time );\n\n      }\n\n      return false;\n\n    }\n\n    return true;\n\n  };\n\n};\n\nTWEEN.Easing = {\n\n  Linear: {\n\n    None: function ( k ) {\n\n      return k;\n\n    }\n\n  },\n\n  Quadratic: {\n\n    In: function ( k ) {\n\n      return k * k;\n\n    },\n\n    Out: function ( k ) {\n\n      return k * ( 2 - k );\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( ( k *= 2 ) < 1 ) return 0.5 * k * k;\n      return - 0.5 * ( --k * ( k - 2 ) - 1 );\n\n    }\n\n  },\n\n  Cubic: {\n\n    In: function ( k ) {\n\n      return k * k * k;\n\n    },\n\n    Out: function ( k ) {\n\n      return --k * k * k + 1;\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( ( k *= 2 ) < 1 ) return 0.5 * k * k * k;\n      return 0.5 * ( ( k -= 2 ) * k * k + 2 );\n\n    }\n\n  },\n\n  Quartic: {\n\n    In: function ( k ) {\n\n      return k * k * k * k;\n\n    },\n\n    Out: function ( k ) {\n\n      return 1 - ( --k * k * k * k );\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( ( k *= 2 ) < 1) return 0.5 * k * k * k * k;\n      return - 0.5 * ( ( k -= 2 ) * k * k * k - 2 );\n\n    }\n\n  },\n\n  Quintic: {\n\n    In: function ( k ) {\n\n      return k * k * k * k * k;\n\n    },\n\n    Out: function ( k ) {\n\n      return --k * k * k * k * k + 1;\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( ( k *= 2 ) < 1 ) return 0.5 * k * k * k * k * k;\n      return 0.5 * ( ( k -= 2 ) * k * k * k * k + 2 );\n\n    }\n\n  },\n\n  Sinusoidal: {\n\n    In: function ( k ) {\n\n      return 1 - Math.cos( k * Math.PI / 2 );\n\n    },\n\n    Out: function ( k ) {\n\n      return Math.sin( k * Math.PI / 2 );\n\n    },\n\n    InOut: function ( k ) {\n\n      return 0.5 * ( 1 - Math.cos( Math.PI * k ) );\n\n    }\n\n  },\n\n  Exponential: {\n\n    In: function ( k ) {\n\n      return k === 0 ? 0 : Math.pow( 1024, k - 1 );\n\n    },\n\n    Out: function ( k ) {\n\n      return k === 1 ? 1 : 1 - Math.pow( 2, - 10 * k );\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( k === 0 ) return 0;\n      if ( k === 1 ) return 1;\n      if ( ( k *= 2 ) < 1 ) return 0.5 * Math.pow( 1024, k - 1 );\n      return 0.5 * ( - Math.pow( 2, - 10 * ( k - 1 ) ) + 2 );\n\n    }\n\n  },\n\n  Circular: {\n\n    In: function ( k ) {\n\n      return 1 - Math.sqrt( 1 - k * k );\n\n    },\n\n    Out: function ( k ) {\n\n      return Math.sqrt( 1 - ( --k * k ) );\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( ( k *= 2 ) < 1) return - 0.5 * ( Math.sqrt( 1 - k * k) - 1);\n      return 0.5 * ( Math.sqrt( 1 - ( k -= 2) * k) + 1);\n\n    }\n\n  },\n\n  Elastic: {\n\n    In: function ( k ) {\n\n      var s, a = 0.1, p = 0.4;\n      if ( k === 0 ) return 0;\n      if ( k === 1 ) return 1;\n      if ( !a || a < 1 ) { a = 1; s = p / 4; }\n      else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n      return - ( a * Math.pow( 2, 10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) );\n\n    },\n\n    Out: function ( k ) {\n\n      var s, a = 0.1, p = 0.4;\n      if ( k === 0 ) return 0;\n      if ( k === 1 ) return 1;\n      if ( !a || a < 1 ) { a = 1; s = p / 4; }\n      else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n      return ( a * Math.pow( 2, - 10 * k) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) + 1 );\n\n    },\n\n    InOut: function ( k ) {\n\n      var s, a = 0.1, p = 0.4;\n      if ( k === 0 ) return 0;\n      if ( k === 1 ) return 1;\n      if ( !a || a < 1 ) { a = 1; s = p / 4; }\n      else s = p * Math.asin( 1 / a ) / ( 2 * Math.PI );\n      if ( ( k *= 2 ) < 1 ) return - 0.5 * ( a * Math.pow( 2, 10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) );\n      return a * Math.pow( 2, -10 * ( k -= 1 ) ) * Math.sin( ( k - s ) * ( 2 * Math.PI ) / p ) * 0.5 + 1;\n\n    }\n\n  },\n\n  Back: {\n\n    In: function ( k ) {\n\n      var s = 1.70158;\n      return k * k * ( ( s + 1 ) * k - s );\n\n    },\n\n    Out: function ( k ) {\n\n      var s = 1.70158;\n      return --k * k * ( ( s + 1 ) * k + s ) + 1;\n\n    },\n\n    InOut: function ( k ) {\n\n      var s = 1.70158 * 1.525;\n      if ( ( k *= 2 ) < 1 ) return 0.5 * ( k * k * ( ( s + 1 ) * k - s ) );\n      return 0.5 * ( ( k -= 2 ) * k * ( ( s + 1 ) * k + s ) + 2 );\n\n    }\n\n  },\n\n  Bounce: {\n\n    In: function ( k ) {\n\n      return 1 - TWEEN.Easing.Bounce.Out( 1 - k );\n\n    },\n\n    Out: function ( k ) {\n\n      if ( k < ( 1 / 2.75 ) ) {\n\n        return 7.5625 * k * k;\n\n      } else if ( k < ( 2 / 2.75 ) ) {\n\n        return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;\n\n      } else if ( k < ( 2.5 / 2.75 ) ) {\n\n        return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;\n\n      } else {\n\n        return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;\n\n      }\n\n    },\n\n    InOut: function ( k ) {\n\n      if ( k < 0.5 ) return TWEEN.Easing.Bounce.In( k * 2 ) * 0.5;\n      return TWEEN.Easing.Bounce.Out( k * 2 - 1 ) * 0.5 + 0.5;\n\n    }\n\n  }\n\n};\n\nTWEEN.Interpolation = {\n\n  Linear: function ( v, k ) {\n\n    var m = v.length - 1, f = m * k, i = Math.floor( f ), fn = TWEEN.Interpolation.Utils.Linear;\n\n    if ( k < 0 ) return fn( v[ 0 ], v[ 1 ], f );\n    if ( k > 1 ) return fn( v[ m ], v[ m - 1 ], m - f );\n\n    return fn( v[ i ], v[ i + 1 > m ? m : i + 1 ], f - i );\n\n  },\n\n  Bezier: function ( v, k ) {\n\n    var b = 0, n = v.length - 1, pw = Math.pow, bn = TWEEN.Interpolation.Utils.Bernstein, i;\n\n    for ( i = 0; i <= n; i++ ) {\n      b += pw( 1 - k, n - i ) * pw( k, i ) * v[ i ] * bn( n, i );\n    }\n\n    return b;\n\n  },\n\n  CatmullRom: function ( v, k ) {\n\n    var m = v.length - 1, f = m * k, i = Math.floor( f ), fn = TWEEN.Interpolation.Utils.CatmullRom;\n\n    if ( v[ 0 ] === v[ m ] ) {\n\n      if ( k < 0 ) i = Math.floor( f = m * ( 1 + k ) );\n\n      return fn( v[ ( i - 1 + m ) % m ], v[ i ], v[ ( i + 1 ) % m ], v[ ( i + 2 ) % m ], f - i );\n\n    } else {\n\n      if ( k < 0 ) return v[ 0 ] - ( fn( v[ 0 ], v[ 0 ], v[ 1 ], v[ 1 ], -f ) - v[ 0 ] );\n      if ( k > 1 ) return v[ m ] - ( fn( v[ m ], v[ m ], v[ m - 1 ], v[ m - 1 ], f - m ) - v[ m ] );\n\n      return fn( v[ i ? i - 1 : 0 ], v[ i ], v[ m < i + 1 ? m : i + 1 ], v[ m < i + 2 ? m : i + 2 ], f - i );\n\n    }\n\n  },\n\n  Utils: {\n\n    Linear: function ( p0, p1, t ) {\n\n      return ( p1 - p0 ) * t + p0;\n\n    },\n\n    Bernstein: function ( n , i ) {\n\n      var fc = TWEEN.Interpolation.Utils.Factorial;\n      return fc( n ) / fc( i ) / fc( n - i );\n\n    },\n\n    Factorial: ( function () {\n\n      var a = [ 1 ];\n\n      return function ( n ) {\n\n        var s = 1, i;\n        if ( a[ n ] ) return a[ n ];\n        for ( i = n; i > 1; i-- ) s *= i;\n        return a[ n ] = s;\n\n      };\n\n    } )(),\n\n    CatmullRom: function ( p0, p1, p2, p3, t ) {\n\n      var v0 = ( p2 - p0 ) * 0.5, v1 = ( p3 - p1 ) * 0.5, t2 = t * t, t3 = t * t2;\n      return ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n    }\n\n  }\n\n};\n\nmodule.exports = TWEEN;","var THREE = require('three')\n\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: two-finger move\n\nTHREE.OrbitControls = function ( object, domElement ) {\n\n\tthis.object = object;\n\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new THREE.Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.25;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = false; // if true, pan in screen-space\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new THREE.Vector3();\n\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t// restrict theta to be between desired limits\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\t\t\tscope.target.add( panOffset );\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY_PAN: 4 };\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new THREE.Spherical();\n\tvar sphericalDelta = new THREE.Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new THREE.Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new THREE.Vector2();\n\tvar rotateEnd = new THREE.Vector2();\n\tvar rotateDelta = new THREE.Vector2();\n\n\tvar panStart = new THREE.Vector2();\n\tvar panEnd = new THREE.Vector2();\n\tvar panDelta = new THREE.Vector2();\n\n\tvar dollyStart = new THREE.Vector2();\n\tvar dollyEnd = new THREE.Vector2();\n\tvar dollyDelta = new THREE.Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\t//console.log( 'handleMouseDownRotate' );\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\t//console.log( 'handleMouseDownDolly' );\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\t//console.log( 'handleMouseDownPan' );\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\t//console.log( 'handleMouseMoveRotate' );\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t// rotating across whole screen goes 360 degrees around\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth );\n\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\t//console.log( 'handleMouseMoveDolly' );\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\t//console.log( 'handleMouseMovePan' );\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( event ) {\n\n\t\t// console.log( 'handleMouseUp' );\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\t// console.log( 'handleMouseWheel' );\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\t//console.log( 'handleKeyDown' );\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\t//console.log( 'handleTouchStartRotate' );\n\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\t//console.log( 'handleTouchStartDollyPan' );\n\n\t\tif ( scope.enableZoom ) {\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tif ( scope.enablePan ) {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\t//console.log( 'handleTouchMoveRotate' );\n\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t// rotating across whole screen goes 360 degrees around\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth );\n\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t//console.log( 'handleTouchMoveDollyPan' );\n\n\t\tif ( scope.enableZoom ) {\n\n\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyIn( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t}\n\n\t\tif ( scope.enablePan ) {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchEnd( event ) {\n\n\t\t//console.log( 'handleTouchEnd' );\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase scope.mouseButtons.ORBIT:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.ZOOM:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\t// two-fingered touch: dolly-pan\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // two-fingered touch: dolly-pan\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY_PAN ) return; // is this needed?\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nTHREE.OrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;\n\nObject.defineProperties( THREE.OrbitControls.prototype, {\n\n\tcenter: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .center has been renamed to .target' );\n\t\t\treturn this.target;\n\n\t\t}\n\n\t},\n\n\t// backward compatibility\n\n\tnoZoom: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\treturn ! this.enableZoom;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\tthis.enableZoom = ! value;\n\n\t\t}\n\n\t},\n\n\tnoRotate: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\treturn ! this.enableRotate;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\tthis.enableRotate = ! value;\n\n\t\t}\n\n\t},\n\n\tnoPan: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\treturn ! this.enablePan;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\tthis.enablePan = ! value;\n\n\t\t}\n\n\t},\n\n\tnoKeys: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\treturn ! this.enableKeys;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\tthis.enableKeys = ! value;\n\n\t\t}\n\n\t},\n\n\tstaticMoving: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\treturn ! this.enableDamping;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\tthis.enableDamping = ! value;\n\n\t\t}\n\n\t},\n\n\tdynamicDampingFactor: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\treturn this.dampingFactor;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\tthis.dampingFactor = value;\n\n\t\t}\n\n\t}\n\n} );\n\nmodule.exports = exports.default = THREE.OrbitControls\n","/**\r\n * @author lucascassiano / http://lucascassiano.github.io\r\n * @edited as an ES6 module based on script from mrdoob / http://mrdoob.com/\r\n */\r\n\r\nimport * as THREE from 'three';\r\n\r\nclass OBJLoader {\r\n\tconstructor(manager) {\r\n\t\tthis.manager = (manager !== undefined) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\t\tthis.materials = null;\r\n\r\n\t\tthis.regexp = {\r\n\t\t\t// v float float float\r\n\t\t\tvertex_pattern: /^v\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\r\n\t\t\t// vn float float float\r\n\t\t\tnormal_pattern: /^vn\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\r\n\t\t\t// vt float float\r\n\t\t\tuv_pattern: /^vt\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\r\n\t\t\t// f vertex vertex vertex\r\n\t\t\tface_vertex: /^f\\s+(-?\\d+)\\s+(-?\\d+)\\s+(-?\\d+)(?:\\s+(-?\\d+))?/,\r\n\t\t\t// f vertex/uv vertex/uv vertex/uv\r\n\t\t\tface_vertex_uv: /^f\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+))?/,\r\n\t\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal\r\n\t\t\tface_vertex_uv_normal: /^f\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+))?/,\r\n\t\t\t// f vertex//normal vertex//normal vertex//normal\r\n\t\t\tface_vertex_normal: /^f\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)(?:\\s+(-?\\d+)\\/\\/(-?\\d+))?/,\r\n\t\t\t// o object_name | g group_name\r\n\t\t\tobject_pattern: /^[og]\\s*(.+)?/,\r\n\t\t\t// s boolean\r\n\t\t\tsmoothing_pattern: /^s\\s+(\\d+|on|off)/,\r\n\t\t\t// mtllib file_reference\r\n\t\t\tmaterial_library_pattern: /^mtllib /,\r\n\t\t\t// usemtl material_name\r\n\t\t\tmaterial_use_pattern: /^usemtl /\r\n\t\t};\r\n\t}\r\n\r\n\tload(url, onLoad, onProgress, onError) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.FileLoader(scope.manager);\r\n\t\tloader.setPath(this.path);\r\n\t\tloader.load(url, function (text) {\r\n\r\n\t\t\tonLoad(scope.parse(text));\r\n\r\n\t\t}, onProgress, onError);\r\n\r\n\t}\r\n\r\n\tsetPath(value) {\r\n\r\n\t\tthis.path = value;\r\n\r\n\t}\r\n\r\n\tsetMaterials(materials) {\r\n\r\n\t\tthis.materials = materials;\r\n\r\n\t}\r\n\r\n\t_createParserState() {\r\n\r\n\t\tvar state = {\r\n\t\t\tobjects: [],\r\n\t\t\tobject: {},\r\n\r\n\t\t\tvertices: [],\r\n\t\t\tnormals: [],\r\n\t\t\tuvs: [],\r\n\r\n\t\t\tmaterialLibraries: [],\r\n\r\n\t\t\tstartObject: function (name, fromDeclaration) {\r\n\r\n\t\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\r\n\t\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\r\n\t\t\t\tif (this.object && this.object.fromDeclaration === false) {\r\n\r\n\t\t\t\t\tthis.object.name = name;\r\n\t\t\t\t\tthis.object.fromDeclaration = (fromDeclaration !== false);\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar previousMaterial = (this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined);\r\n\r\n\t\t\t\tif (this.object && typeof this.object._finalize === 'function') {\r\n\r\n\t\t\t\t\tthis.object._finalize(true);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.object = {\r\n\t\t\t\t\tname: name || '',\r\n\t\t\t\t\tfromDeclaration: (fromDeclaration !== false),\r\n\r\n\t\t\t\t\tgeometry: {\r\n\t\t\t\t\t\tvertices: [],\r\n\t\t\t\t\t\tnormals: [],\r\n\t\t\t\t\t\tuvs: []\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmaterials: [],\r\n\t\t\t\t\tsmooth: true,\r\n\r\n\t\t\t\t\tstartMaterial: function (name, libraries) {\r\n\r\n\t\t\t\t\t\tvar previous = this._finalize(false);\r\n\r\n\t\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\r\n\t\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\r\n\t\t\t\t\t\tif (previous && (previous.inherited || previous.groupCount <= 0)) {\r\n\r\n\t\t\t\t\t\t\tthis.materials.splice(previous.index, 1);\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar material = {\r\n\t\t\t\t\t\t\tindex: this.materials.length,\r\n\t\t\t\t\t\t\tname: name || '',\r\n\t\t\t\t\t\t\tmtllib: (Array.isArray(libraries) && libraries.length > 0 ? libraries[libraries.length - 1] : ''),\r\n\t\t\t\t\t\t\tsmooth: (previous !== undefined ? previous.smooth : this.smooth),\r\n\t\t\t\t\t\t\tgroupStart: (previous !== undefined ? previous.groupEnd : 0),\r\n\t\t\t\t\t\t\tgroupEnd: -1,\r\n\t\t\t\t\t\t\tgroupCount: -1,\r\n\t\t\t\t\t\t\tinherited: false,\r\n\r\n\t\t\t\t\t\t\tclone: function (index) {\r\n\t\t\t\t\t\t\t\tvar cloned = {\r\n\t\t\t\t\t\t\t\t\tindex: (typeof index === 'number' ? index : this.index),\r\n\t\t\t\t\t\t\t\t\tname: this.name,\r\n\t\t\t\t\t\t\t\t\tmtllib: this.mtllib,\r\n\t\t\t\t\t\t\t\t\tsmooth: this.smooth,\r\n\t\t\t\t\t\t\t\t\tgroupStart: 0,\r\n\t\t\t\t\t\t\t\t\tgroupEnd: -1,\r\n\t\t\t\t\t\t\t\t\tgroupCount: -1,\r\n\t\t\t\t\t\t\t\t\tinherited: false\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tcloned.clone = this.clone.bind(cloned);\r\n\t\t\t\t\t\t\t\treturn cloned;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tthis.materials.push(material);\r\n\r\n\t\t\t\t\t\treturn material;\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tcurrentMaterial: function () {\r\n\r\n\t\t\t\t\t\tif (this.materials.length > 0) {\r\n\t\t\t\t\t\t\treturn this.materials[this.materials.length - 1];\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn undefined;\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\t_finalize: function (end) {\r\n\r\n\t\t\t\t\t\tvar lastMultiMaterial = this.currentMaterial();\r\n\t\t\t\t\t\tif (lastMultiMaterial && lastMultiMaterial.groupEnd === -1) {\r\n\r\n\t\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\r\n\t\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\r\n\t\t\t\t\t\t\tlastMultiMaterial.inherited = false;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Ignore objects tail materials if no face declarations followed them before a new o/g started.\r\n\t\t\t\t\t\tif (end && this.materials.length > 1) {\r\n\r\n\t\t\t\t\t\t\tfor (var mi = this.materials.length - 1; mi >= 0; mi--) {\r\n\t\t\t\t\t\t\t\tif (this.materials[mi].groupCount <= 0) {\r\n\t\t\t\t\t\t\t\t\tthis.materials.splice(mi, 1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\r\n\t\t\t\t\t\tif (end && this.materials.length === 0) {\r\n\r\n\t\t\t\t\t\t\tthis.materials.push({\r\n\t\t\t\t\t\t\t\tname: '',\r\n\t\t\t\t\t\t\t\tsmooth: this.smooth\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn lastMultiMaterial;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// Inherit previous objects material.\r\n\t\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\r\n\t\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\r\n\t\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\r\n\t\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\r\n\r\n\t\t\t\tif (previousMaterial && previousMaterial.name && typeof previousMaterial.clone === \"function\") {\r\n\r\n\t\t\t\t\tvar declared = previousMaterial.clone(0);\r\n\t\t\t\t\tdeclared.inherited = true;\r\n\t\t\t\t\tthis.object.materials.push(declared);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.objects.push(this.object);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfinalize: function () {\r\n\r\n\t\t\t\tif (this.object && typeof this.object._finalize === 'function') {\r\n\r\n\t\t\t\t\tthis.object._finalize(true);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tparseVertexIndex: function (value, len) {\r\n\r\n\t\t\t\tvar index = parseInt(value, 10);\r\n\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 3) * 3;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tparseNormalIndex: function (value, len) {\r\n\r\n\t\t\t\tvar index = parseInt(value, 10);\r\n\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 3) * 3;\r\n\r\n\t\t\t},\r\n\r\n\t\t\tparseUVIndex: function (value, len) {\r\n\r\n\t\t\t\tvar index = parseInt(value, 10);\r\n\t\t\t\treturn (index >= 0 ? index - 1 : index + len / 2) * 2;\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddVertex: function (a, b, c) {\r\n\r\n\t\t\t\tvar src = this.vertices;\r\n\t\t\t\tvar dst = this.object.geometry.vertices;\r\n\r\n\t\t\t\tdst.push(src[a + 0]);\r\n\t\t\t\tdst.push(src[a + 1]);\r\n\t\t\t\tdst.push(src[a + 2]);\r\n\t\t\t\tdst.push(src[b + 0]);\r\n\t\t\t\tdst.push(src[b + 1]);\r\n\t\t\t\tdst.push(src[b + 2]);\r\n\t\t\t\tdst.push(src[c + 0]);\r\n\t\t\t\tdst.push(src[c + 1]);\r\n\t\t\t\tdst.push(src[c + 2]);\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddVertexLine: function (a) {\r\n\r\n\t\t\t\tvar src = this.vertices;\r\n\t\t\t\tvar dst = this.object.geometry.vertices;\r\n\r\n\t\t\t\tdst.push(src[a + 0]);\r\n\t\t\t\tdst.push(src[a + 1]);\r\n\t\t\t\tdst.push(src[a + 2]);\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddNormal: function (a, b, c) {\r\n\r\n\t\t\t\tvar src = this.normals;\r\n\t\t\t\tvar dst = this.object.geometry.normals;\r\n\r\n\t\t\t\tdst.push(src[a + 0]);\r\n\t\t\t\tdst.push(src[a + 1]);\r\n\t\t\t\tdst.push(src[a + 2]);\r\n\t\t\t\tdst.push(src[b + 0]);\r\n\t\t\t\tdst.push(src[b + 1]);\r\n\t\t\t\tdst.push(src[b + 2]);\r\n\t\t\t\tdst.push(src[c + 0]);\r\n\t\t\t\tdst.push(src[c + 1]);\r\n\t\t\t\tdst.push(src[c + 2]);\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddUV: function (a, b, c) {\r\n\r\n\t\t\t\tvar src = this.uvs;\r\n\t\t\t\tvar dst = this.object.geometry.uvs;\r\n\r\n\t\t\t\tdst.push(src[a + 0]);\r\n\t\t\t\tdst.push(src[a + 1]);\r\n\t\t\t\tdst.push(src[b + 0]);\r\n\t\t\t\tdst.push(src[b + 1]);\r\n\t\t\t\tdst.push(src[c + 0]);\r\n\t\t\t\tdst.push(src[c + 1]);\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddUVLine: function (a) {\r\n\r\n\t\t\t\tvar src = this.uvs;\r\n\t\t\t\tvar dst = this.object.geometry.uvs;\r\n\r\n\t\t\t\tdst.push(src[a + 0]);\r\n\t\t\t\tdst.push(src[a + 1]);\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddFace: function (a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd) {\r\n\r\n\t\t\t\tvar vLen = this.vertices.length;\r\n\r\n\t\t\t\tvar ia = this.parseVertexIndex(a, vLen);\r\n\t\t\t\tvar ib = this.parseVertexIndex(b, vLen);\r\n\t\t\t\tvar ic = this.parseVertexIndex(c, vLen);\r\n\t\t\t\tvar id;\r\n\r\n\t\t\t\tif (d === undefined) {\r\n\r\n\t\t\t\t\tthis.addVertex(ia, ib, ic);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tid = this.parseVertexIndex(d, vLen);\r\n\r\n\t\t\t\t\tthis.addVertex(ia, ib, id);\r\n\t\t\t\t\tthis.addVertex(ib, ic, id);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (ua !== undefined) {\r\n\r\n\t\t\t\t\tvar uvLen = this.uvs.length;\r\n\r\n\t\t\t\t\tia = this.parseUVIndex(ua, uvLen);\r\n\t\t\t\t\tib = this.parseUVIndex(ub, uvLen);\r\n\t\t\t\t\tic = this.parseUVIndex(uc, uvLen);\r\n\r\n\t\t\t\t\tif (d === undefined) {\r\n\r\n\t\t\t\t\t\tthis.addUV(ia, ib, ic);\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tid = this.parseUVIndex(ud, uvLen);\r\n\r\n\t\t\t\t\t\tthis.addUV(ia, ib, id);\r\n\t\t\t\t\t\tthis.addUV(ib, ic, id);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (na !== undefined) {\r\n\r\n\t\t\t\t\t// Normals are many times the same. If so, skip function call and parseInt.\r\n\t\t\t\t\tvar nLen = this.normals.length;\r\n\t\t\t\t\tia = this.parseNormalIndex(na, nLen);\r\n\r\n\t\t\t\t\tib = na === nb ? ia : this.parseNormalIndex(nb, nLen);\r\n\t\t\t\t\tic = na === nc ? ia : this.parseNormalIndex(nc, nLen);\r\n\r\n\t\t\t\t\tif (d === undefined) {\r\n\r\n\t\t\t\t\t\tthis.addNormal(ia, ib, ic);\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tid = this.parseNormalIndex(nd, nLen);\r\n\r\n\t\t\t\t\t\tthis.addNormal(ia, ib, id);\r\n\t\t\t\t\t\tthis.addNormal(ib, ic, id);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\taddLineGeometry: function (vertices, uvs) {\r\n\r\n\t\t\t\tthis.object.geometry.type = 'Line';\r\n\r\n\t\t\t\tvar vLen = this.vertices.length;\r\n\t\t\t\tvar uvLen = this.uvs.length;\r\n\r\n\t\t\t\tfor (var vi = 0, l = vertices.length; vi < l; vi++) {\r\n\r\n\t\t\t\t\tthis.addVertexLine(this.parseVertexIndex(vertices[vi], vLen));\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var uvi = 0, l = uvs.length; uvi < l; uvi++) {\r\n\r\n\t\t\t\t\tthis.addUVLine(this.parseUVIndex(uvs[uvi], uvLen));\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tstate.startObject('', false);\r\n\r\n\t\treturn state;\r\n\r\n\t}\r\n\r\n\tparse(text) {\r\n\r\n\t\tconsole.time('OBJLoader');\r\n\r\n\t\tvar state = this._createParserState();\r\n\r\n\t\tif (text.indexOf('\\r\\n') !== - 1) {\r\n\r\n\t\t\t// This is faster than String.split with regex that splits on both\r\n\t\t\ttext = text.replace(/\\r\\n/g, '\\n');\r\n\r\n\t\t}\r\n\r\n\t\tif (text.indexOf('\\\\\\n') !== - 1) {\r\n\r\n\t\t\t// join lines separated by a line continuation character (\\)\r\n\t\t\ttext = text.replace(/\\\\\\n/g, '');\r\n\r\n\t\t}\r\n\r\n\t\tvar lines = text.split('\\n');\r\n\t\tvar line = '', lineFirstChar = '', lineSecondChar = '';\r\n\t\tvar lineLength = 0;\r\n\t\tvar result = [];\r\n\r\n\t\t// Faster to just trim left side of the line. Use if available.\r\n\t\tvar trimLeft = (typeof ''.trimLeft === 'function');\r\n\r\n\t\tfor (var i = 0, l = lines.length; i < l; i++) {\r\n\r\n\t\t\tline = lines[i];\r\n\r\n\t\t\tline = trimLeft ? line.trimLeft() : line.trim();\r\n\r\n\t\t\tlineLength = line.length;\r\n\r\n\t\t\tif (lineLength === 0) continue;\r\n\r\n\t\t\tlineFirstChar = line.charAt(0);\r\n\r\n\t\t\t// @todo invoke passed in handler if any\r\n\t\t\tif (lineFirstChar === '#') continue;\r\n\r\n\t\t\tif (lineFirstChar === 'v') {\r\n\r\n\t\t\t\tlineSecondChar = line.charAt(1);\r\n\r\n\t\t\t\tif (lineSecondChar === ' ' && (result = this.regexp.vertex_pattern.exec(line)) !== null) {\r\n\r\n\t\t\t\t\t// 0                  1      2      3\r\n\t\t\t\t\t// [\"v 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\r\n\r\n\t\t\t\t\tstate.vertices.push(\r\n\t\t\t\t\t\tparseFloat(result[1]),\r\n\t\t\t\t\t\tparseFloat(result[2]),\r\n\t\t\t\t\t\tparseFloat(result[3])\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if (lineSecondChar === 'n' && (result = this.regexp.normal_pattern.exec(line)) !== null) {\r\n\r\n\t\t\t\t\t// 0                   1      2      3\r\n\t\t\t\t\t// [\"vn 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\r\n\r\n\t\t\t\t\tstate.normals.push(\r\n\t\t\t\t\t\tparseFloat(result[1]),\r\n\t\t\t\t\t\tparseFloat(result[2]),\r\n\t\t\t\t\t\tparseFloat(result[3])\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if (lineSecondChar === 't' && (result = this.regexp.uv_pattern.exec(line)) !== null) {\r\n\r\n\t\t\t\t\t// 0               1      2\r\n\t\t\t\t\t// [\"vt 0.1 0.2\", \"0.1\", \"0.2\"]\r\n\r\n\t\t\t\t\tstate.uvs.push(\r\n\t\t\t\t\t\tparseFloat(result[1]),\r\n\t\t\t\t\t\tparseFloat(result[2])\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error(\"Unexpected vertex/normal/uv line: '\" + line + \"'\");\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if (lineFirstChar === \"f\") {\r\n\r\n\t\t\t\tif ((result = this.regexp.face_vertex_uv_normal.exec(line)) !== null) {\r\n\r\n\t\t\t\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal\r\n\t\t\t\t\t// 0                        1    2    3    4    5    6    7    8    9   10         11         12\r\n\t\t\t\t\t// [\"f 1/1/1 2/2/2 3/3/3\", \"1\", \"1\", \"1\", \"2\", \"2\", \"2\", \"3\", \"3\", \"3\", undefined, undefined, undefined]\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tresult[1], result[4], result[7], result[10],\r\n\t\t\t\t\t\tresult[2], result[5], result[8], result[11],\r\n\t\t\t\t\t\tresult[3], result[6], result[9], result[12]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if ((result = this.regexp.face_vertex_uv.exec(line)) !== null) {\r\n\r\n\t\t\t\t\t// f vertex/uv vertex/uv vertex/uv\r\n\t\t\t\t\t// 0                  1    2    3    4    5    6   7          8\r\n\t\t\t\t\t// [\"f 1/1 2/2 3/3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tresult[1], result[3], result[5], result[7],\r\n\t\t\t\t\t\tresult[2], result[4], result[6], result[8]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if ((result = this.regexp.face_vertex_normal.exec(line)) !== null) {\r\n\r\n\t\t\t\t\t// f vertex//normal vertex//normal vertex//normal\r\n\t\t\t\t\t// 0                     1    2    3    4    5    6   7          8\r\n\t\t\t\t\t// [\"f 1//1 2//2 3//3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tresult[1], result[3], result[5], result[7],\r\n\t\t\t\t\t\tundefined, undefined, undefined, undefined,\r\n\t\t\t\t\t\tresult[2], result[4], result[6], result[8]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else if ((result = this.regexp.face_vertex.exec(line)) !== null) {\r\n\r\n\t\t\t\t\t// f vertex vertex vertex\r\n\t\t\t\t\t// 0            1    2    3   4\r\n\t\t\t\t\t// [\"f 1 2 3\", \"1\", \"2\", \"3\", undefined]\r\n\r\n\t\t\t\t\tstate.addFace(\r\n\t\t\t\t\t\tresult[1], result[2], result[3], result[4]\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthrow new Error(\"Unexpected face line: '\" + line + \"'\");\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if (lineFirstChar === \"l\") {\r\n\r\n\t\t\t\tvar lineParts = line.substring(1).trim().split(\" \");\r\n\t\t\t\tvar lineVertices = [], lineUVs = [];\r\n\r\n\t\t\t\tif (line.indexOf(\"/\") === - 1) {\r\n\r\n\t\t\t\t\tlineVertices = lineParts;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor (var li = 0, llen = lineParts.length; li < llen; li++) {\r\n\r\n\t\t\t\t\t\tvar parts = lineParts[li].split(\"/\");\r\n\r\n\t\t\t\t\t\tif (parts[0] !== \"\") lineVertices.push(parts[0]);\r\n\t\t\t\t\t\tif (parts[1] !== \"\") lineUVs.push(parts[1]);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tstate.addLineGeometry(lineVertices, lineUVs);\r\n\r\n\t\t\t} else if ((result = this.regexp.object_pattern.exec(line)) !== null) {\r\n\r\n\t\t\t\t// o object_name\r\n\t\t\t\t// or\r\n\t\t\t\t// g group_name\r\n\r\n\t\t\t\t// WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\r\n\t\t\t\t// var name = result[ 0 ].substr( 1 ).trim();\r\n\t\t\t\tvar name = (\" \" + result[0].substr(1).trim()).substr(1);\r\n\r\n\t\t\t\tstate.startObject(name);\r\n\r\n\t\t\t} else if (this.regexp.material_use_pattern.test(line)) {\r\n\r\n\t\t\t\t// material\r\n\r\n\t\t\t\tstate.object.startMaterial(line.substring(7).trim(), state.materialLibraries);\r\n\r\n\t\t\t} else if (this.regexp.material_library_pattern.test(line)) {\r\n\r\n\t\t\t\t// mtl file\r\n\r\n\t\t\t\tstate.materialLibraries.push(line.substring(7).trim());\r\n\r\n\t\t\t} else if ((result = this.regexp.smoothing_pattern.exec(line)) !== null) {\r\n\r\n\t\t\t\t// smooth shading\r\n\r\n\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\r\n\t\t\t\t// but does not define a usemtl for each face set.\r\n\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\r\n\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\r\n\t\t\t\t// where explicit usemtl defines geometry groups.\r\n\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\r\n\r\n\t\t\t\tvar value = result[1].trim().toLowerCase();\r\n\t\t\t\tstate.object.smooth = (value === '1' || value === 'on');\r\n\r\n\t\t\t\tvar material = state.object.currentMaterial();\r\n\t\t\t\tif (material) {\r\n\r\n\t\t\t\t\tmaterial.smooth = state.object.smooth;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Handle null terminated files without exception\r\n\t\t\t\tif (line === '\\0') continue;\r\n\r\n\t\t\t\tthrow new Error(\"Unexpected line: '\" + line + \"'\");\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.finalize();\r\n\r\n\t\tvar container = new THREE.Group();\r\n\t\tcontainer.materialLibraries = [].concat(state.materialLibraries);\r\n\r\n\t\tfor (var i = 0, l = state.objects.length; i < l; i++) {\r\n\r\n\t\t\tvar object = state.objects[i];\r\n\t\t\tvar geometry = object.geometry;\r\n\t\t\tvar materials = object.materials;\r\n\t\t\tvar isLine = (geometry.type === 'Line');\r\n\r\n\t\t\t// Skip o/g line declarations that did not follow with any faces\r\n\t\t\tif (geometry.vertices.length === 0) continue;\r\n\r\n\t\t\tvar buffergeometry = new THREE.BufferGeometry();\r\n\r\n\t\t\tbuffergeometry.addAttribute('position', new THREE.BufferAttribute(new Float32Array(geometry.vertices), 3));\r\n\r\n\t\t\tif (geometry.normals.length > 0) {\r\n\r\n\t\t\t\tbuffergeometry.addAttribute('normal', new THREE.BufferAttribute(new Float32Array(geometry.normals), 3));\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbuffergeometry.computeVertexNormals();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (geometry.uvs.length > 0) {\r\n\r\n\t\t\t\tbuffergeometry.addAttribute('uv', new THREE.BufferAttribute(new Float32Array(geometry.uvs), 2));\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Create materials\r\n\r\n\t\t\tvar createdMaterials = [];\r\n\r\n\t\t\tfor (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\r\n\r\n\t\t\t\tvar sourceMaterial = materials[mi];\r\n\t\t\t\tvar material = undefined;\r\n\r\n\t\t\t\tif (this.materials !== null) {\r\n\r\n\t\t\t\t\tmaterial = this.materials.create(sourceMaterial.name);\r\n\r\n\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\r\n\t\t\t\t\tif (isLine && material && !(material instanceof THREE.LineBasicMaterial)) {\r\n\r\n\t\t\t\t\t\tvar materialLine = new THREE.LineBasicMaterial();\r\n\t\t\t\t\t\tmaterialLine.copy(material);\r\n\t\t\t\t\t\tmaterial = materialLine;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!material) {\r\n\r\n\t\t\t\t\tmaterial = (!isLine ? new THREE.MeshPhongMaterial() : new THREE.LineBasicMaterial());\r\n\t\t\t\t\tmaterial.name = sourceMaterial.name;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmaterial.flatShading = sourceMaterial.smooth ? THREE.SmoothShading : THREE.FlatShading;\r\n\r\n\t\t\t\tcreatedMaterials.push(material);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Create mesh\r\n\r\n\t\t\tvar mesh;\r\n\r\n\t\t\tif (createdMaterials.length > 1) {\r\n\r\n\t\t\t\tfor (var mi = 0, miLen = materials.length; mi < miLen; mi++) {\r\n\r\n\t\t\t\t\tvar sourceMaterial = materials[mi];\r\n\t\t\t\t\tbuffergeometry.addGroup(sourceMaterial.groupStart, sourceMaterial.groupCount, mi);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tmesh = (!isLine ? new THREE.Mesh(buffergeometry, createdMaterials) : new THREE.LineSegments(buffergeometry, createdMaterials));\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmesh = (!isLine ? new THREE.Mesh(buffergeometry, createdMaterials[0]) : new THREE.LineSegments(buffergeometry, createdMaterials[0]));\r\n\t\t\t}\r\n\r\n\t\t\tmesh.name = object.name;\r\n\r\n\t\t\tcontainer.add(mesh);\r\n\r\n\t\t}\r\n\r\n\t\tconsole.timeEnd('OBJLoader');\r\n\r\n\t\treturn container;\r\n\r\n\t}\r\n\r\n}\r\nexport default OBJLoader;","/**\r\n * Loads a Wavefront .mtl file specifying materials\r\n *\r\n * @author angelxuanchang\r\n * edited by lucascassiano as an ES6 module - http://lucascassiano.github.io\r\n */\r\nimport * as THREE from 'three';\r\n\r\nclass MTLLoader {\r\n\r\n\tconstructor(manager) {\r\n\t\tthis.manager = (manager !== undefined) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Loads and parses a MTL asset from a URL.\r\n\t *\r\n\t * @param {String} url - URL to the MTL file.\r\n\t * @param {Function} [onLoad] - Callback invoked with the loaded object.\r\n\t * @param {Function} [onProgress] - Callback for download progress.\r\n\t * @param {Function} [onError] - Callback for download errors.\r\n\t *\r\n\t * @see setPath setTexturePath\r\n\t *\r\n\t * @note In order for relative texture references to resolve correctly\r\n\t * you must call setPath and/or setTexturePath explicitly prior to load.\r\n\t */\r\n\tload(url, onLoad, onProgress, onError) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.FileLoader(this.manager);\r\n\t\tloader.setPath(this.path);\r\n\t\tloader.load(url, function (text) {\r\n\r\n\t\t\tonLoad(scope.parse(text));\r\n\r\n\t\t}, onProgress, onError);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Set base path for resolving references.\r\n\t * If set this path will be prepended to each loaded and found reference.\r\n\t *\r\n\t * @see setTexturePath\r\n\t * @param {String} path\r\n\t *\r\n\t * @example\r\n\t *     mtlLoader.setPath( 'assets/obj/' );\r\n\t *     mtlLoader.load( 'my.mtl', ... );\r\n\t */\r\n\tsetPath(path) {\r\n\t\tthis.path = path;\r\n\t}\r\n\r\n\t/**\r\n\t * Set base path for resolving texture references.\r\n\t * If set this path will be prepended found texture reference.\r\n\t * If not set and setPath is, it will be used as texture base path.\r\n\t *\r\n\t * @see setPath\r\n\t * @param {String} path\r\n\t *\r\n\t * @example\r\n\t *     mtlLoader.setPath( 'assets/obj/' );\r\n\t *     mtlLoader.setTexturePath( 'assets/textures/' );\r\n\t *     mtlLoader.load( 'my.mtl', ... );\r\n\t */\r\n\tsetTexturePath(path) {\r\n\r\n\t\tthis.texturePath = path;\r\n\r\n\t}\r\n\r\n\tsetBaseUrl(path) {\r\n\r\n\t\tconsole.warn('THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead.');\r\n\r\n\t\tthis.setTexturePath(path);\r\n\r\n\t}\r\n\r\n\tsetCrossOrigin(value) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n\tsetMaterialOptions(value) {\r\n\r\n\t\tthis.materialOptions = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Parses a MTL file.\r\n\t *\r\n\t * @param {String} text - Content of MTL file\r\n\t * @return {THREE.MTLLoader.MaterialCreator}\r\n\t *\r\n\t * @see setPath setTexturePath\r\n\t *\r\n\t * @note In order for relative texture references to resolve correctly\r\n\t * you must call setPath and/or setTexturePath explicitly prior to parse.\r\n\t */\r\n\tparse(text) {\r\n\r\n\t\tvar lines = text.split('\\n');\r\n\t\tvar info = {};\r\n\t\tvar delimiter_pattern = /\\s+/;\r\n\t\tvar materialsInfo = {};\r\n\r\n\t\tfor (var i = 0; i < lines.length; i++) {\r\n\r\n\t\t\tvar line = lines[i];\r\n\t\t\tline = line.trim();\r\n\r\n\t\t\tif (line.length === 0 || line.charAt(0) === '#') {\r\n\r\n\t\t\t\t// Blank line or comment ignore\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar pos = line.indexOf(' ');\r\n\r\n\t\t\tvar key = (pos >= 0) ? line.substring(0, pos) : line;\r\n\t\t\tkey = key.toLowerCase();\r\n\r\n\t\t\tvar value = (pos >= 0) ? line.substring(pos + 1) : '';\r\n\t\t\tvalue = value.trim();\r\n\r\n\t\t\tif (key === 'newmtl') {\r\n\r\n\t\t\t\t// New material\r\n\r\n\t\t\t\tinfo = { name: value };\r\n\t\t\t\tmaterialsInfo[value] = info;\r\n\r\n\t\t\t} else if (info) {\r\n\r\n\t\t\t\tif (key === 'ka' || key === 'kd' || key === 'ks') {\r\n\r\n\t\t\t\t\tvar ss = value.split(delimiter_pattern, 3);\r\n\t\t\t\t\tinfo[key] = [parseFloat(ss[0]), parseFloat(ss[1]), parseFloat(ss[2])];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tinfo[key] = value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar materialCreator = new MaterialCreator(this.texturePath || this.path, this.materialOptions);\r\n\t\tmaterialCreator.setCrossOrigin(this.crossOrigin);\r\n\t\tmaterialCreator.setManager(this.manager);\r\n\t\tmaterialCreator.setMaterials(materialsInfo);\r\n\t\treturn materialCreator;\r\n\r\n\t}\r\n}\r\n\r\nclass MaterialCreator {\r\n\tconstructor(baseUrl, options) {\r\n\r\n\t\tthis.baseUrl = baseUrl || '';\r\n\t\tthis.options = options;\r\n\t\tthis.materialsInfo = {};\r\n\t\tthis.materials = {};\r\n\t\tthis.materialsArray = [];\r\n\t\tthis.nameLookup = {};\r\n\r\n\t\tthis.side = (this.options && this.options.side) ? this.options.side : THREE.FrontSide;\r\n\t\tthis.wrap = (this.options && this.options.wrap) ? this.options.wrap : THREE.RepeatWrapping;\r\n\r\n\t}\r\n\r\n\tcrossOrigin = 'Anonymous';\r\n\r\n\tsetCrossOrigin(value) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n\tsetManager(value) {\r\n\r\n\t\tthis.manager = value;\r\n\r\n\t}\r\n\r\n\tsetMaterials(materialsInfo) {\r\n\r\n\t\tthis.materialsInfo = this.convert(materialsInfo);\r\n\t\tthis.materials = {};\r\n\t\tthis.materialsArray = [];\r\n\t\tthis.nameLookup = {};\r\n\r\n\t}\r\n\r\n\tconvert(materialsInfo) {\r\n\r\n\t\tif (!this.options) return materialsInfo;\r\n\r\n\t\tvar converted = {};\r\n\r\n\t\tfor (var mn in materialsInfo) {\r\n\r\n\t\t\t// Convert materials info into normalized form based on options\r\n\r\n\t\t\tvar mat = materialsInfo[mn];\r\n\r\n\t\t\tvar covmat = {};\r\n\r\n\t\t\tconverted[mn] = covmat;\r\n\r\n\t\t\tfor (var prop in mat) {\r\n\r\n\t\t\t\tvar save = true;\r\n\t\t\t\tvar value = mat[prop];\r\n\t\t\t\tvar lprop = prop.toLowerCase();\r\n\r\n\t\t\t\tswitch (lprop) {\r\n\r\n\t\t\t\t\tcase 'kd':\r\n\t\t\t\t\tcase 'ka':\r\n\t\t\t\t\tcase 'ks':\r\n\r\n\t\t\t\t\t\t// Diffuse color (color under white light) using RGB values\r\n\r\n\t\t\t\t\t\tif (this.options && this.options.normalizeRGB) {\r\n\r\n\t\t\t\t\t\t\tvalue = [value[0] / 255, value[1] / 255, value[2] / 255];\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (this.options && this.options.ignoreZeroRGBs) {\r\n\r\n\t\t\t\t\t\t\tif (value[0] === 0 && value[1] === 0 && value[2] === 0) {\r\n\r\n\t\t\t\t\t\t\t\t// ignore\r\n\r\n\t\t\t\t\t\t\t\tsave = false;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (save) {\r\n\r\n\t\t\t\t\tcovmat[lprop] = value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn converted;\r\n\r\n\t}\r\n\r\n\tpreload() {\r\n\r\n\t\tfor (var mn in this.materialsInfo) {\r\n\r\n\t\t\tthis.create(mn);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgetIndex(materialName) {\r\n\r\n\t\treturn this.nameLookup[materialName];\r\n\r\n\t}\r\n\r\n\tgetAsArray() {\r\n\r\n\t\tvar index = 0;\r\n\r\n\t\tfor (var mn in this.materialsInfo) {\r\n\r\n\t\t\tthis.materialsArray[index] = this.create(mn);\r\n\t\t\tthis.nameLookup[mn] = index;\r\n\t\t\tindex++;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.materialsArray;\r\n\r\n\t}\r\n\r\n\tcreate(materialName) {\r\n\r\n\t\tif (this.materials[materialName] === undefined) {\r\n\r\n\t\t\tthis.createMaterial_(materialName);\r\n\r\n\t\t}\r\n\r\n\t\treturn this.materials[materialName];\r\n\r\n\t}\r\n\r\n\tcreateMaterial_(materialName) {\r\n\r\n\t\t// Create material\r\n\r\n\t\tvar scope = this;\r\n\t\tvar mat = this.materialsInfo[materialName];\r\n\t\tvar params = {\r\n\r\n\t\t\tname: materialName,\r\n\t\t\tside: this.side\r\n\r\n\t\t};\r\n\r\n\t\tfunction resolveURL(baseUrl, url) {\r\n\r\n\t\t\tif (typeof url !== 'string' || url === '')\r\n\t\t\t\treturn '';\r\n\r\n\t\t\t// Absolute URL\r\n\t\t\tif (/^https?:\\/\\//i.test(url)) return url;\r\n\r\n\t\t\treturn baseUrl + url;\r\n\r\n\t\t}\r\n\r\n\t\tfunction setMapForType(mapType, value) {\r\n\r\n\t\t\tif (params[mapType]) return; // Keep the first encountered texture\r\n\r\n\t\t\tvar texParams = scope.getTextureParams(value, params);\r\n\t\t\tvar map = scope.loadTexture(resolveURL(scope.baseUrl, texParams.url));\r\n\r\n\t\t\tmap.repeat.copy(texParams.scale);\r\n\t\t\tmap.offset.copy(texParams.offset);\r\n\r\n\t\t\tmap.wrapS = scope.wrap;\r\n\t\t\tmap.wrapT = scope.wrap;\r\n\r\n\t\t\tparams[mapType] = map;\r\n\r\n\t\t}\r\n\r\n\t\tfor (var prop in mat) {\r\n\r\n\t\t\tvar value = mat[prop];\r\n\t\t\tvar n;\r\n\r\n\t\t\tif (value === '') continue;\r\n\r\n\t\t\tswitch (prop.toLowerCase()) {\r\n\r\n\t\t\t\t// Ns is material specular exponent\r\n\r\n\t\t\t\tcase 'kd':\r\n\r\n\t\t\t\t\t// Diffuse color (color under white light) using RGB values\r\n\r\n\t\t\t\t\tparams.color = new THREE.Color().fromArray(value);\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ks':\r\n\r\n\t\t\t\t\t// Specular color (color when light is reflected from shiny surface) using RGB values\r\n\t\t\t\t\tparams.specular = new THREE.Color().fromArray(value);\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'map_kd':\r\n\r\n\t\t\t\t\t// Diffuse texture map\r\n\r\n\t\t\t\t\tsetMapForType(\"map\", value);\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'map_ks':\r\n\r\n\t\t\t\t\t// Specular map\r\n\r\n\t\t\t\t\tsetMapForType(\"specularMap\", value);\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'norm':\r\n\r\n\t\t\t\t\tsetMapForType(\"normalMap\", value);\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'map_bump':\r\n\t\t\t\tcase 'bump':\r\n\r\n\t\t\t\t\t// Bump texture map\r\n\r\n\t\t\t\t\tsetMapForType(\"bumpMap\", value);\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ns':\r\n\r\n\t\t\t\t\t// The specular exponent (defines the focus of the specular highlight)\r\n\t\t\t\t\t// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.\r\n\r\n\t\t\t\t\tparams.shininess = parseFloat(value);\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'd':\r\n\t\t\t\t\tn = parseFloat(value);\r\n\r\n\t\t\t\t\tif (n < 1) {\r\n\r\n\t\t\t\t\t\tparams.opacity = n;\r\n\t\t\t\t\t\tparams.transparent = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'tr':\r\n\t\t\t\t\tn = parseFloat(value);\r\n\r\n\t\t\t\t\tif (n > 0) {\r\n\r\n\t\t\t\t\t\tparams.opacity = 1 - n;\r\n\t\t\t\t\t\tparams.transparent = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.materials[materialName] = new THREE.MeshPhongMaterial(params);\r\n\t\treturn this.materials[materialName];\r\n\r\n\t}\r\n\r\n\tgetTextureParams(value, matParams) {\r\n\r\n\t\tvar texParams = {\r\n\r\n\t\t\tscale: new THREE.Vector2(1, 1),\r\n\t\t\toffset: new THREE.Vector2(0, 0)\r\n\r\n\t\t};\r\n\r\n\t\tvar items = value.split(/\\s+/);\r\n\t\tvar pos;\r\n\r\n\t\tpos = items.indexOf('-bm');\r\n\r\n\t\tif (pos >= 0) {\r\n\r\n\t\t\tmatParams.bumpScale = parseFloat(items[pos + 1]);\r\n\t\t\titems.splice(pos, 2);\r\n\r\n\t\t}\r\n\r\n\t\tpos = items.indexOf('-s');\r\n\r\n\t\tif (pos >= 0) {\r\n\r\n\t\t\ttexParams.scale.set(parseFloat(items[pos + 1]), parseFloat(items[pos + 2]));\r\n\t\t\titems.splice(pos, 4); // we expect 3 parameters here!\r\n\r\n\t\t}\r\n\r\n\t\tpos = items.indexOf('-o');\r\n\r\n\t\tif (pos >= 0) {\r\n\r\n\t\t\ttexParams.offset.set(parseFloat(items[pos + 1]), parseFloat(items[pos + 2]));\r\n\t\t\titems.splice(pos, 4); // we expect 3 parameters here!\r\n\r\n\t\t}\r\n\r\n\t\ttexParams.url = items.join(' ').trim();\r\n\t\treturn texParams;\r\n\r\n\t}\r\n\r\n\tloadTexture(url, mapping, onLoad, onProgress, onError) {\r\n\r\n\t\tvar texture;\r\n\t\tvar loader = THREE.Loader.Handlers.get(url);\r\n\t\tvar manager = (this.manager !== undefined) ? this.manager : THREE.DefaultLoadingManager;\r\n\r\n\t\tif (loader === null) {\r\n\r\n\t\t\tloader = new THREE.TextureLoader(manager);\r\n\r\n\t\t}\r\n\r\n\t\tif (loader.setCrossOrigin) loader.setCrossOrigin(this.crossOrigin);\r\n\t\ttexture = loader.load(url, onLoad, onProgress, onError);\r\n\r\n\t\tif (mapping !== undefined) texture.mapping = mapping;\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport default MTLLoader;","/*\r\n * @Author: zy9@github.com/zy410419243\r\n * @Date: 2018-04-24 15:33:50\r\n * @Last Modified by: zy9\r\n * @Last Modified time: 2018-07-13 11:40:39\r\n */\r\nimport * as THREE from 'three';\r\nimport MTLLoader from '../loader/MTLLoader';\r\nimport OBJLoader from '../loader/OBJLoader';\r\nimport OrbitControls from 'three-orbitcontrols';\r\nimport TWEEN from 'tween';\r\nimport extend from '../util/DeepClone';\r\n\r\nexport default class Trunk {\r\n    // 默认配置\r\n    config = {\r\n        // clear_color: 0x4584b4, // 画布颜色\r\n        clear_opacity: 0.2, // 画布透明度\r\n        mesh_shift_time: () => Math.random() * 1000 * 5 + 1000, // 板块移动时间\r\n        before_init: null, // 初始化前的钩子\r\n        border_visible: true, // 边界是否显示\r\n        divisor: 100, // 控制柱子高度，该数越大，柱子越矮\r\n        camera_position: { x: 0, y: 0, z: 65 }, // 相机position中的z\r\n        after_rotation: -Math.PI / 4, // 开场动画后视角旋转角度\r\n        rotation_speed: 0.02, // 开场动画后视角旋转速度\r\n        texture: {\r\n            line: '#055290', // 内部乡镇边界贴图\r\n            pillar: '#2377e8', // 柱子贴图\r\n            top: '#07205b', // 上表面贴图\r\n            bottom: '#000', // 底部贴图\r\n            border: '#2a8fdf', // 边缘边界贴图\r\n            select: '#071C5B', // 鼠标移入时贴图\r\n        },\r\n        light: () => { // x轴正方向是屏幕右边，y轴正方向是屏幕里边，z轴正方向是屏幕上边\r\n            let lights = [];\r\n\r\n            lights.push(new HemisphereLight(16777215, 16777215, 0.3));\r\n\r\n            return lights;\r\n        },\r\n        controls: {\r\n            maxPolarAngle: Math.PI * 0.75,\r\n            minPolarAngle: Math.PI * 0.25,\r\n        },\r\n        clientWidth: document.documentElement.clientWidth || document.body.clientWidth,\r\n        clientHeight: document.documentElement.clientHeight || document.body.clientHeight\r\n    };\r\n\r\n    _startPositions = {};\r\n    _startTweenCount = 0;\r\n\r\n    // 柱子高度变化的定时器\r\n    _intervals = {};\r\n\r\n    // 鼠标移入板块高亮\r\n    _old = {};\r\n    _current = {};\r\n\r\n    /* \r\n        渲染模型容器,相当于对div进行appendChild\r\n        这里具体干的是往scene里加Object3D，然后所有模型都放在Object3D对象里\r\n        原因是scene上不能直接渲染Mesh啊Group之类的对象，需要这么个载体\r\n    */\r\n    root = {};\r\n\r\n    // 标识模型是否移动过\r\n    _withdrawPosition = false;\r\n    \r\n    // 模型数据\r\n    dataObject = {};\r\n    \r\n    // 多次用到容器节点，存到全局变量里方便调用\r\n    container = {};\r\n\r\n    // 整个模块的贴图，用作等值面\r\n    model_texture = {};\r\n\r\n    // 初始化three渲染三要素\r\n    camera = null;\r\n    renderer = null;\r\n    scene = null;\r\n\r\n    // 轨道控制\r\n    controls = null;\r\n\r\n    // 初始化开场动画前板块位置\r\n    _initAreaPosition = (area, child) => {\r\n        let { _startPositions } = this;\r\n\r\n        let p = _startPositions[area];\r\n\r\n        this.config.before_animate && this.config.before_animate(child);\r\n\r\n        if(!p) {\r\n            p = {\r\n                x: Math.random() * 1000 - 500,\r\n                y: Math.random() * 1000 - 500,\r\n                z: Math.random() > 0.5 ? (Math.random() * 200 + 300) : (-Math.random() * 500 - 1000)\r\n            };\r\n            _startPositions[area] = p;\r\n        }\r\n        child.position.set(p.x, p.y, p.z);\r\n    }\r\n\r\n    // 处理开场动画参数\r\n    _dealObjectInLoadCirculStart = (child, visible) => {\r\n        if(!child.name) {\r\n            return;\r\n        }\r\n        // 设置上下边界是否显示\r\n        if(/border$/.test(child.name)) {\r\n            child.visible = visible;\r\n        }\r\n\r\n        if(child instanceof THREE.Mesh) {\r\n            let area = child.name.split('_')[0];\r\n            this._initAreaPosition(area, child);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 处理柱子渲染\r\n     * @param child 当前遍历模型对象\r\n     * @param divisor 计算柱子高度，柱子高度 = 当前模型中数据 / divisor * 15，也就是说divisor越小，柱子越高\r\n    */\r\n    _changeModel4DataRefresh = (child, divisor) => {\r\n        let name = child.name;\r\n        \r\n        if(/pillar$/.test(name)) {\r\n            let dmName = name.split('_')[0];\r\n            let data = child.userData.val;\r\n            if(dmName) {\r\n                let height = 0;\r\n                let proportion = 0;\r\n\r\n                if(divisor && 0 !== divisor) {\r\n                    proportion = data / divisor;\r\n                    height = proportion * 15;\r\n                }\r\n\r\n                // 不支持负数，但万一传了负数，暂按0处理\r\n                if(height <= 0) {\r\n                    child.visible = false;\r\n                } else {\r\n                    this._setHeightSlow(child, height);\r\n                    child.visible = true;\r\n                }\r\n            } else {\r\n                dmName = name ? name.split('_')[0] : '';\r\n                // TODO 与上面height <= 0重复，代码需精简\r\n                child.visible = false;\r\n            }\r\n        }\r\n    };\r\n    \r\n    /**\r\n     * 设置柱子高度（缓慢变高，高度从1开始变到指定高度）\r\n     * 这个方法不要加太多逻辑，这里我试着在循环里console.log，渣电脑甚至能掉帧\r\n     * @param child\r\n     * @param height\r\n     * @private\r\n     */\r\n    _setHeightSlow = (child, height) => {\r\n        this._setHeight(child, 1);\r\n        let i = 1;\r\n        let sh;\r\n        // 柱子高度上升速度\r\n        let times = 300;\r\n\r\n        const show = () => {\r\n            if(i < times) {\r\n                let h = Math.floor(height * i / times);\r\n                this._setHeight(child, h);\r\n                i++;\r\n            } else if(i === times) {\r\n                i++;\r\n                this._setHeight(child, height);\r\n            } else {\r\n                clearInterval(sh);\r\n                delete this._intervals[sh];\r\n            }\r\n        }\r\n\r\n        sh = setInterval(show, () => {});\r\n        this._intervals[sh] = sh;\r\n    };\r\n    \r\n    /**\r\n     * 设置柱子高度\r\n     * 这个方法不要加太多逻辑，这里我试着在循环里console.log，渣电脑甚至能掉帧\r\n     * @param child\r\n     * @param height\r\n     * @private\r\n     */\r\n    _setHeight = (child, height) => {\r\n        if(height === 0 || isNaN(height)) {\r\n            // 不能高度设置为0，否则下一次设置的时候会出问题，\r\n            height = 1;\r\n        }\r\n        let geometry = child.geometry;\r\n\r\n        geometry.verticesNeedUpdate = true;\r\n\r\n        let vertices = geometry.vertices;\r\n\r\n        /* \r\n            此处应该当有掌声，当然可能是写的人的特有感慨\r\n            这里区分了顶面和底面的点，前提是给的模型数据里的柱子高度不能为0\r\n\r\n            下面这段代码看上去简单，但领悟到顶面和底面不能在同一个面上,否则就区分不出的痛整整花了一天时间\r\n\r\n            这里先区分z，不是特别花俏的柱子一般只有六个面八个点两种z\r\n            然后底面的z不变，顶面的z加高度\r\n        */\r\n        let minz = vertices[0].z;\r\n        for (let vertice of vertices) {\r\n            let z = vertice.z;\r\n            if(minz != z) {\r\n                minz = Math.min(z, minz);\r\n                break;\r\n            }\r\n        }\r\n        for (let vertice of vertices) {\r\n            if(vertice.z !== minz) {\r\n                vertice.z = minz + height;\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 事件绑定\r\n     * @private\r\n     * @param config 模型配置文件\r\n     * @param object .obj文件，所有模型数据。这里得注意跟child的区别，变量名写惯了都是object..\r\n     */\r\n    _initListener = object => {\r\n        this.container.addEventListener('mousemove', e => this._setMeshHighLightStatus(e), false);\r\n\r\n        this.container.addEventListener('click', e => this._showDetail(e, object), false);\r\n    };\r\n    \r\n    /* \r\n        改变板块的高亮状态\r\n\r\n        鼠标移上去，如果是板块，那改变该板块材质中的颜色\r\n        移开后恢复原来的材质\r\n        得注意边界线也是种模型，需要额外判断\r\n    */\r\n    _setMeshHighLightStatus = event => {\r\n        const { config } = this;\r\n        let intersected = this._objectFromMouse(event.pageX, event.pageY);\r\n        let child = intersected.object;\r\n\r\n        let texture = config.texture;\r\n\r\n        // 设置/移除高亮\r\n        if(child) {\r\n            let uuid = this._current && this._current.uuid;\r\n            if(uuid === child.uuid) {\r\n                return;\r\n            } else {\r\n                if(!child.name.includes('border') && !child.name.includes('line') && !child.name.includes('pillar') && !child.name.includes('texture') && !child.name.includes('river')) {\r\n                    if(!uuid) { // 第一次\r\n                        this._current = child;\r\n                        \r\n                        // 鼠标移入设置移入的颜色\r\n                        child.material.color.set(texture.select);\r\n                    } else {\r\n                        // 鼠标移开设置原先表面的颜色\r\n                        this._current.material.color.set(texture.top);\r\n                            \r\n                        this._old = this._current;\r\n                        this._current = child;\r\n\r\n                        // 鼠标移入设置移入的颜色\r\n                        child.material.color.set(texture.select);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // 点击板块，板块左移，右边空出来的地方显示表格\r\n    _showDetail = (event, object) => {\r\n        const { config } = this;\r\n        event.preventDefault();\r\n\r\n        let intersected = this._objectFromMouse(event.pageX, event.pageY);\r\n        let child = intersected.object;\r\n\r\n        if(child) {\r\n            // 右侧表格数据的显示\r\n            if(config.show_detail) {\r\n                let flag = config.show_detail(child);\r\n                this._meshMove(!!flag, object);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 获得鼠标位置的板块模型对象\r\n    _objectFromMouse = (pagex, pagey) => {\r\n        let { container } = this;\r\n        const { offsetLeft, offsetTop } = this.renderer.domElement;\r\n\r\n        let eltx = pagex - offsetLeft;\r\n        let elty = pagey - offsetTop;\r\n\r\n        let vpx = (eltx / container.offsetWidth) * 2 - 1;\r\n        let vpy = -(elty / container.offsetHeight) * 2 + 1;\r\n        let vector = new THREE.Vector2(vpx, vpy);\r\n        let raycaster = new THREE.Raycaster();\r\n\r\n        raycaster.setFromCamera(vector, this.camera);\r\n\r\n        let intersects = raycaster.intersectObjects(this.root.children, true);\r\n\r\n        if(intersects.length > 0) {\r\n            let intersect = intersects[0];\r\n            if(intersect) {\r\n                return intersect;\r\n            }\r\n        }\r\n\r\n        return { object: null, point: null, face: null };\r\n    }\r\n\r\n    // 获得元素相对整个页面的偏移量\r\n    _getOffset = (node, offset) => {\r\n        if(!offset) {\r\n            offset = {};\r\n            offset.top = 0;\r\n            offset.left = 0;\r\n        }\r\n\r\n        if(node == document.body) { // 当该节点为body节点时，结束递归\r\n            return offset;\r\n        }\r\n\r\n        offset.top += node.offsetTop;\r\n        offset.left += node.offsetLeft;\r\n\r\n        return this._getOffset(node.parentNode, offset); // 向上累加offset里的值\r\n    }\r\n\r\n    /**\r\n     * 整个模型漂移\r\n     * 如果withdraw为true，表示需要把模型移开，即从中心点向左移\r\n     *\r\n     * 如果withdraw为false，表示需要还原至中心\r\n     * @param withdraw 是否移开\r\n     * @private\r\n     */\r\n    _meshMove = (withdraw, object) => {\r\n        let { camera, renderer, container, getMeshWidth, _getCoordinate2InScene, config } = this;\r\n        let point = { x: 0, y: 0, z: 0 };\r\n        let rotation = { x: -Math.PI / 4, y: 0, z: 0 };\r\n\r\n        if(withdraw) {\r\n            rotation = { x: -Math.PI / 4, y: Math.PI / 180 * 10, z: 0 };\r\n            \r\n            // 默认配比是500 * 300的设置\r\n            let gap = container.clientWidth / 550;\r\n            // 算移开的位置，移开的位置是固定的，只算一遍\r\n            if(!this._withdrawPosition) {\r\n                this._withdrawPosition = _getCoordinate2InScene({\r\n                    x: 30 * gap,\r\n                    y: renderer.domElement.offsetHeight / 2\r\n                }, camera, renderer.domElement);\r\n\r\n                // 避免飞出画布\r\n                this._withdrawPosition.x += getMeshWidth(object).length / 4;\r\n                \r\n                this._tweenInOut(camera.position, { z: 80 }, 1000);\r\n            }\r\n            point = this._withdrawPosition;\r\n\r\n            this._tweenInOut(object.position, point, 1000);\r\n        } else {\r\n            /* 在开场动画结束后，模型需要填满整个页面，但点击板块显示详情时会出现空间不够的情况\r\n            于是这里除了改变模型水平位置，还需要改变相机位置给详情腾地方\r\n            \r\n            至于为什么不改变模型的z...因为还有个轨道控制。如果改变了y，但模型仍旧是照着x轴旋转的，\r\n            这就会造成模型转出屏幕的问题*/\r\n            this._tweenInOut(camera.position, config.camera_position, 1000);\r\n            this._tweenInOut(object.position, point, 1000);\r\n\r\n            this._withdrawPosition = null;\r\n        }\r\n    }\r\n    \r\n    // 获得模型宽度\r\n    getMeshWidth = object => {\r\n        let c = 16711680, length = 0, width = 0, height = 0;\r\n        let boxHelper = new THREE.BoxHelper(object, c);\r\n        let box = new THREE.Box3().setFromObject(object);\r\n\r\n        boxHelper.update();\r\n\r\n        length = box.max.x - box.min.x;\r\n        width = box.max.y - box.min.y;\r\n        height = box.max.z - box.min.z;\r\n\r\n        return { length, width, height };\r\n    }\r\n\r\n    // 定义各板块移动速度\r\n    _handle_model_shift = child => {\r\n        let { _startPositions, config } = this;\r\n\r\n        let name = child.name.split('_');\r\n        let last_name = name[name.length - 1];\r\n        let area = name[0];\r\n        \r\n        if(!_startPositions[area]) {\r\n            return;\r\n        }\r\n\r\n        return config.mesh_shift_time && config.mesh_shift_time();\r\n    }\r\n\r\n    /**\r\n     * 遍历所有模型对象时的回调 \r\n     * @param {*} child 当前遍历模型\r\n     */\r\n    child_mapping = child => {\r\n        let { config } = this;\r\n\r\n        config.child_mapping && config.child_mapping(child);\r\n    }\r\n\r\n    // 计算模型移动距离\r\n    _getCoordinate2InScene = (i, d, c) => {\r\n        d.updateMatrixWorld(true);\r\n\r\n        let b = this.getVector2InScene(i, c);\r\n        let j = new THREE.Vector3(b.x, b.y, 0);\r\n\r\n        j.unproject(d);\r\n        j.sub(d.position);\r\n        j.normalize();\r\n\r\n        let f = new THREE.Raycaster(d.position, j);\r\n        let h = f.ray.origin;\r\n        let g = f.ray.direction;\r\n        let e = 0;\r\n        let a = new THREE.Vector3();\r\n\r\n        a.setX(h.x - ((h.z - e) * g.x / g.z));\r\n        a.setY(h.y - ((h.z - e) * g.y / g.z));\r\n        \r\n        return a;\r\n    }\r\n\r\n    getVector2InScene = (a, c) => {\r\n        let b = new THREE.Vector2();\r\n        b.x = (a.x / c.offsetWidth) * 2 - 1;\r\n        b.y = -(a.y / c.offsetHeight) * 2 + 1;\r\n\r\n        return b;\r\n    };\r\n\r\n    /**\r\n     * TWEEN动画，封装一下调用的时候写简单点\r\n     * @param a 起点\r\n     * @param b 终点\r\n     * @param t 过渡时间\r\n     * @param c 动画加载完成回调\r\n     * @param s 动画开始回调\r\n     */\r\n    _tweenInOut = (a, b, t, c, s) => {\r\n        let tween = new TWEEN.Tween(a)\r\n            .to(b, t)\r\n            .easing(TWEEN.Easing.Exponential.InOut);\r\n\r\n        c && tween.onComplete(c);\r\n        s && tween.onStart(s);\r\n\r\n        return tween.start();\r\n    };\r\n\r\n    /**\r\n     * 递归加载、合并多个材质文件\r\n     * TODO 弃用深拷贝，略浪费性能\r\n     * @param {*} paths config.data.materials，数组\r\n     * @param {*} loader 文件加载器\r\n     * @param {*} material 加载完成后的材质对象，调用时传null就行了\r\n     * @param {*} callback 加载完成后的回调，相当于ajax里的success，传回材质对象\r\n     */\r\n    _load_materials = (paths, loader, material, callback) => {\r\n        loader.load(paths[0], materials => {\r\n            material ? material.materialsInfo = [...material.materialsInfo, ...materials.materialsInfo] : material = materials;\r\n\r\n            paths.shift();\r\n\r\n            paths.length != 0 ? _load_materials(paths, loader, material, callback) : callback(material);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 递归加载、合并多个模型文件\r\n     * TODO 弃用深拷贝，略浪费性能\r\n     * @param {*} paths config.data.objects，数组\r\n     * @param {*} loader 文件加载器\r\n     * @param {*} object 加载完成后的模型对象，调用时传null就行了\r\n     * @param {*} callback 加载完成后的回调，相当于ajax里的success，传回模型对象\r\n     */\r\n    _load_objects = (paths, loader, object, callback) => {\r\n        loader.load(paths[0], objects => {\r\n            object ? object.children = objects.children.concat(object.children) : object = extend({}, objects);\r\n\r\n            paths.shift();\r\n\r\n            paths.length != 0 ? _load_objects(paths, loader, object, callback) : callback(object);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 初始化参数\r\n    */\r\n    _init_params = () => {\r\n        const { config } = this;\r\n        const { camera_position, clientWidth, clientHeight } = config;\r\n        const { x, y, z } = camera_position;\r\n\r\n        // 挂载画布的dom\r\n        this.container = config.container;\r\n\r\n        // 相机视锥体的长宽比\r\n        const _camera_aspect = clientWidth / clientHeight;\r\n        this.camera = new THREE.PerspectiveCamera(45, _camera_aspect, 1, 10000);\r\n        this.camera.position.set(x, y, z);\r\n        \r\n        // 设置画布透明\r\n        this.renderer = new THREE.WebGLRenderer({\r\n            alpha: true,\r\n            antialias: true\r\n        });\r\n        // this.renderer.setSize(clientWidth, clientHeight - 4);\r\n        this.resize(clientWidth, clientHeight - 4);\r\n        this.renderer.shadowMap.enabled = true; // 启用阴影选项\r\n        this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n\r\n        this.container.appendChild(this.renderer.domElement);\r\n\r\n        this.scene = new THREE.Scene();\r\n        this.scene.add(this.camera);\r\n\r\n        // 初始化轨道控制\r\n        let controls = new OrbitControls(this.camera, this.renderer.domElement);\r\n        Object.assign(controls, config.controls);\r\n        this.controls = controls;\r\n\r\n        // 初始化光线\r\n        if(config.light) {\r\n            let lights = config.light();\r\n            for(let light of lights) {\r\n                this.scene.add(light)\r\n            }\r\n        }\r\n     \r\n        // 设置背景颜色\r\n        config.clear_color && this.renderer.setClearColor(config.clear_color, config.clear_opacity);\r\n    }\r\n\r\n    /**\r\n     * 完成开场动画后，相机视角变动\r\n     * 一种是旋转mesh，一种是改变相机位置\r\n     * 这是旋转mesh\r\n     */\r\n    _afterMovementMesh = () => {\r\n        const { after_rotation } = this.config;\r\n\r\n        const rotateAnimate = () => {\r\n            requestAnimationFrame(rotateAnimate);\r\n            \r\n            // 沿x轴旋转\r\n            this.root.rotation.x >= after_rotation ? this.root.rotation.x -= this.config.rotation_speed : null;\r\n\r\n            this.renderer.render(this.scene, this.camera);\r\n        };\r\n        rotateAnimate();\r\n    }\r\n\r\n    /**\r\n     * 预处理模型数据\r\n     * @param object 模型数据\r\n    */\r\n    _handle_mesh = object => {\r\n        let { config, _startTweenCount } = this;\r\n\r\n        object.traverse(child => {\r\n            if(child instanceof THREE.Group) {\r\n                return;\r\n            }\r\n            if(child instanceof THREE.Mesh) {\r\n                child.geometry = new THREE.Geometry().fromBufferGeometry(child.geometry);\r\n            } else if(child instanceof THREE.Line) {\r\n                console.log(child.name)\r\n            }\r\n\r\n            child.name == 'texture' && (this.model_texture = child);\r\n            \r\n            this._dealObjectInLoadCirculStart(child, config.border_visible);\r\n\r\n            this.child_mapping(child, config);\r\n\r\n            let time = this._handle_model_shift(child, config);\r\n\r\n            // 开始动画\r\n            this._tweenInOut(child.position, { x: 0, y: 0, z: 0 }, time, () => {\r\n                _startTweenCount--;\r\n                \r\n                if(_startTweenCount === 0) {\r\n                    this.render_pillar(object);\r\n                    this._afterMovementMesh();\r\n\r\n                    // TODO 这里不该循环，应急\r\n                    for(let child of object.children) {\r\n                        this.config.before_animate && this.config.before_animate(child, true);\r\n                    }\r\n\r\n                    // 绑定事件，比如鼠标移到板块上高亮\r\n                    this._initListener(object);\r\n                }\r\n            });\r\n            _startTweenCount++;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 显示贴图\r\n     * @param material 传入的材质，最后和原材质中的属性合并\r\n     * @param url 等值面图片地址\r\n    */\r\n    show_texture = (material, url) => {\r\n        if(url) {\r\n            new THREE.TextureLoader().load(url, map => {\r\n                this.model_texture.material.map = map;\r\n            });\r\n        }\r\n\r\n        this.model_texture.material = Object.assign(this.model_texture.material, material);\r\n        this.model_texture.visible = !this.model_texture.visible;\r\n    }\r\n\r\n    get_object = () => this.dataObject;\r\n\r\n    /**\r\n     * 更新数据并刷新柱子高度，也就是动画重播一遍\r\n     * TODO 根据传入对象判断哪些对象需要更新\r\n     * @param {*} object 新的模型对象\r\n     */\r\n    refresh_pillar = object => {\r\n        let { dataObject } = this;\r\n\r\n        dataObject = object;\r\n        this.render_pillar(dataObject);\r\n    }\r\n\r\n    _flush = () => {\r\n        // 实时渲染\r\n        const render = () => {\r\n            requestAnimationFrame(render);\r\n\r\n            TWEEN.update();\r\n            this.controls.update();\r\n\r\n            this.renderer.render(this.scene, this.camera);\r\n        }\r\n        render();\r\n    }\r\n\r\n    // 渲染柱子\r\n    render_pillar = object => {\r\n        const { config } = this;\r\n\r\n        object.traverse(child => {\r\n            this._changeModel4DataRefresh(child, config.divisor);\r\n        });\r\n    }\r\n\r\n    resize = (width = document.documentElement.clientWidth, height = document.documentElement.clientHeight - 4) => {\r\n        this.renderer.setSize(width, height);\r\n    }\r\n\r\n    init = _config => {\r\n        let { config } = this;\r\n        // TODO 去掉加载材质和模型方法的副作用\r\n        config = extend(this.config, _config);\r\n        \r\n        this._init_params(_config);\r\n        \r\n        // 初始化前的钩子\r\n        config.before_init && config.before_init(config);\r\n        \r\n        // 加载模型数据\r\n        let mtlLoader = new MTLLoader();\r\n\r\n        this._load_materials(config.data.materials, mtlLoader, null, materials => {\r\n            config.set_material && (materials = config.set_material(materials));\r\n            \r\n            let objLoader = new OBJLoader();\r\n            objLoader.setMaterials(materials);\r\n\r\n            this._load_objects(config.data.objects, objLoader, null, object => {\r\n                // 请求业务数据\r\n                config.data.load(object, new_object => {\r\n                    this.dataObject = new_object;\r\n\r\n                    this._handle_mesh(new_object);\r\n\r\n                    this.root = new THREE.Object3D().add(new_object);\r\n                    this.scene.add(this.root);\r\n                    \r\n                    this._flush();\r\n                });\r\n            })\r\n        });\r\n    };\r\n}","/*\r\n * @Author: zy9@github.com/zy410419243\r\n * @Date: 2018-04-24 15:34:46\r\n * @Last Modified by: zy9\r\n * @Last Modified time: 2018-07-13 08:55:29\r\n */\r\nimport Trunk from './core';\r\n\r\nexport default Trunk;"],"sourceRoot":""}