!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("three"));else if("function"==typeof define&&define.amd)define(["three"],t);else{var n="object"==typeof exports?t(require("three")):t(e.three);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(t,n){t.exports=e},function(e,t,n){"use strict";var r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};void 0===(r=function(){var e,t=Object.prototype.toString,n=Object.prototype.hasOwnProperty,r={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Object]":"object"},o=function(e){return null==e?String(e):r[t.call(e)]||"object"},i=Array.isArray||function(e){return"array"===o(e)},s=function(e){if(!e||"object"!==o(e)||e.nodeType||function(e){return e&&"object"===(void 0===e?"undefined":a(e))&&"setInterval"in e}(e))return!1;if(e.constructor&&!n.call(e,"constructor")&&!n.call(e.constructor.prototype,"isPrototypeOf"))return!1;var t;for(t in e);return void 0===t||n.call(e,t)};return function t(n,r){for(var a in r){var o,c=n[a],u=r[a];n!==u&&(u&&(s(u)||(e=i(u)))?(e?(e=!1,o=c&&i(c)?c:[]):o=c&&s(c)?c:{},n[a]=t(o,u)):void 0!==u&&(n[a]=u))}return n}}.apply(t,[]))||(e.exports=r)},function(e,t){void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var n=n||function(){var e=[];return{REVISION:"8",getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},update:function(t){if(0===e.length)return!1;var n=0,r=e.length;for(t=void 0!==t?t:Date.now();n<r;)e[n].update(t)?n++:(e.splice(n,1),r--);return!0}}}();n.Tween=function(e){var t=e,r={},a={},o=1e3,i=0,s=null,c=n.Easing.Linear.None,u=n.Interpolation.Linear,l=[],h=null,d=!1,f=null,p=null;this.to=function(e,t){return void 0!==t&&(o=t),a=e,this},this.start=function(e){for(var o in n.add(this),d=!1,s=void 0!==e?e:Date.now(),s+=i,a)if(null!==t[o]&&o in t){if(a[o]instanceof Array){if(0===a[o].length)continue;a[o]=[t[o]].concat(a[o])}r[o]=t[o]}return this},this.stop=function(){return n.remove(this),this},this.delay=function(e){return i=e,this},this.easing=function(e){return c=e,this},this.interpolation=function(e){return u=e,this},this.chain=function(){return l=arguments,this},this.onStart=function(e){return h=e,this},this.onUpdate=function(e){return f=e,this},this.onComplete=function(e){return p=e,this},this.update=function(e){if(e<s)return!0;!1===d&&(null!==h&&h.call(t),d=!0);var n=(e-s)/o,i=c(n=n>1?1:n);for(var m in r){var v=r[m],b=a[m];b instanceof Array?t[m]=u(b,i):t[m]=v+(b-v)*i}if(null!==f&&f.call(t,i),1==n){null!==p&&p.call(t);for(var g=0,y=l.length;g<y;g++)l[g].start(e);return!1}return!0}},n.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},Out:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},InOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-n.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*n.Easing.Bounce.In(2*e):.5*n.Easing.Bounce.Out(2*e-1)+.5}}},n.Interpolation={Linear:function(e,t){var r=e.length-1,a=r*t,o=Math.floor(a),i=n.Interpolation.Utils.Linear;return t<0?i(e[0],e[1],a):t>1?i(e[r],e[r-1],r-a):i(e[o],e[o+1>r?r:o+1],a-o)},Bezier:function(e,t){var r,a=0,o=e.length-1,i=Math.pow,s=n.Interpolation.Utils.Bernstein;for(r=0;r<=o;r++)a+=i(1-t,o-r)*i(t,r)*e[r]*s(o,r);return a},CatmullRom:function(e,t){var r=e.length-1,a=r*t,o=Math.floor(a),i=n.Interpolation.Utils.CatmullRom;return e[0]===e[r]?(t<0&&(o=Math.floor(a=r*(1+t))),i(e[(o-1+r)%r],e[o],e[(o+1)%r],e[(o+2)%r],a-o)):t<0?e[0]-(i(e[0],e[0],e[1],e[1],-a)-e[0]):t>1?e[r]-(i(e[r],e[r],e[r-1],e[r-1],a-r)-e[r]):i(e[o?o-1:0],e[o],e[r<o+1?r:o+1],e[r<o+2?r:o+2],a-o)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var r=n.Interpolation.Utils.Factorial;return r(e)/r(t)/r(e-t)},Factorial:function(){var e=[1];return function(t){var n,r=1;if(e[t])return e[t];for(n=t;n>1;n--)r*=n;return e[t]=r}}(),CatmullRom:function(e,t,n,r,a){var o=.5*(n-e),i=.5*(r-t),s=a*a;return(2*t-2*n+o+i)*(a*s)+(-3*t+3*n-2*o-i)*s+o*a+t}}},e.exports=n},function(e,t,n){var r=n(0);r.OrbitControls=function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new r.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:r.MOUSE.LEFT,ZOOM:r.MOUSE.MIDDLE,PAN:r.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(a),n.update(),c=s.NONE},this.update=function(){var t=new r.Vector3,o=(new r.Quaternion).setFromUnitVectors(e.up,new r.Vector3(0,1,0)),i=o.clone().inverse(),m=new r.Vector3,v=new r.Quaternion;return function(){var e=n.object.position;return t.copy(e).sub(n.target),t.applyQuaternion(o),l.setFromVector3(t),n.autoRotate&&c===s.NONE&&j(2*Math.PI/60/60*n.autoRotateSpeed),l.theta+=h.theta,l.phi+=h.phi,l.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,l.theta)),l.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=d,l.radius=Math.max(n.minDistance,Math.min(n.maxDistance,l.radius)),n.target.add(f),t.setFromSpherical(l),t.applyQuaternion(i),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor,f.multiplyScalar(1-n.dampingFactor)):(h.set(0,0,0),f.set(0,0,0)),d=1,!!(p||m.distanceToSquared(n.object.position)>u||8*(1-v.dot(n.object.quaternion))>u)&&(n.dispatchEvent(a),m.copy(n.object.position),v.copy(n.object.quaternion),p=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",z,!1),n.domElement.removeEventListener("mousedown",C,!1),n.domElement.removeEventListener("wheel",F,!1),n.domElement.removeEventListener("touchstart",N,!1),n.domElement.removeEventListener("touchend",_,!1),n.domElement.removeEventListener("touchmove",U,!1),document.removeEventListener("mousemove",A,!1),document.removeEventListener("mouseup",V,!1),window.removeEventListener("keydown",R,!1)};var n=this,a={type:"change"},o={type:"start"},i={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},c=s.NONE,u=1e-6,l=new r.Spherical,h=new r.Spherical,d=1,f=new r.Vector3,p=!1,m=new r.Vector2,v=new r.Vector2,b=new r.Vector2,g=new r.Vector2,y=new r.Vector2,w=new r.Vector2,x=new r.Vector2,O=new r.Vector2,M=new r.Vector2;function E(){return Math.pow(.95,n.zoomSpeed)}function j(e){h.theta-=e}function P(e){h.phi-=e}var I=function(){var e=new r.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),f.add(e)}}(),L=function(){var e=new r.Vector3;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),f.add(e)}}(),S=function(){var e=new r.Vector3;return function(t,r){var a=n.domElement===document?n.domElement.body:n.domElement;if(n.object.isPerspectiveCamera){var o=n.object.position;e.copy(o).sub(n.target);var i=e.length();i*=Math.tan(n.object.fov/2*Math.PI/180),I(2*t*i/a.clientHeight,n.object.matrix),L(2*r*i/a.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(I(t*(n.object.right-n.object.left)/n.object.zoom/a.clientWidth,n.object.matrix),L(r*(n.object.top-n.object.bottom)/n.object.zoom/a.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function T(e){n.object.isPerspectiveCamera?d/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function k(e){n.object.isPerspectiveCamera?d*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function C(e){if(!1!==n.enabled){switch(e.preventDefault(),e.button){case n.mouseButtons.ORBIT:if(!1===n.enableRotate)return;!function(e){m.set(e.clientX,e.clientY)}(e),c=s.ROTATE;break;case n.mouseButtons.ZOOM:if(!1===n.enableZoom)return;!function(e){x.set(e.clientX,e.clientY)}(e),c=s.DOLLY;break;case n.mouseButtons.PAN:if(!1===n.enablePan)return;!function(e){g.set(e.clientX,e.clientY)}(e),c=s.PAN}c!==s.NONE&&(document.addEventListener("mousemove",A,!1),document.addEventListener("mouseup",V,!1),n.dispatchEvent(o))}}function A(e){if(!1!==n.enabled)switch(e.preventDefault(),c){case s.ROTATE:if(!1===n.enableRotate)return;!function(e){v.set(e.clientX,e.clientY),b.subVectors(v,m).multiplyScalar(n.rotateSpeed);var t=n.domElement===document?n.domElement.body:n.domElement;j(2*Math.PI*b.x/t.clientWidth),P(2*Math.PI*b.y/t.clientHeight),m.copy(v),n.update()}(e);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(e){O.set(e.clientX,e.clientY),M.subVectors(O,x),M.y>0?T(E()):M.y<0&&k(E()),x.copy(O),n.update()}(e);break;case s.PAN:if(!1===n.enablePan)return;!function(e){y.set(e.clientX,e.clientY),w.subVectors(y,g).multiplyScalar(n.panSpeed),S(w.x,w.y),g.copy(y),n.update()}(e)}}function V(e){!1!==n.enabled&&(document.removeEventListener("mousemove",A,!1),document.removeEventListener("mouseup",V,!1),n.dispatchEvent(i),c=s.NONE)}function F(e){!1===n.enabled||!1===n.enableZoom||c!==s.NONE&&c!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(o),function(e){e.deltaY<0?k(E()):e.deltaY>0&&T(E()),n.update()}(e),n.dispatchEvent(i))}function R(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(e){switch(e.keyCode){case n.keys.UP:S(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:S(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:S(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:S(-n.keyPanSpeed,0),n.update()}}(e)}function N(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===n.enableRotate)return;!function(e){m.set(e.touches[0].pageX,e.touches[0].pageY)}(e),c=s.TOUCH_ROTATE;break;case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+r*r);x.set(0,a)}if(n.enablePan){var o=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);g.set(o,i)}}(e),c=s.TOUCH_DOLLY_PAN;break;default:c=s.NONE}c!==s.NONE&&n.dispatchEvent(o)}}function U(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===n.enableRotate)return;if(c!==s.TOUCH_ROTATE)return;!function(e){v.set(e.touches[0].pageX,e.touches[0].pageY),b.subVectors(v,m).multiplyScalar(n.rotateSpeed);var t=n.domElement===document?n.domElement.body:n.domElement;j(2*Math.PI*b.x/t.clientWidth),P(2*Math.PI*b.y/t.clientHeight),m.copy(v),n.update()}(e);break;case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;if(c!==s.TOUCH_DOLLY_PAN)return;!function(e){if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+r*r);O.set(0,a),M.set(0,Math.pow(O.y/x.y,n.zoomSpeed)),T(M.y),x.copy(O)}if(n.enablePan){var o=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(o,i),w.subVectors(y,g).multiplyScalar(n.panSpeed),S(w.x,w.y),g.copy(y)}n.update()}(e);break;default:c=s.NONE}}function _(e){!1!==n.enabled&&(n.dispatchEvent(i),c=s.NONE)}function z(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",z,!1),n.domElement.addEventListener("mousedown",C,!1),n.domElement.addEventListener("wheel",F,!1),n.domElement.addEventListener("touchstart",N,!1),n.domElement.addEventListener("touchend",_,!1),n.domElement.addEventListener("touchmove",U,!1),window.addEventListener("keydown",R,!1),this.update()},r.OrbitControls.prototype=Object.create(r.EventDispatcher.prototype),r.OrbitControls.prototype.constructor=r.OrbitControls,Object.defineProperties(r.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),e.exports=t.default=r.OrbitControls},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manager=void 0!==t?t:a.DefaultLoadingManager,this.materials=null,this.regexp={vertexPattern:/^v\s+([\d|.|+|\-|e|E]+)\s+([\d|.|+|\-|e|E]+)\s+([\d|.|+|\-|e|E]+)/,normalPattern:/^vn\s+([\d|.|+|\-|e|E]+)\s+([\d|.|+|\-|e|E]+)\s+([\d|.|+|\-|e|E]+)/,uvPattern:/^vt\s+([\d|.|+|\-|e|E]+)\s+([\d|.|+|\-|e|E]+)/,faceVertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,faceVertexUv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,faceVertexUvNormal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,faceVertexNormal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,objectPattern:/^[og]\s*(.+)?/,smoothingPattern:/^s\s+(\d+|on|off)/,materialLibraryPattern:/^mtllib /,materialUsePattern:/^usemtl /}}return r(e,[{key:"load",value:function(e,t,n,r){var o=this,i=new a.FileLoader(o.manager);i.setPath(this.path),i.load(e,function(e){t(o.parse(e))},n,r)}},{key:"setPath",value:function(e){this.path=e}},{key:"setMaterials",value:function(e){this.materials=e}},{key:"createParserState",value:function(){var e={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object.finalize&&this.object.finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var n=this.finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){var r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object.finalize&&this.object.finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var r=this.vertices,a=this.object.geometry.vertices;a.push(r[e+0]),a.push(r[e+1]),a.push(r[e+2]),a.push(r[t+0]),a.push(r[t+1]),a.push(r[t+2]),a.push(r[n+0]),a.push(r[n+1]),a.push(r[n+2])},addVertexLine:function(e){var t=this.vertices,n=this.object.geometry.vertices;n.push(t[e+0]),n.push(t[e+1]),n.push(t[e+2])},addNormal:function(e,t,n){var r=this.normals,a=this.object.geometry.normals;a.push(r[e+0]),a.push(r[e+1]),a.push(r[e+2]),a.push(r[t+0]),a.push(r[t+1]),a.push(r[t+2]),a.push(r[n+0]),a.push(r[n+1]),a.push(r[n+2])},addUV:function(e,t,n){var r=this.uvs,a=this.object.geometry.uvs;a.push(r[e+0]),a.push(r[e+1]),a.push(r[t+0]),a.push(r[t+1]),a.push(r[n+0]),a.push(r[n+1])},addUVLine:function(e){var t=this.uvs,n=this.object.geometry.uvs;n.push(t[e+0]),n.push(t[e+1])},addFace:function(e,t,n,r,a,o,i,s,c,u,l,h){var d,f=this.vertices.length,p=this.parseVertexIndex(e,f),m=this.parseVertexIndex(t,f),v=this.parseVertexIndex(n,f);if(void 0===r?this.addVertex(p,m,v):(d=this.parseVertexIndex(r,f),this.addVertex(p,m,d),this.addVertex(m,v,d)),void 0!==a){var b=this.uvs.length;p=this.parseUVIndex(a,b),m=this.parseUVIndex(o,b),v=this.parseUVIndex(i,b),void 0===r?this.addUV(p,m,v):(d=this.parseUVIndex(s,b),this.addUV(p,m,d),this.addUV(m,v,d))}if(void 0!==c){var g=this.normals.length;p=this.parseNormalIndex(c,g),m=c===u?p:this.parseNormalIndex(u,g),v=c===l?p:this.parseNormalIndex(l,g),void 0===r?this.addNormal(p,m,v):(d=this.parseNormalIndex(h,g),this.addNormal(p,m,d),this.addNormal(m,v,d))}},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,r=this.uvs.length,a=0,o=e.length;a<o;a++)this.addVertexLine(this.parseVertexIndex(e[a],n));o=t.length;for(var i=0;i<o;i++)this.addUVLine(this.parseUVIndex(t[i],r))}};return e.startObject("",!1),e}},{key:"parse",value:function(e){console.time("OBJLoader");var t=this.createParserState();-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));for(var n=e.split("\n"),r="",o="",i="",s=[],c="function"==typeof"".trimLeft,u=0,l=n.length;u<l;u++)if(r=n[u],0!==(r=c?r.trimLeft():r.trim()).length&&"#"!==(o=r.charAt(0)))if("v"===o)if(" "===(i=r.charAt(1))&&null!==(s=this.regexp.vertexPattern.exec(r)))t.vertices.push(parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3]));else if("n"===i&&null!==(s=this.regexp.normalPattern.exec(r)))t.normals.push(parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3]));else{if("t"!==i||null===(s=this.regexp.uvPattern.exec(r)))throw new Error("Unexpected vertex/normal/uv line: '"+r+"'");t.uvs.push(parseFloat(s[1]),parseFloat(s[2]))}else if("f"===o)if(null!==(s=this.regexp.faceVertexUvNormal.exec(r)))t.addFace(s[1],s[4],s[7],s[10],s[2],s[5],s[8],s[11],s[3],s[6],s[9],s[12]);else if(null!==(s=this.regexp.faceVertexUv.exec(r)))t.addFace(s[1],s[3],s[5],s[7],s[2],s[4],s[6],s[8]);else if(null!==(s=this.regexp.faceVertexNormal.exec(r)))t.addFace(s[1],s[3],s[5],s[7],void 0,void 0,void 0,void 0,s[2],s[4],s[6],s[8]);else{if(null===(s=this.regexp.faceVertex.exec(r)))throw new Error("Unexpected face line: '"+r+"'");t.addFace(s[1],s[2],s[3],s[4])}else if("l"===o){var h=r.substring(1).trim().split(" "),d=[],f=[];if(-1===r.indexOf("/"))d=h;else for(var p=0,m=h.length;p<m;p++){var v=h[p].split("/");""!==v[0]&&d.push(v[0]),""!==v[1]&&f.push(v[1])}t.addLineGeometry(d,f)}else if(null!==(s=this.regexp.objectPattern.exec(r))){var b=(" "+s[0].substr(1).trim()).substr(1);t.startObject(b)}else if(this.regexp.materialUsePattern.test(r))t.object.startMaterial(r.substring(7).trim(),t.materialLibraries);else if(this.regexp.materialLibraryPattern.test(r))t.materialLibraries.push(r.substring(7).trim());else{if(null===(s=this.regexp.smoothingPattern.exec(r))){if("\0"===r)continue;throw new Error("Unexpected line: '"+r+"'")}var g=s[1].trim().toLowerCase();t.object.smooth="1"===g||"on"===g;var y=t.object.currentMaterial();y&&(y.smooth=t.object.smooth)}t.finalize();var w=new a.Group;for(w.materialLibraries=[].concat(t.materialLibraries),u=0,l=t.objects.length;u<l;u++){var x=t.objects[u],O=x.geometry,M=x.materials,E="Line"===O.type;if(0!==O.vertices.length){var j=new a.BufferGeometry;j.addAttribute("position",new a.BufferAttribute(new Float32Array(O.vertices),3)),O.normals.length>0?j.addAttribute("normal",new a.BufferAttribute(new Float32Array(O.normals),3)):j.computeVertexNormals(),O.uvs.length>0&&j.addAttribute("uv",new a.BufferAttribute(new Float32Array(O.uvs),2));for(var P,I=[],L=0,S=M.length;L<S;L++){var T=M[L];if(y=void 0,null!==this.materials&&(y=this.materials.create(T.name),E&&y&&!(y instanceof a.LineBasicMaterial))){var k=new a.LineBasicMaterial;k.copy(y),y=k}y||((y=E?new a.LineBasicMaterial:new a.MeshPhongMaterial).name=T.name),y.flatShading=T.smooth?a.SmoothShading:a.FlatShading,I.push(y)}if(I.length>1){for(L=0,S=M.length;L<S;L++)T=M[L],j.addGroup(T.groupStart,T.groupCount,L);P=E?new a.LineSegments(j,I):new a.Mesh(j,I)}else P=E?new a.LineSegments(j,I[0]):new a.Mesh(j,I[0]);P.name=x.name,w.add(P)}}return console.timeEnd("OBJLoader"),w}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(t){o(this,e),this.manager=void 0!==t?t:a.DefaultLoadingManager}return r(e,[{key:"load",value:function(e,t,n,r){var o=this,i=new a.FileLoader(this.manager);i.setPath(this.path),i.load(e,function(e){t(o.parse(e))},n,r)}},{key:"setPath",value:function(e){this.path=e}},{key:"setTexturePath",value:function(e){this.texturePath=e}},{key:"setBaseUrl",value:function(e){console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(e)}},{key:"setCrossOrigin",value:function(e){this.crossOrigin=e}},{key:"setMaterialOptions",value:function(e){this.materialOptions=e}},{key:"parse",value:function(e){for(var t=e.split("\n"),n={},r=/\s+/,a={},o=0;o<t.length;o++){var i=t[o];if(0!==(i=i.trim()).length&&"#"!==i.charAt(0)){var c=i.indexOf(" "),u=c>=0?i.substring(0,c):i;u=u.toLowerCase();var l=c>=0?i.substring(c+1):"";if(l=l.trim(),"newmtl"===u)n={name:l},a[l]=n;else if(n)if("ka"===u||"kd"===u||"ks"===u){var h=l.split(r,3);n[u]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])]}else n[u]=l}}var d=new s(this.texturePath||this.path,this.materialOptions);return d.setCrossOrigin(this.crossOrigin),d.setManager(this.manager),d.setMaterials(a),d}}]),e}(),s=function(){function e(t,n){o(this,e),this.crossOrigin="Anonymous",this.baseUrl=t||"",this.options=n,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:a.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:a.RepeatWrapping}return r(e,[{key:"setCrossOrigin",value:function(e){this.crossOrigin=e}},{key:"setManager",value:function(e){this.manager=e}},{key:"setMaterials",value:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}},{key:"convert",value:function(e){if(!this.options)return e;var t={};for(var n in e){var r=e[n],a={};for(var o in t[n]=a,r){var i=!0,s=r[o],c=o.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(i=!1)}i&&(a[c]=s)}}return t}},{key:"preload",value:function(){for(var e in this.materialsInfo)this.create(e)}},{key:"getIndex",value:function(e){return this.nameLookup[e]}},{key:"getAsArray",value:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}},{key:"create",value:function(e){return void 0===this.materials[e]&&this.createMaterial(e),this.materials[e]}},{key:"createMaterial",value:function(e){var t=this,n=this.materialsInfo[e],r={name:e,side:this.side};function o(e,n){if(!r[e]){var a=t.getTextureParams(n,r),o=t.loadTexture(function(e,t){return"string"!=typeof t||""===t?"":/^https?:\/\//i.test(t)?t:e+t}(t.baseUrl,a.url));o.repeat.copy(a.scale),o.offset.copy(a.offset),o.wrapS=t.wrap,o.wrapT=t.wrap,r[e]=o}}for(var i in n){var s,c=n[i];if(""!==c)switch(i.toLowerCase()){case"kd":r.color=(new a.Color).fromArray(c);break;case"ks":r.specular=(new a.Color).fromArray(c);break;case"map_kd":o("map",c);break;case"map_ks":o("specularMap",c);break;case"norm":o("normalMap",c);break;case"map_bump":case"bump":o("bumpMap",c);break;case"ns":r.shininess=parseFloat(c);break;case"d":(s=parseFloat(c))<1&&(r.opacity=s,r.transparent=!0);break;case"tr":(s=parseFloat(c))>0&&(r.opacity=1-s,r.transparent=!0)}}return this.materials[e]=new a.MeshPhongMaterial(r),this.materials[e]}},{key:"getTextureParams",value:function(e,t){var n,r={scale:new a.Vector2(1,1),offset:new a.Vector2(0,0)},o=e.split(/\s+/);return(n=o.indexOf("-bm"))>=0&&(t.bumpScale=parseFloat(o[n+1]),o.splice(n,2)),(n=o.indexOf("-s"))>=0&&(r.scale.set(parseFloat(o[n+1]),parseFloat(o[n+2])),o.splice(n,4)),(n=o.indexOf("-o"))>=0&&(r.offset.set(parseFloat(o[n+1]),parseFloat(o[n+2])),o.splice(n,4)),r.url=o.join(" ").trim(),r}},{key:"loadTexture",value:function(e,t,n,r,o){var i,s=a.Loader.Handlers.get(e),c=void 0!==this.manager?this.manager:a.DefaultLoadingManager;return null===s&&(s=new a.TextureLoader(c)),s.setCrossOrigin&&s.setCrossOrigin(this.crossOrigin),i=s.load(e,n,r,o),void 0!==t&&(i.mapping=t),i}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=u(n(5)),o=u(n(4)),i=u(n(3)),s=u(n(2)),c=u(n(1));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.default=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={clearOpacity:.2,meshShiftTime:function(){return 1e3*Math.random()*5+1e3},beforeInit:null,borderVisible:!0,divisor:100,cameraPosition:{x:0,y:0,z:65},afterRotation:-Math.PI/4,rotationSpeed:.02,texture:{line:"#055290",pillar:"#2377e8",top:"#07205b",bottom:"#000",border:"#2a8fdf",select:"#071C5B"},light:function(){var e=[];return e.push(new HemisphereLight(16777215,16777215,.3)),e},controls:{maxPolarAngle:.75*Math.PI,minPolarAngle:.25*Math.PI},clientWidth:document.documentElement.clientWidth||document.body.clientWidth,clientHeight:document.documentElement.clientHeight||document.body.clientHeight},this._startPositions={},this._startTweenCount=0,this.intervals={},this.old={},this.current={},this.root={},this.withdrawPosition=!1,this.dataObject={},this.container={},this.modelTexture={},this.camera=null,this.renderer=null,this.scene=null,this.controls=null,this.initAreaPosition=function(e,n){var r=t._startPositions,a=r[e];t.config.before_animate&&t.config.before_animate(n),a||(a={x:1e3*Math.random()-500,y:1e3*Math.random()-500,z:Math.random()>.5?200*Math.random()+300:500*-Math.random()-1e3},r[e]=a),n.position.set(a.x,a.y,a.z)},this.dealObjectInLoadCirculStart=function(e,n){if(e.name&&(/border$/.test(e.name)&&(e.visible=n),e instanceof r.Mesh)){var a=e.name.split("_")[0];t.initAreaPosition(a,e)}},this.changeModel4DataRefresh=function(e,n){var r=e.name;if(/pillar$/.test(r)){var a=r.split("_")[0],o=e.userData.val;if(a){var i=0;n&&0!==n&&(i=o/n*15),i<=0?e.visible=!1:(t.setHeightSlow(e,i),e.visible=!0)}else a=r?r.split("_")[0]:"",e.visible=!1}},this.setHeightSlow=function(e,n){t.setHeight(e,1);var r=1,a=void 0;a=setInterval(function(){if(r<300){var o=Math.floor(n*r/300);t.setHeight(e,o),r++}else 300===r?(r++,t.setHeight(e,n)):(clearInterval(a),delete t.intervals[a])},function(){}),t.intervals[a]=a},this.setHeight=function(e,t){(0===t||isNaN(t))&&(t=1);var n=e.geometry;n.verticesNeedUpdate=!0;var r=n.vertices,a=r[0].z,o=!0,i=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value.z;if(a!=l){a=Math.min(l,a);break}}}catch(e){i=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(i)throw s}}var h=!0,d=!1,f=void 0;try{for(var p,m=r[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var v=p.value;v.z!==a&&(v.z=a+t)}}catch(e){d=!0,f=e}finally{try{!h&&m.return&&m.return()}finally{if(d)throw f}}},this.initListener=function(e){t.container.addEventListener("mousemove",function(e){return t.setMeshHighLightStatus(e)},!1),t.container.addEventListener("click",function(n){return t.showDetail(n,e)},!1)},this.setMeshHighLightStatus=function(e){var n=t.config,r=t.objectFromMouse(e.pageX,e.pageY).object,a=n.texture;if(r){var o=t.current&&t.current.uuid;if(o===r.uuid)return;r.name.includes("border")||r.name.includes("line")||r.name.includes("pillar")||r.name.includes("texture")||r.name.includes("river")||(o?(t.current.material.color.set(a.top),t.old=t.current,t.current=r,r.material.color.set(a.select)):(t.current=r,r.material.color.set(a.select)))}},this.showDetail=function(e,n){var r=t.config;e.preventDefault();var a=t.objectFromMouse(e.pageX,e.pageY).object;if(a&&r.show_detail){var o=r.show_detail(a);t.meshMove(!!o,n)}},this.objectFromMouse=function(e,n){var a=t.container,o=t.renderer.domElement,i=o.offsetLeft,s=n-o.offsetTop,c=(e-i)/a.offsetWidth*2-1,u=-s/a.offsetHeight*2+1,l=new r.Vector2(c,u),h=new r.Raycaster;h.setFromCamera(l,t.camera);var d=h.intersectObjects(t.root.children,!0);if(d.length>0){var f=d[0];if(f)return f}return{object:null,point:null,face:null}},this.getOffset=function(e,n){return n||((n={}).top=0,n.left=0),e==document.body?n:(n.top+=e.offsetTop,n.left+=e.offsetLeft,t.getOffset(e.parentNode,n))},this.meshMove=function(e,n){var r=t.camera,a=t.renderer,o=t.container,i=t.getMeshWidth,s=t._getCoordinate2InScene,c=t.config,u={x:0,y:0,z:0};if(Math.PI,e){Math.PI,Math.PI;var l=o.clientWidth/550;t.withdrawPosition||(t.withdrawPosition=s({x:30*l,y:a.domElement.offsetHeight/2},r,a.domElement),t.withdrawPosition.x+=i(n).length/4,t.tweenInOut(r.position,{z:80},1e3)),u=t.withdrawPosition,t.tweenInOut(n.position,u,1e3)}else t.tweenInOut(r.position,c.cameraPosition,1e3),t.tweenInOut(n.position,u,1e3),t.withdrawPosition=null},this.getMeshWidth=function(e){var t=new r.BoxHelper(e,16711680),n=(new r.Box3).setFromObject(e);return t.update(),{length:n.max.x-n.min.x,width:n.max.y-n.min.y,height:n.max.z-n.min.z}},this.handleModelShift=function(e){var n=t._startPositions,r=t.config;if(n[e.name.split("_")[0]])return r.meshShiftTime&&r.meshShiftTime()},this.childMapping=function(e){var n=t.config;n.childMapping&&n.childMapping(e)},this._getCoordinate2InScene=function(e,n,a){n.updateMatrixWorld(!0);var o=t.getVector2InScene(e,a),i=new r.Vector3(o.x,o.y,0);i.unproject(n),i.sub(n.position),i.normalize();var s=new r.Raycaster(n.position,i),c=s.ray.origin,u=s.ray.direction,l=new r.Vector3;return l.setX(c.x-(c.z-0)*u.x/u.z),l.setY(c.y-(c.z-0)*u.y/u.z),l},this.getVector2InScene=function(e,t){var n=new r.Vector2;return n.x=e.x/t.offsetWidth*2-1,n.y=-e.y/t.offsetHeight*2+1,n},this.tweenInOut=function(e,t,n,r,a){var o=new s.default.Tween(e).to(t,n).easing(s.default.Easing.Exponential.InOut);return r&&o.onComplete(r),a&&o.onStart(a),o.start()},this.loadMaterials=function(e,t,n,r){t.load(e[0],function(a){n?n.materialsInfo=[].concat(l(n.materialsInfo),l(a.materialsInfo)):n=a,e.shift(),0!=e.length?loadMaterials(e,t,n,r):r(n)})},this.loadObjects=function(e,t,n,r){t.load(e[0],function(a){n?n.children=a.children.concat(n.children):n=(0,c.default)({},a),e.shift(),0!=e.length?loadObjects(e,t,n,r):r(n)})},this.initParams=function(){var e=t.config,n=e.cameraPosition,a=e.clientWidth,o=e.clientHeight,s=n.x,c=n.y,u=n.z;t.container=e.container;var l=a/o;t.camera=new r.PerspectiveCamera(45,l,1,1e4),t.camera.position.set(s,c,u),t.renderer=new r.WebGLRenderer({alpha:!0,antialias:!0}),t.resize(a,o-4),t.renderer.shadowMap.enabled=!0,t.renderer.shadowMap.type=r.PCFSoftShadowMap,t.container.appendChild(t.renderer.domElement),t.scene=new r.Scene,t.scene.add(t.camera);var h=new i.default(t.camera,t.renderer.domElement);if(Object.assign(h,e.controls),t.controls=h,e.light){var d=e.light(),f=!0,p=!1,m=void 0;try{for(var v,b=d[Symbol.iterator]();!(f=(v=b.next()).done);f=!0){var g=v.value;t.scene.add(g)}}catch(e){p=!0,m=e}finally{try{!f&&b.return&&b.return()}finally{if(p)throw m}}}e.clear_color&&t.renderer.setClearColor(e.clear_color,e.clearOpacity)},this.afterMovementMesh=function(){var e=t.config.afterRotation;!function n(){requestAnimationFrame(n),t.root.rotation.x>=e&&(t.root.rotation.x-=t.config.rotationSpeed),t.renderer.render(t.scene,t.camera)}()},this.handleMesh=function(e){var n=t.config,a=t._startTweenCount;e.traverse(function(o){if(!(o instanceof r.Group)){o instanceof r.Mesh?o.geometry=(new r.Geometry).fromBufferGeometry(o.geometry):o instanceof r.Line&&console.log(o.name),"texture"==o.name&&(t.modelTexture=o),t.dealObjectInLoadCirculStart(o,n.borderVisible),t.childMapping(o,n);var i=t.handleModelShift(o,n);t.tweenInOut(o.position,{x:0,y:0,z:0},i,function(){if(0==--a){t.renderPillar(e),t.afterMovementMesh();var n=!0,r=!1,o=void 0;try{for(var i,s=e.children[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var c=i.value;t.config.before_animate&&t.config.before_animate(c,!0)}}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}t.initListener(e)}}),a++}})},this.showTexture=function(e,n){n&&(new r.TextureLoader).load(n,function(e){t.modelTexture.material.map=e}),t.modelTexture.material=Object.assign(t.modelTexture.material,e),t.modelTexture.visible=!t.modelTexture.visible},this.getObject=function(){return t.dataObject},this.refreshPillar=function(e){var n=t.dataObject;n=e,t.renderPillar(n)},this.flush=function(){!function e(){requestAnimationFrame(e),s.default.update(),t.controls.update(),t.renderer.render(t.scene,t.camera)}()},this.renderPillar=function(e){var n=t.config;e.traverse(function(e){t.changeModel4DataRefresh(e,n.divisor)})},this.resize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement.clientWidth,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement.clientHeight-4;t.renderer.setSize(e,n)},this.init=function(e){var n=t.config;n=(0,c.default)(t.config,e),t.initParams(e),n.beforeInit&&n.beforeInit(n);var i=new a.default;t.loadMaterials(n.data.materials,i,null,function(e){n.set_material&&(e=n.set_material(e));var a=new o.default;a.setMaterials(e),t.loadObjects(n.data.objects,a,null,function(e){n.data.load(e,function(e){t.dataObject=e,t.handleMesh(e),t.root=(new r.Object3D).add(e),t.scene.add(t.root),t.flush()})})})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(6));t.default=r.default}])});
//# sourceMappingURL=Trunk.js.map