!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("three"));else if("function"==typeof define&&define.amd)define(["three"],t);else{var n="object"==typeof exports?t(require("three")):t(e.three);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(t,n){t.exports=e},function(e,t,n){var r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}void 0===(r=function(){var e,t=Object.prototype.toString,n=Object.prototype.hasOwnProperty,r={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Object]":"object"},a=function(e){return null==e?String(e):r[t.call(e)]||"object"},i=Array.isArray||function(e){return"array"===a(e)},s=function(e){if(!e||"object"!==a(e)||e.nodeType||function(e){return e&&"object"===o(e)&&"setInterval"in e}(e))return!1;if(e.constructor&&!n.call(e,"constructor")&&!n.call(e.constructor.prototype,"isPrototypeOf"))return!1;var t;for(t in e);return void 0===t||n.call(e,t)};return function t(n,r){for(var o in r){var a,c=n[o],u=r[o];n!==u&&(u&&(s(u)||(e=i(u)))?(e?(e=!1,a=c&&i(c)?c:[]):a=c&&s(c)?c:{},n[o]=t(a,u)):void 0!==u&&(n[o]=u))}return n}}.apply(t,[]))||(e.exports=r)},function(e,t){void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var n,r,o=o||(n=[],{REVISION:"8",getAll:function(){return n},removeAll:function(){n=[]},add:function(e){n.push(e)},remove:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1)},update:function(e){if(0===n.length)return!1;var t=0,r=n.length;for(e=void 0!==e?e:Date.now();t<r;)n[t].update(e)?t++:(n.splice(t,1),r--);return!0}});o.Tween=function(e){var t=e,n={},r={},a=1e3,i=0,s=null,c=o.Easing.Linear.None,u=o.Interpolation.Linear,l=[],h=null,f=!1,d=null,p=null;this.to=function(e,t){return void 0!==t&&(a=t),r=e,this},this.start=function(e){for(var a in o.add(this),f=!1,s=void 0!==e?e:Date.now(),s+=i,r)if(null!==t[a]&&a in t){if(r[a]instanceof Array){if(0===r[a].length)continue;r[a]=[t[a]].concat(r[a])}n[a]=t[a]}return this},this.stop=function(){return o.remove(this),this},this.delay=function(e){return i=e,this},this.easing=function(e){return c=e,this},this.interpolation=function(e){return u=e,this},this.chain=function(){return l=arguments,this},this.onStart=function(e){return h=e,this},this.onUpdate=function(e){return d=e,this},this.onComplete=function(e){return p=e,this},this.update=function(e){if(e<s)return!0;!1===f&&(null!==h&&h.call(t),f=!0);var o=(e-s)/a,i=c(o=o>1?1:o);for(var m in n){var b=n[m],v=r[m];v instanceof Array?t[m]=u(v,i):t[m]=b+(v-b)*i}if(null!==d&&d.call(t,i),1==o){null!==p&&p.call(t);for(var g=0,y=l.length;g<y;g++)l[g].start(e);return!1}return!0}},o.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},Out:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},InOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-o.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*o.Easing.Bounce.In(2*e):.5*o.Easing.Bounce.Out(2*e-1)+.5}}},o.Interpolation={Linear:function(e,t){var n=e.length-1,r=n*t,a=Math.floor(r),i=o.Interpolation.Utils.Linear;return t<0?i(e[0],e[1],r):t>1?i(e[n],e[n-1],n-r):i(e[a],e[a+1>n?n:a+1],r-a)},Bezier:function(e,t){var n,r=0,a=e.length-1,i=Math.pow,s=o.Interpolation.Utils.Bernstein;for(n=0;n<=a;n++)r+=i(1-t,a-n)*i(t,n)*e[n]*s(a,n);return r},CatmullRom:function(e,t){var n=e.length-1,r=n*t,a=Math.floor(r),i=o.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(a=Math.floor(r=n*(1+t))),i(e[(a-1+n)%n],e[a],e[(a+1)%n],e[(a+2)%n],r-a)):t<0?e[0]-(i(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(i(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):i(e[a?a-1:0],e[a],e[n<a+1?n:a+1],e[n<a+2?n:a+2],r-a)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=o.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(r=[1],function(e){var t,n=1;if(r[e])return r[e];for(t=e;t>1;t--)n*=t;return r[e]=n}),CatmullRom:function(e,t,n,r,o){var a=.5*(n-e),i=.5*(r-t),s=o*o;return(2*t-2*n+a+i)*(o*s)+(-3*t+3*n-2*a-i)*s+a*o+t}}},e.exports=o},function(e,t,n){var r=n(0);r.OrbitControls=function(e,t){var n,o,a,i,s;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new r.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:r.MOUSE.LEFT,MIDDLE:r.MOUSE.MIDDLE,RIGHT:r.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.saveState=function(){c.target0.copy(c.target),c.position0.copy(c.object.position),c.zoom0=c.object.zoom},this.reset=function(){c.target.copy(c.target0),c.object.position.copy(c.position0),c.object.zoom=c.zoom0,c.object.updateProjectionMatrix(),c.dispatchEvent(u),c.update(),d=f.NONE},this.update=(n=new r.Vector3,o=(new r.Quaternion).setFromUnitVectors(e.up,new r.Vector3(0,1,0)),a=o.clone().inverse(),i=new r.Vector3,s=new r.Quaternion,function(){var e=c.object.position;return n.copy(e).sub(c.target),n.applyQuaternion(o),m.setFromVector3(n),c.autoRotate&&d===f.NONE&&T(2*Math.PI/60/60*c.autoRotateSpeed),m.theta+=b.theta,m.phi+=b.phi,m.theta=Math.max(c.minAzimuthAngle,Math.min(c.maxAzimuthAngle,m.theta)),m.phi=Math.max(c.minPolarAngle,Math.min(c.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=v,m.radius=Math.max(c.minDistance,Math.min(c.maxDistance,m.radius)),c.target.add(g),n.setFromSpherical(m),n.applyQuaternion(a),e.copy(c.target).add(n),c.object.lookAt(c.target),!0===c.enableDamping?(b.theta*=1-c.dampingFactor,b.phi*=1-c.dampingFactor,g.multiplyScalar(1-c.dampingFactor)):(b.set(0,0,0),g.set(0,0,0)),v=1,!!(y||i.distanceToSquared(c.object.position)>p||8*(1-s.dot(c.object.quaternion))>p)&&(c.dispatchEvent(u),i.copy(c.object.position),s.copy(c.object.quaternion),y=!1,!0)}),this.dispose=function(){c.domElement.removeEventListener("contextmenu",X,!1),c.domElement.removeEventListener("mousedown",z,!1),c.domElement.removeEventListener("wheel",_,!1),c.domElement.removeEventListener("touchstart",Y,!1),c.domElement.removeEventListener("touchend",G,!1),c.domElement.removeEventListener("touchmove",Z,!1),document.removeEventListener("mousemove",D,!1),document.removeEventListener("mouseup",H,!1),window.removeEventListener("keydown",B,!1)};var c=this,u={type:"change"},l={type:"start"},h={type:"end"},f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},d=f.NONE,p=1e-6,m=new r.Spherical,b=new r.Spherical,v=1,g=new r.Vector3,y=!1,w=new r.Vector2,x=new r.Vector2,O=new r.Vector2,M=new r.Vector2,E=new r.Vector2,j=new r.Vector2,P=new r.Vector2,I=new r.Vector2,L=new r.Vector2;function S(){return Math.pow(.95,c.zoomSpeed)}function T(e){b.theta-=e}function A(e){b.phi-=e}var C,k=(C=new r.Vector3,function(e,t){C.setFromMatrixColumn(t,0),C.multiplyScalar(-e),g.add(C)}),V=function(){var e=new r.Vector3;return function(t,n){!0===c.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(c.object.up,e)),e.multiplyScalar(t),g.add(e)}}(),F=function(){var e=new r.Vector3;return function(t,n){var r=c.domElement===document?c.domElement.body:c.domElement;if(c.object.isPerspectiveCamera){var o=c.object.position;e.copy(o).sub(c.target);var a=e.length();a*=Math.tan(c.object.fov/2*Math.PI/180),k(2*t*a/r.clientHeight,c.object.matrix),V(2*n*a/r.clientHeight,c.object.matrix)}else c.object.isOrthographicCamera?(k(t*(c.object.right-c.object.left)/c.object.zoom/r.clientWidth,c.object.matrix),V(n*(c.object.top-c.object.bottom)/c.object.zoom/r.clientHeight,c.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),c.enablePan=!1)}}();function R(e){c.object.isPerspectiveCamera?v/=e:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom*e)),c.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function N(e){c.object.isPerspectiveCamera?v*=e:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom/e)),c.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function U(e){M.set(e.clientX,e.clientY)}function z(e){if(!1!==c.enabled){switch(e.preventDefault(),c.domElement.focus?c.domElement.focus():window.focus(),e.button){case c.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===c.enablePan)return;U(e),d=f.PAN}else{if(!1===c.enableRotate)return;!function(e){w.set(e.clientX,e.clientY)}(e),d=f.ROTATE}break;case c.mouseButtons.MIDDLE:if(!1===c.enableZoom)return;!function(e){P.set(e.clientX,e.clientY)}(e),d=f.DOLLY;break;case c.mouseButtons.RIGHT:if(!1===c.enablePan)return;U(e),d=f.PAN}d!==f.NONE&&(document.addEventListener("mousemove",D,!1),document.addEventListener("mouseup",H,!1),c.dispatchEvent(l))}}function D(e){if(!1!==c.enabled)switch(e.preventDefault(),d){case f.ROTATE:if(!1===c.enableRotate)return;!function(e){x.set(e.clientX,e.clientY),O.subVectors(x,w).multiplyScalar(c.rotateSpeed);var t=c.domElement===document?c.domElement.body:c.domElement;T(2*Math.PI*O.x/t.clientHeight),A(2*Math.PI*O.y/t.clientHeight),w.copy(x),c.update()}(e);break;case f.DOLLY:if(!1===c.enableZoom)return;!function(e){I.set(e.clientX,e.clientY),L.subVectors(I,P),L.y>0?R(S()):L.y<0&&N(S()),P.copy(I),c.update()}(e);break;case f.PAN:if(!1===c.enablePan)return;!function(e){E.set(e.clientX,e.clientY),j.subVectors(E,M).multiplyScalar(c.panSpeed),F(j.x,j.y),M.copy(E),c.update()}(e)}}function H(e){!1!==c.enabled&&(document.removeEventListener("mousemove",D,!1),document.removeEventListener("mouseup",H,!1),c.dispatchEvent(h),d=f.NONE)}function _(e){!1===c.enabled||!1===c.enableZoom||d!==f.NONE&&d!==f.ROTATE||(e.preventDefault(),e.stopPropagation(),c.dispatchEvent(l),function(e){e.deltaY<0?N(S()):e.deltaY>0&&R(S()),c.update()}(e),c.dispatchEvent(h))}function B(e){!1!==c.enabled&&!1!==c.enableKeys&&!1!==c.enablePan&&function(e){var t=!1;switch(e.keyCode){case c.keys.UP:F(0,c.keyPanSpeed),t=!0;break;case c.keys.BOTTOM:F(0,-c.keyPanSpeed),t=!0;break;case c.keys.LEFT:F(c.keyPanSpeed,0),t=!0;break;case c.keys.RIGHT:F(-c.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),c.update())}(e)}function Y(e){if(!1!==c.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===c.enableRotate)return;!function(e){w.set(e.touches[0].pageX,e.touches[0].pageY)}(e),d=f.TOUCH_ROTATE;break;case 2:if(!1===c.enableZoom&&!1===c.enablePan)return;!function(e){if(c.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);P.set(0,r)}if(c.enablePan){var o=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);M.set(o,a)}}(e),d=f.TOUCH_DOLLY_PAN;break;default:d=f.NONE}d!==f.NONE&&c.dispatchEvent(l)}}function Z(e){if(!1!==c.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===c.enableRotate)return;if(d!==f.TOUCH_ROTATE)return;!function(e){x.set(e.touches[0].pageX,e.touches[0].pageY),O.subVectors(x,w).multiplyScalar(c.rotateSpeed);var t=c.domElement===document?c.domElement.body:c.domElement;T(2*Math.PI*O.x/t.clientHeight),A(2*Math.PI*O.y/t.clientHeight),w.copy(x),c.update()}(e);break;case 2:if(!1===c.enableZoom&&!1===c.enablePan)return;if(d!==f.TOUCH_DOLLY_PAN)return;!function(e){if(c.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);I.set(0,r),L.set(0,Math.pow(I.y/P.y,c.zoomSpeed)),R(L.y),P.copy(I)}if(c.enablePan){var o=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);E.set(o,a),j.subVectors(E,M).multiplyScalar(c.panSpeed),F(j.x,j.y),M.copy(E)}c.update()}(e);break;default:d=f.NONE}}function G(e){!1!==c.enabled&&(c.dispatchEvent(h),d=f.NONE)}function X(e){!1!==c.enabled&&e.preventDefault()}c.domElement.addEventListener("contextmenu",X,!1),c.domElement.addEventListener("mousedown",z,!1),c.domElement.addEventListener("wheel",_,!1),c.domElement.addEventListener("touchstart",Y,!1),c.domElement.addEventListener("touchend",G,!1),c.domElement.addEventListener("touchmove",Z,!1),window.addEventListener("keydown",B,!1),this.update()},r.OrbitControls.prototype=Object.create(r.EventDispatcher.prototype),r.OrbitControls.prototype.constructor=r.OrbitControls,Object.defineProperties(r.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),e.exports=t.default=r.OrbitControls},function(e,t,n){"use strict";n.r(t);var r=n(0);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var s=function(){function e(t){o(this,e),this.manager=void 0!==t?t:r.DefaultLoadingManager}return i(e,[{key:"load",value:function(e,t,n,o){var a=this,i=new r.FileLoader(this.manager);i.setPath(this.path),i.load(e,function(e){t(a.parse(e))},n,o)}},{key:"setPath",value:function(e){this.path=e}},{key:"setTexturePath",value:function(e){this.texturePath=e}},{key:"setBaseUrl",value:function(e){console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(e)}},{key:"setCrossOrigin",value:function(e){this.crossOrigin=e}},{key:"setMaterialOptions",value:function(e){this.materialOptions=e}},{key:"parse",value:function(e){for(var t=e.split("\n"),n={},r=/\s+/,o={},a=0;a<t.length;a++){var i=t[a];if(0!==(i=i.trim()).length&&"#"!==i.charAt(0)){var s=i.indexOf(" "),u=s>=0?i.substring(0,s):i;u=u.toLowerCase();var l=s>=0?i.substring(s+1):"";if(l=l.trim(),"newmtl"===u)n={name:l},o[l]=n;else if(n)if("ka"===u||"kd"===u||"ks"===u){var h=l.split(r,3);n[u]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])]}else n[u]=l}}var f=new c(this.texturePath||this.path,this.materialOptions);return f.setCrossOrigin(this.crossOrigin),f.setManager(this.manager),f.setMaterials(o),f}}]),e}(),c=function(){function e(t,n){var a,i,s;o(this,e),s="Anonymous",(i="crossOrigin")in(a=this)?Object.defineProperty(a,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[i]=s,this.baseUrl=t||"",this.options=n,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:r.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:r.RepeatWrapping}return i(e,[{key:"setCrossOrigin",value:function(e){this.crossOrigin=e}},{key:"setManager",value:function(e){this.manager=e}},{key:"setMaterials",value:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}},{key:"convert",value:function(e){if(!this.options)return e;var t={};for(var n in e){var r=e[n],o={};for(var a in t[n]=o,r){var i=!0,s=r[a],c=a.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(i=!1)}i&&(o[c]=s)}}return t}},{key:"preload",value:function(){for(var e in this.materialsInfo)this.create(e)}},{key:"getIndex",value:function(e){return this.nameLookup[e]}},{key:"getAsArray",value:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}},{key:"create",value:function(e){return void 0===this.materials[e]&&this.createMaterial(e),this.materials[e]}},{key:"createMaterial",value:function(e){var t=this,n=this.materialsInfo[e],o={name:e,side:this.side};function a(e,n){if(!o[e]){var r,a,i=t.getTextureParams(n,o),s=t.loadTexture((r=t.baseUrl,"string"!=typeof(a=i.url)||""===a?"":/^https?:\/\//i.test(a)?a:r+a));s.repeat.copy(i.scale),s.offset.copy(i.offset),s.wrapS=t.wrap,s.wrapT=t.wrap,o[e]=s}}for(var i in n){var s,c=n[i];if(""!==c)switch(i.toLowerCase()){case"kd":o.color=(new r.Color).fromArray(c);break;case"ks":o.specular=(new r.Color).fromArray(c);break;case"map_kd":a("map",c);break;case"map_ks":a("specularMap",c);break;case"norm":a("normalMap",c);break;case"map_bump":case"bump":a("bumpMap",c);break;case"ns":o.shininess=parseFloat(c);break;case"d":(s=parseFloat(c))<1&&(o.opacity=s,o.transparent=!0);break;case"tr":(s=parseFloat(c))>0&&(o.opacity=1-s,o.transparent=!0)}}return this.materials[e]=new r.MeshPhongMaterial(o),this.materials[e]}},{key:"getTextureParams",value:function(e,t){var n,o={scale:new r.Vector2(1,1),offset:new r.Vector2(0,0)},a=e.split(/\s+/);return(n=a.indexOf("-bm"))>=0&&(t.bumpScale=parseFloat(a[n+1]),a.splice(n,2)),(n=a.indexOf("-s"))>=0&&(o.scale.set(parseFloat(a[n+1]),parseFloat(a[n+2])),a.splice(n,4)),(n=a.indexOf("-o"))>=0&&(o.offset.set(parseFloat(a[n+1]),parseFloat(a[n+2])),a.splice(n,4)),o.url=a.join(" ").trim(),o}},{key:"loadTexture",value:function(e,t,n,o,a){var i,s=r.Loader.Handlers.get(e),c=void 0!==this.manager?this.manager:r.DefaultLoadingManager;return null===s&&(s=new r.TextureLoader(c)),s.setCrossOrigin&&s.setCrossOrigin(this.crossOrigin),i=s.load(e,n,o,a),void 0!==t&&(i.mapping=t),i}}]),e}(),u=s;function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manager=void 0!==t?t:r.DefaultLoadingManager,this.materials=null,this.regexp={vertexPattern:/^v\s+([\d|.|+|\-|e|E]+)\s+([\d|.|+|\-|e|E]+)\s+([\d|.|+|\-|e|E]+)/,normalPattern:/^vn\s+([\d|.|+|\-|e|E]+)\s+([\d|.|+|\-|e|E]+)\s+([\d|.|+|\-|e|E]+)/,uvPattern:/^vt\s+([\d|.|+|\-|e|E]+)\s+([\d|.|+|\-|e|E]+)/,faceVertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,faceVertexUv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,faceVertexUvNormal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,faceVertexNormal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,objectPattern:/^[og]\s*(.+)?/,smoothingPattern:/^s\s+(\d+|on|off)/,materialLibraryPattern:/^mtllib /,materialUsePattern:/^usemtl /}}var t,n,o;return t=e,(n=[{key:"load",value:function(e,t,n,o){var a=this,i=new r.FileLoader(a.manager);i.setPath(this.path),i.load(e,function(e){t(a.parse(e))},n,o)}},{key:"setPath",value:function(e){this.path=e}},{key:"setMaterials",value:function(e){this.materials=e}},{key:"createParserState",value:function(){var e={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object.finalize&&this.object.finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var n=this.finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){var r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object.finalize&&this.object.finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var r=this.vertices,o=this.object.geometry.vertices;o.push(r[e+0]),o.push(r[e+1]),o.push(r[e+2]),o.push(r[t+0]),o.push(r[t+1]),o.push(r[t+2]),o.push(r[n+0]),o.push(r[n+1]),o.push(r[n+2])},addVertexLine:function(e){var t=this.vertices,n=this.object.geometry.vertices;n.push(t[e+0]),n.push(t[e+1]),n.push(t[e+2])},addNormal:function(e,t,n){var r=this.normals,o=this.object.geometry.normals;o.push(r[e+0]),o.push(r[e+1]),o.push(r[e+2]),o.push(r[t+0]),o.push(r[t+1]),o.push(r[t+2]),o.push(r[n+0]),o.push(r[n+1]),o.push(r[n+2])},addUV:function(e,t,n){var r=this.uvs,o=this.object.geometry.uvs;o.push(r[e+0]),o.push(r[e+1]),o.push(r[t+0]),o.push(r[t+1]),o.push(r[n+0]),o.push(r[n+1])},addUVLine:function(e){var t=this.uvs,n=this.object.geometry.uvs;n.push(t[e+0]),n.push(t[e+1])},addFace:function(e,t,n,r,o,a,i,s,c,u,l,h){var f,d=this.vertices.length,p=this.parseVertexIndex(e,d),m=this.parseVertexIndex(t,d),b=this.parseVertexIndex(n,d);if(void 0===r?this.addVertex(p,m,b):(f=this.parseVertexIndex(r,d),this.addVertex(p,m,f),this.addVertex(m,b,f)),void 0!==o){var v=this.uvs.length;p=this.parseUVIndex(o,v),m=this.parseUVIndex(a,v),b=this.parseUVIndex(i,v),void 0===r?this.addUV(p,m,b):(f=this.parseUVIndex(s,v),this.addUV(p,m,f),this.addUV(m,b,f))}if(void 0!==c){var g=this.normals.length;p=this.parseNormalIndex(c,g),m=c===u?p:this.parseNormalIndex(u,g),b=c===l?p:this.parseNormalIndex(l,g),void 0===r?this.addNormal(p,m,b):(f=this.parseNormalIndex(h,g),this.addNormal(p,m,f),this.addNormal(m,b,f))}},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,r=this.uvs.length,o=0,a=e.length;o<a;o++)this.addVertexLine(this.parseVertexIndex(e[o],n));a=t.length;for(var i=0;i<a;i++)this.addUVLine(this.parseUVIndex(t[i],r))}};return e.startObject("",!1),e}},{key:"parse",value:function(e){console.time("OBJLoader");var t=this.createParserState();-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));for(var n=e.split("\n"),o="",a="",i="",s=[],c="function"==typeof"".trimLeft,u=0,l=n.length;u<l;u++)if(o=n[u],0!==(o=c?o.trimLeft():o.trim()).length&&"#"!==(a=o.charAt(0)))if("v"===a)if(" "===(i=o.charAt(1))&&null!==(s=this.regexp.vertexPattern.exec(o)))t.vertices.push(parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3]));else if("n"===i&&null!==(s=this.regexp.normalPattern.exec(o)))t.normals.push(parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3]));else{if("t"!==i||null===(s=this.regexp.uvPattern.exec(o)))throw new Error("Unexpected vertex/normal/uv line: '"+o+"'");t.uvs.push(parseFloat(s[1]),parseFloat(s[2]))}else if("f"===a)if(null!==(s=this.regexp.faceVertexUvNormal.exec(o)))t.addFace(s[1],s[4],s[7],s[10],s[2],s[5],s[8],s[11],s[3],s[6],s[9],s[12]);else if(null!==(s=this.regexp.faceVertexUv.exec(o)))t.addFace(s[1],s[3],s[5],s[7],s[2],s[4],s[6],s[8]);else if(null!==(s=this.regexp.faceVertexNormal.exec(o)))t.addFace(s[1],s[3],s[5],s[7],void 0,void 0,void 0,void 0,s[2],s[4],s[6],s[8]);else{if(null===(s=this.regexp.faceVertex.exec(o)))throw new Error("Unexpected face line: '"+o+"'");t.addFace(s[1],s[2],s[3],s[4])}else if("l"===a){var h=o.substring(1).trim().split(" "),f=[],d=[];if(-1===o.indexOf("/"))f=h;else for(var p=0,m=h.length;p<m;p++){var b=h[p].split("/");""!==b[0]&&f.push(b[0]),""!==b[1]&&d.push(b[1])}t.addLineGeometry(f,d)}else if(null!==(s=this.regexp.objectPattern.exec(o))){var v=(" "+s[0].substr(1).trim()).substr(1);t.startObject(v)}else if(this.regexp.materialUsePattern.test(o))t.object.startMaterial(o.substring(7).trim(),t.materialLibraries);else if(this.regexp.materialLibraryPattern.test(o))t.materialLibraries.push(o.substring(7).trim());else{if(null===(s=this.regexp.smoothingPattern.exec(o))){if("\0"===o)continue;throw new Error("Unexpected line: '"+o+"'")}var g=s[1].trim().toLowerCase();t.object.smooth="1"===g||"on"===g;var y=t.object.currentMaterial();y&&(y.smooth=t.object.smooth)}t.finalize();var w=new r.Group;for(w.materialLibraries=[].concat(t.materialLibraries),u=0,l=t.objects.length;u<l;u++){var x=t.objects[u],O=x.geometry,M=x.materials,E="Line"===O.type;if(0!==O.vertices.length){var j=new r.BufferGeometry;j.addAttribute("position",new r.BufferAttribute(new Float32Array(O.vertices),3)),O.normals.length>0?j.addAttribute("normal",new r.BufferAttribute(new Float32Array(O.normals),3)):j.computeVertexNormals(),O.uvs.length>0&&j.addAttribute("uv",new r.BufferAttribute(new Float32Array(O.uvs),2));for(var P,I=[],L=0,S=M.length;L<S;L++){var T=M[L];if(y=void 0,null!==this.materials&&(y=this.materials.create(T.name),E&&y&&!(y instanceof r.LineBasicMaterial))){var A=new r.LineBasicMaterial;A.copy(y),y=A}y||((y=E?new r.LineBasicMaterial:new r.MeshPhongMaterial).name=T.name),y.flatShading=T.smooth?r.SmoothShading:r.FlatShading,I.push(y)}if(I.length>1){for(L=0,S=M.length;L<S;L++)T=M[L],j.addGroup(T.groupStart,T.groupCount,L);P=E?new r.LineSegments(j,I):new r.Mesh(j,I)}else P=E?new r.LineSegments(j,I[0]):new r.Mesh(j,I[0]);P.name=x.name,w.add(P)}}return console.timeEnd("OBJLoader"),w}}])&&l(t.prototype,n),o&&l(t,o),e}(),f=n(1),d=n.n(f);function p(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"load",function(e,t,n){var r=o.config;o.loadMaterials(e,null,function(e){r.setMaterial&&(e=r.setMaterial(e)),(new h).setMaterials(e),o.loadObjects(t,null,function(e){return n(e)})})}),m(this,"loadMaterials",function(e,t,n){o.mtlLoader.load(e[0],function(r){t?t.materialsInfo=[].concat(p(t.materialsInfo),p(r.materialsInfo)):t=r,e.shift(),0!=e.length?loadMaterials(e,t,n):n(t)})}),m(this,"loadObjects",function(e,t,n){o.objectLoader.load(e[0],function(r){t?t.children=r.children.concat(t.children):t=d()({},r),e.shift(),0!=e.length?loadObjects(e,t,n):n(t)})}),this.mtlLoader=n||new u,this.objectLoader=r||new h,this.config=t},v=n(3),g=n.n(v),y=n(2),w=n.n(y);var x=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(e){function t(e){var n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=E(t).call(this,e),n=!a||"object"!==O(a)&&"function"!=typeof a?j(o):a,I(j(n),"config",{clearOpacity:.2,meshShiftTime:function(){return 1e3*Math.random()*5+1e3},beforeInit:null,borderVisible:!0,divisor:100,cameraPosition:{x:0,y:0,z:65},afterRotation:-Math.PI/4,rotationSpeed:.02,texture:{line:"#055290",pillar:"#2377e8",top:"#07205b",bottom:"#000",border:"#2a8fdf",select:"#071C5B"},light:function(){var e=[];return e.push(new r.HemisphereLight(16777215,16777215,.3)),e},controls:{maxPolarAngle:.75*Math.PI,minPolarAngle:.25*Math.PI},clientWidth:document.documentElement.clientWidth||document.body.clientWidth,clientHeight:document.documentElement.clientHeight||document.body.clientHeight}),I(j(n),"_startPositions",{}),I(j(n),"_startTweenCount",0),I(j(n),"intervals",{}),I(j(n),"old",{}),I(j(n),"current",{}),I(j(n),"root",{}),I(j(n),"withdrawPosition",!1),I(j(n),"dataObject",{}),I(j(n),"container",{}),I(j(n),"modelTexture",{}),I(j(n),"camera",null),I(j(n),"renderer",null),I(j(n),"scene",null),I(j(n),"controls",null),I(j(n),"initAreaPosition",function(e,t){var r=j(n)._startPositions,o=r[e];n.config.beforeAnimate&&n.config.beforeAnimate(t),o||(o={x:1e3*Math.random()-500,y:1e3*Math.random()-500,z:Math.random()>.5?200*Math.random()+300:500*-Math.random()-1e3},r[e]=o),t.position.set(o.x,o.y,o.z)}),I(j(n),"dealObjectInLoadCirculStart",function(e,t){if(e.name&&(/border$/.test(e.name)&&(e.visible=t),e instanceof r.Mesh)){var o=e.name.split("_")[0];n.initAreaPosition(o,e)}}),I(j(n),"changeModel4DataRefresh",function(e,t){var r=e.name;if(/pillar$/.test(r)){var o=r.split("_")[0],a=e.userData.val;if(o){var i=0;t&&0!==t&&(i=15*(a/t)),i<=0?e.visible=!1:(n.setHeightSlow(e,i),e.visible=!0)}else o=r?r.split("_")[0]:"",e.visible=!1}}),I(j(n),"setHeightSlow",function(e,t){n.setHeight(e,1);var r,o=1;r=setInterval(function(){if(o<300){var a=Math.floor(t*o/300);n.setHeight(e,a),o++}else 300===o?(o++,n.setHeight(e,t)):(clearInterval(r),delete n.intervals[r])},function(){}),n.intervals[r]=r}),I(j(n),"setHeight",function(e,t){(0===t||isNaN(t))&&(t=1);var n=e.geometry;n.verticesNeedUpdate=!0;var r=n.vertices,o=r[0].z,a=!0,i=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value.z;if(o!=l){o=Math.min(l,o);break}}}catch(e){i=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw s}}var h=!0,f=!1,d=void 0;try{for(var p,m=r[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var b=p.value;b.z!==o&&(b.z=o+t)}}catch(e){f=!0,d=e}finally{try{h||null==m.return||m.return()}finally{if(f)throw d}}}),I(j(n),"initListener",function(e){n.container.addEventListener("mousemove",function(e){return n.setMeshHighLightStatus(e)},!1),n.container.addEventListener("click",function(t){return n.showDetail(t,e)},!1)}),I(j(n),"setMeshHighLightStatus",function(e){var t=j(n).config,r=n.objectFromMouse(e.pageX,e.pageY).object,o=t.texture;if(r){var a=n.current&&n.current.uuid;if(a===r.uuid)return;r.name.includes("border")||r.name.includes("line")||r.name.includes("pillar")||r.name.includes("texture")||r.name.includes("river")||(a?(n.current.material.color.set(o.top),n.old=n.current,n.current=r,r.material.color.set(o.select)):(n.current=r,r.material.color.set(o.select)))}}),I(j(n),"showDetail",function(e,t){var r=j(n).config;e.preventDefault();var o=n.objectFromMouse(e.pageX,e.pageY).object;if(o&&r.showDetail){var a=r.showDetail(o);n.meshMove(!!a,t)}}),I(j(n),"objectFromMouse",function(e,t){var o=j(n).container,a=n.renderer.domElement,i=a.offsetLeft,s=t-a.offsetTop,c=(e-i)/o.offsetWidth*2-1,u=-s/o.offsetHeight*2+1,l=new r.Vector2(c,u),h=new r.Raycaster;h.setFromCamera(l,n.camera);var f=h.intersectObjects(n.root.children,!0);if(f.length>0){var d=f[0];if(d)return d}return{object:null,point:null,face:null}}),I(j(n),"getOffset",function(e,t){return t||((t={}).top=0,t.left=0),e==document.body?t:(t.top+=e.offsetTop,t.left+=e.offsetLeft,n.getOffset(e.parentNode,t))}),I(j(n),"meshMove",function(e,t){var r=j(n),o=r.camera,a=r.renderer,i=r.container,s=r.getMeshWidth,c=r._getCoordinate2InScene,u=r.config,l={x:0,y:0,z:0};Math.PI;if(e){({x:-Math.PI/4,y:Math.PI/180*10,z:0});var h=i.clientWidth/550;n.withdrawPosition||(n.withdrawPosition=c({x:30*h,y:a.domElement.offsetHeight/2},o,a.domElement),n.withdrawPosition.x+=s(t).length/4,n.tweenInOut(o.position,{z:80},1e3)),l=n.withdrawPosition,n.tweenInOut(t.position,l,1e3)}else n.tweenInOut(o.position,u.cameraPosition,1e3),n.tweenInOut(t.position,l,1e3),n.withdrawPosition=null}),I(j(n),"getMeshWidth",function(e){var t=new r.BoxHelper(e,16711680),n=(new r.Box3).setFromObject(e);return t.update(),{length:n.max.x-n.min.x,width:n.max.y-n.min.y,height:n.max.z-n.min.z}}),I(j(n),"handleModelShift",function(e){var t=j(n),r=t._startPositions,o=t.config;if(r[e.name.split("_")[0]])return o.meshShiftTime&&o.meshShiftTime()}),I(j(n),"childMapping",function(e){var t=j(n).config;t.childMapping&&t.childMapping(e)}),I(j(n),"_getCoordinate2InScene",function(e,t,o){t.updateMatrixWorld(!0);var a=n.getVector2InScene(e,o),i=new r.Vector3(a.x,a.y,0);i.unproject(t),i.sub(t.position),i.normalize();var s=new r.Raycaster(t.position,i),c=s.ray.origin,u=s.ray.direction,l=new r.Vector3;return l.setX(c.x-(c.z-0)*u.x/u.z),l.setY(c.y-(c.z-0)*u.y/u.z),l}),I(j(n),"getVector2InScene",function(e,t){var n=new r.Vector2;return n.x=e.x/t.offsetWidth*2-1,n.y=-e.y/t.offsetHeight*2+1,n}),I(j(n),"tweenInOut",function(e,t,n,r,o){var a=new w.a.Tween(e).to(t,n).easing(w.a.Easing.Exponential.InOut);return r&&a.onComplete(r),o&&a.onStart(o),a.start()}),I(j(n),"loadMaterials",function(e,t,n,r){t.load(e[0],function(o){n?n.materialsInfo=[].concat(M(n.materialsInfo),M(o.materialsInfo)):n=o,e.shift(),0!=e.length?loadMaterials(e,t,n,r):r(n)})}),I(j(n),"loadObjects",function(e,t,n,r){t.load(e[0],function(o){n?n.children=o.children.concat(n.children):n=d()({},o),e.shift(),0!=e.length?loadObjects(e,t,n,r):r(n)})}),I(j(n),"initParams",function(){var e=j(n).config,t=e.cameraPosition,o=e.clientWidth,a=e.clientHeight,i=t.x,s=t.y,c=t.z;n.container=e.container;var u=o/a;n.camera=new r.PerspectiveCamera(45,u,1,1e4),n.camera.position.set(i,s,c),n.renderer=new r.WebGLRenderer({alpha:!0,antialias:!0}),n.resize(o,a-4),n.renderer.shadowMap.enabled=!0,n.renderer.shadowMap.type=r.PCFSoftShadowMap,n.container.appendChild(n.renderer.domElement),n.scene=new r.Scene,n.scene.add(n.camera);var l=new g.a(n.camera,n.renderer.domElement);if(Object.assign(l,e.controls),n.controls=l,e.light){var h=e.light(),f=!0,d=!1,p=void 0;try{for(var m,b=h[Symbol.iterator]();!(f=(m=b.next()).done);f=!0){var v=m.value;n.scene.add(v)}}catch(e){d=!0,p=e}finally{try{f||null==b.return||b.return()}finally{if(d)throw p}}}e.clearColor&&n.renderer.setClearColor(e.clearColor,e.clearOpacity)}),I(j(n),"afterMovementMesh",function(){var e=n.config.afterRotation;!function t(){requestAnimationFrame(t),n.root.rotation.x>=e&&(n.root.rotation.x-=n.config.rotationSpeed),n.renderer.render(n.scene,n.camera)}()}),I(j(n),"handleMesh",function(e){var t=j(n),o=t.config,a=t._startTweenCount;e.traverse(function(t){if(!(t instanceof r.Group)){t instanceof r.Mesh?t.geometry=(new r.Geometry).fromBufferGeometry(t.geometry):t instanceof r.Line&&console.log(t.name),"texture"==t.name&&(n.modelTexture=t),n.dealObjectInLoadCirculStart(t,o.borderVisible),n.childMapping(t,o);var i=n.handleModelShift(t,o);n.tweenInOut(t.position,{x:0,y:0,z:0},i,function(){if(0===--a){n.renderPillar(e),n.afterMovementMesh();var t=!0,r=!1,o=void 0;try{for(var i,s=e.children[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var c=i.value;n.config.beforeAnimate&&n.config.beforeAnimate(c,!0)}}catch(e){r=!0,o=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw o}}n.initListener(e)}}),a++}})}),I(j(n),"showTexture",function(e,t){t&&(new r.TextureLoader).load(t,function(t){n.modelTexture.material.map=t,n.modelTexture.material=Object.assign(n.modelTexture.material,e),n.modelTexture.visible=!n.modelTexture.visible})}),I(j(n),"getObject",function(){return n.dataObject}),I(j(n),"refreshPillar",function(e){var t=j(n).dataObject;t=e,n.renderPillar(t)}),I(j(n),"flush",function(){!function e(){requestAnimationFrame(e),w.a.update(),n.controls.update(),n.renderer.render(n.scene,n.camera)}()}),I(j(n),"renderPillar",function(e){var t=j(n).config;e.traverse(function(e){n.changeModel4DataRefresh(e,t.divisor)})}),I(j(n),"resize",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement.clientWidth,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.documentElement.clientHeight-4;n.renderer.setSize(e,t)}),I(j(n),"init",function(){var e=j(n).config,t=e.data,o=t.materials,a=t.objects;e.beforeInit&&e.beforeInit(e),new b(e).load(o,a,function(t){e.data.load(t,function(e){n.dataObject=e,n.handleMesh(e),n.root=(new r.Object3D).add(e),n.scene.add(n.root),n.flush()})})}),n.config=d()(n.config,e),n.initParams(n.config),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,x),t}();t.default=L}])});
//# sourceMappingURL=Trunk.js.map